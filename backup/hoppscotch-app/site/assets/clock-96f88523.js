var Ml=Object.defineProperty;var Hl=(n,o,e)=>o in n?Ml(n,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[o]=e;var ae=(n,o,e)=>(Hl(n,typeof o!="symbol"?o+"":o,e),e);import{eS as Fl,eT as Ul,eU as Nl,eV as Bl,eW as bn,eX as Vl,eY as jl,eZ as Gl,e_ as zl,e$ as Jl,f0 as Wl,f1 as Kl,f2 as Ql,f3 as Xl,f as re,M as ce,h as I,aP as $n,b9 as ao,g as Z,o as k,c as B,w as W,a as _,j as i,e as g,Z as de,d as J,$ as mt,m as ee,be as xn,I as In,aX as Zl,ad as kn,ab as Tn,au as Te,v as qe,cf as Oe,ap as be,W as Se,aK as Ro,Y as ke,dp as Rn,c7 as to,i as Be,an as Sn,n as te,aZ as Lt,aW as Yl,F as Pe,l as Ge,H as ct,f4 as es,f5 as ts,b as vt,f6 as os,f7 as ns,E as ge,aE as ht,f8 as So,cB as wo,ao as ro,cC as Je,f9 as ls,fa as ss,fb as is,fc as as,fd as rs,fe as cs,ff as ds,ai as He,fg as Eo,fh as us,fi as ps,p as _e,fj as sn,fk as go,fl as ms,bk as fs,fm as vs,eg as wn,cE as lt,fn as hs,fo as gs,fp as Do,fq as ys,fr as qs,cF as ye,cR as ot,cS as nt,fs as En,du as oo,ft as _s,cT as Yt,X as oe,fu as an,cJ as Ne,dZ as Dt,fv as Cs,x as ze,b$ as We,fw as bs,fx as $s,fy as xs,fz as Is,r as rt,aT as Re,bc as Mt,dv as ks,eE as Ts,k as ve,dN as Ht,aC as xt,eb as Rs,dw as Ft,cz as Dn,ea as qt,fA as Ss,U as It,dR as Pn,aD as ft,e3 as _t,aV as An,ee as On,b6 as Ln,y as co,z as kt,fB as Mn,dh as Xe,dH as Hn,bg as Fn,fC as ws,eI as Es,fD as Ds,fE as Ps,fF as As,fG as Os,cP as Ct,cO as dt,fH as Ls,bK as Pt,fI as Ms,fJ as je,fK as Hs,fL as Fs,fM as Us,fN as Ns,fO as Bs,fP as Vs,fQ as js,fR as Gs,fS as zs,fT as Js,fU as Ws,fV as Ks,fW as Qs,fX as Xs,fY as Zs,dF as Ys,af as ei,dI as ti,dJ as oi,fZ as ni,am as li,aj as Un,aS as Ot,f_ as si,cH as Ee,f$ as lo,g0 as De,g1 as ii,g2 as rn,g3 as cn,eH as Nn,b1 as At,g4 as no,g5 as dn,g6 as ai,g7 as un,g8 as ri,g9 as ci,bX as xo,a4 as Ut,ga as di,gb as yo,gc as qo,gd as ui,ge as pi,gf as mi,e8 as _o,dg as fi,gg as Bn,gh as vi,gi as Vn,gj as jn,gk as Gn,gl as hi,gm as gi,gn as yi,go as qi,gp as so,gq as _i,gr as zn,gs as Ci,gt as pn,aR as bi,gu as yt,gv as $i,bd as Jn,eF as xi,aF as Po,ez as Ii,gw as ki,ba as Ti,eh as Ri,gx as Si,gy as wi,gz as Ei,gA as Di,gB as mn,gC as fn,gD as Pi,gE as Ai,ds as Oi}from"./index-7d8b347c.js";import{_ as Li,b as Mi}from"./Headers-96f03a77.js";import{h as vn,b as hn,c as Hi,d as Fi,e as Ui}from"./insomnia-9ea86791.js";import{I as bt}from"./json-91191aeb.js";import{I as Ni}from"./filter-a97f78ef.js";function Bi(n,o,e,t){for(var l=n.length,s=e+(t?1:-1);t?s--:++s<l;)if(o(n[s],s,n))return s;return-1}function Vi(n){return n!==n}function ji(n,o,e){for(var t=e-1,l=n.length;++t<l;)if(n[t]===o)return t;return-1}function Gi(n,o,e){return o===o?ji(n,o,e):Bi(n,Vi,e)}function zi(n){var o=n==null?0:n.length;return o?n[o-1]:void 0}var Wn=/[\\^$.*+?()[\]{}|]/g,Ji=RegExp(Wn.source);function Wi(n){return n=Fl(n),n&&Ji.test(n)?n.replace(Wn,"\\$&"):n}function Ki(n,o){var e=[];return Ul(n,function(t,l,s){o(t,l,s)&&e.push(t)}),e}function Qi(n,o){var e=Nl(n)?Bl:Ki;return e(n,bn(o))}function Xi(n,o){return o.length<2?n:Vl(n,jl(o,0,-1))}function Zi(n,o){return o=Gl(o,n),n=Xi(n,o),n==null||delete n[zl(zi(o))]}function Yi(n,o,e,t){for(var l=e-1,s=n.length;++l<s;)if(t(n[l],o))return l;return-1}var ea=Array.prototype,gn=ea.splice;function ta(n,o,e,t){var l=t?Yi:Gi,s=-1,c=o.length,a=n;for(n===o&&(o=Jl(o)),e&&(a=Wl(n,Kl(e)));++s<c;)for(var C=0,T=o[s],q=e?e(T):T;(C=l(a,q,C,t))>-1;)a!==n&&gn.call(a,C,1),gn.call(n,C,1);return n}function oa(n,o){return n&&n.length&&o&&o.length?ta(n,o):n}var na=Ql(oa);const la=na;var sa=Array.prototype,ia=sa.splice;function aa(n,o){for(var e=n?o.length:0,t=e-1;e--;){var l=o[e];if(e==t||l!==s){var s=l;Xl(l)?ia.call(n,l,1):Zi(n,l)}}return n}function ra(n,o){var e=[];if(!(n&&n.length))return e;var t=-1,l=[],s=n.length;for(o=bn(o);++t<s;){var c=n[t];o(c,t,n)&&(e.push(c),l.push(t))}return aa(n,l),e}const ca={class:"space-y-4 p-4"},da={class:"p-4 mb-4 border rounded-md text-amber-500 border-amber-600"},ua={key:0,class:"flex gap-x-2 items-center"},pa={class:"truncate"},ma={class:"text-secondaryDark"},fa={class:"p-4 rounded-md bg-primaryLight text-secondaryDark select-text"},va={class:"flex space-x-2"},ha=re({__name:"Runner",props:{collectionID:{},environmentID:{},selectedEnvironmentIndex:{}},emits:["hide-modal"],setup(n,{emit:o}){const e=ce(),t=be(),l=n,s=o,c=I(!1),a=I("cli"),C=$n(ao,1e3),T=Z(()=>{const P=l.selectedEnvironmentIndex;return P.type==="TEAM_ENV"?P.environment.name:null}),q=window.location.hostname==="hoppscotch.io",v=Z(()=>q?e("collection_runner.cli_command_generation_description_cloud"):Object.create(globalThis.import_meta_env||null).VITE_BACKEND_API_URL?e("collection_runner.cli_command_generation_description_sh"):e("collection_runner.cli_command_generation_description_sh_with_server_url_placeholder")),R=Z(()=>{var f;const{collectionID:P,environmentID:M}=l,H=c.value&&M?`-e ${M}`:"",j=(f=Object.create(globalThis.import_meta_env||null).VITE_BACKEND_API_URL)!=null&&f.endsWith("/v1")?Object.create(globalThis.import_meta_env||null).VITE_BACKEND_API_URL.slice(0,-3):"<server_url>",A=q?"":`--server ${j}`;return`hopp test ${P} ${H} --token <access_token> ${A}`}),E=()=>{c.value=!c.value},y=()=>{xn(R.value),C.value=In,t.success(`${e("state.copied_to_clipboard")}`)},w=()=>{s("hide-modal")};return(P,M)=>{const H=Zl,j=kn,A=Tn,f=Te,F=qe,p=Oe;return k(),B(p,{dialog:"",title:i(e)("collection_runner.run_collection"),onClose:w},{body:W(()=>[_(A,{modelValue:a.value,"onUpdate:modelValue":M[0]||(M[0]=r=>a.value=r)},{default:W(()=>[_(j,{id:"cli",label:i(e)("collection_runner.cli")},{default:W(()=>[g("div",ca,[g("p",da,de(v.value),1),P.environmentID?(k(),J("div",ua,[_(H,{on:c.value,onChange:E},null,8,["on"]),g("span",pa,[mt(de(i(e)("collection_runner.include_active_environment"))+" ",1),g("span",ma,de(T.value),1)])])):ee("",!0),g("div",fa,de(R.value),1)])]),_:1},8,["label"]),_(j,{id:"runner",disabled:"",label:i(e)("collection_runner.ui")},null,8,["label"])]),_:1},8,["modelValue"])]),footer:W(()=>[g("div",va,[_(f,{label:`${i(e)("action.copy")}`,icon:i(C),outline:"",onClick:y},null,8,["label","icon"]),_(F,{label:`${i(e)("action.close")}`,outline:"",filled:"",onClick:w},null,8,["label"])])]),_:1},8,["title"])}}}),ga={class:"bg-bannerInfo px-4 py-2 flex items-center sticky bottom-0"},ya={class:"bg-bannerInfo px-4 py-2 flex items-center sticky bottom-0"},qa={class:"flex flex-shrink-0 items-center justify-between border-b border-dividerLight bg-primary pl-4"},_a={class:"p-4"},Ca={class:"flex items-center justify-between py-2 px-4 rounded-md bg-primaryLight select-text"},ba={class:"text-secondaryDark"},$a={class:"bg-bannerInfo px-4 py-2 flex items-center sticky bottom-0"},xa={class:"flex gap-x-2"},Kn=re({__name:"Properties",props:{show:{type:Boolean,default:!1},loadingState:{type:Boolean,default:!1},editingProperties:{},source:{},modelValue:{},showDetails:{type:Boolean,default:!1}},emits:["set-collection-properties","hide-modal","update:modelValue"],setup(n,{emit:o}){const e=Se(Ro),t=ce(),l=be(),s=n,c=o,a=I({headers:[],auth:{authType:"inherit",authActive:!1}}),C=$n(ao,1e3),T=Z(()=>q.value==="details");ke(a,y=>{if(s.show&&s.editingProperties){const w={collection:y,isRootCollection:s.editingProperties.isRootCollection??!1,path:s.editingProperties.path,inheritedProperties:s.editingProperties.inheritedProperties};e.setLocalConfig("unsaved_collection_properties",JSON.stringify(w))}},{deep:!0});const q=Rn(s,"modelValue",c);ke(()=>s.show,y=>{q.value==="details"&&!s.showDetails&&(q.value="headers"),y&&s.editingProperties.collection?(a.value.auth=to(s.editingProperties.collection.auth),a.value.headers=to(s.editingProperties.collection.headers)):(a.value={headers:[],auth:{authType:"inherit",authActive:!1}},e.removeLocalConfig("unsaved_collection_properties"))});const v=()=>{if(!s.editingProperties)return;const y=to(a.value),w={path:s.editingProperties.path,collection:{...s.editingProperties.collection,...y},isRootCollection:s.editingProperties.isRootCollection};c("set-collection-properties",w),e.removeLocalConfig("unsaved_collection_properties")},R=()=>{e.removeLocalConfig("unsaved_collection_properties"),c("hide-modal")},E=()=>{xn(s.editingProperties.path),C.value=In,l.success(`${t("state.copied_to_clipboard")}`)};return(y,w)=>{const P=Li,M=Yl,H=kn,j=Mi,A=qe,f=Tn,F=Te,p=Oe,r=Be("tippy");return y.show?(k(),B(p,{key:0,dialog:"",title:i(t)("collection.properties"),"full-width-body":!0,onClose:R},{body:W(()=>[_(f,{modelValue:i(q),"onUpdate:modelValue":w[2]||(w[2]=$=>Sn(q)?q.value=$:null),styles:"sticky overflow-x-auto flex-shrink-0 bg-primary top-0 z-10 !-py-4","render-inactive-tabs":""},{default:W(()=>[_(H,{id:"headers",label:`${i(t)("tab.headers")}`},{default:W(()=>[_(P,{modelValue:a.value,"onUpdate:modelValue":w[0]||(w[0]=$=>a.value=$),"is-collection-property":!0},null,8,["modelValue"]),g("div",ga,[_(M,{class:"svg-icons mr-2"}),mt(" "+de(i(t)("helpers.collection_properties_header")),1)])]),_:1},8,["label"]),_(H,{id:"authorization",label:`${i(t)("tab.authorization")}`},{default:W(()=>[_(j,{modelValue:a.value.auth,"onUpdate:modelValue":w[1]||(w[1]=$=>a.value.auth=$),"is-collection-property":!0,"is-root-collection":y.editingProperties.isRootCollection,"inherited-properties":y.editingProperties.inheritedProperties,source:y.source},null,8,["modelValue","is-root-collection","inherited-properties","source"]),g("div",ya,[_(M,{class:"svg-icons mr-2"}),mt(" "+de(i(t)("helpers.collection_properties_authorization")),1)])]),_:1},8,["label"]),y.showDetails?(k(),B(H,{key:0,id:"details",label:i(t)("collection.details")},{default:W(()=>[g("div",qa,[g("span",null,de(i(t)("collection_runner.collection_id")),1),te(_(A,{to:"https://docs.hoppscotch.io/documentation/clients/cli/overview#running-collections-present-on-the-api-client",blank:"",title:i(t)("app.wiki"),icon:i(Lt)},null,8,["title","icon"]),[[r,{theme:"tooltip"}]])]),g("div",_a,[g("div",Ca,[g("div",ba,de(y.editingProperties.path),1),_(A,{filled:"",icon:i(C),onClick:E},null,8,["icon"])])]),g("div",$a,[_(M,{class:"svg-icons mr-2"}),mt(" "+de(i(t)("collection_runner.cli_collection_id_description")),1)])]),_:1},8,["label"])):ee("",!0)]),_:1},8,["modelValue"])]),footer:W(()=>[g("div",xa,[T.value?(k(),B(F,{key:0,label:i(t)("action.copy"),icon:i(C),outline:"",filled:"",onClick:E},null,8,["label","icon"])):(k(),B(F,{key:1,label:i(t)("action.save"),loading:y.loadingState,outline:"",onClick:v},null,8,["label","loading"])),_(A,{label:T.value?i(t)("action.close"):i(t)("action.cancel"),outline:"",filled:"",onClick:R},null,8,["label"])])]),_:1},8,["title"])):ee("",!0)}}});function Ia(){const n=[],o=I(0),e=Z(()=>n[o.value]),t=I([0]),l=Z(()=>o.value>0);return{steps:n,currentStep:e,addStep:T=>{n.push(T)},goToPreviousStep:()=>{t.value.length!==1&&(t.value.pop(),o.value=t.value[t.value.length-1])},goToNextStep:()=>{o.value++,t.value.push(o.value)},goToStep:T=>{o.value=n.findIndex(q=>q.id===T),t.value.push(o.value)},hasPreviousStep:l}}function $t(n,o,e){return{id:n,component:o,props:e}}const ka={class:"flex flex-col"},Ta={key:1,class:"flex flex-col space-y-2"},Ra=g("hr",null,null,-1),Sa={class:"flex flex-col space-y-2"},wa=["title"],Ea=re({__name:"ImportExportList",props:{importers:{},exporters:{}},emits:["importer-selected","exporter-selected"],setup(n,{emit:o}){const e=ce(),t=n,l=o,s=Z(()=>t.importers.length>=4);return(c,a)=>{const C=ct,T=es,q=Be("tippy");return k(),J("div",ka,[s.value?(k(),B(T,{key:0},{body:W(()=>[(k(!0),J(Pe,null,Ge(c.importers,v=>(k(),B(C,{key:v.id,icon:v.icon,label:i(e)(`${v.name}`),onClick:R=>l("importer-selected",v.id)},null,8,["icon","label","onClick"]))),128))]),_:1})):(k(),J("div",Ta,[(k(!0),J(Pe,null,Ge(c.importers,v=>(k(),B(C,{key:v.id,icon:v.icon,label:i(e)(`${v.name}`),onClick:R=>l("importer-selected",v.id)},null,8,["icon","label","onClick"]))),128))])),Ra,g("div",Sa,[(k(!0),J(Pe,null,Ge(c.exporters,v=>(k(),J(Pe,{key:v.id},[v.disabled&&v.title?te((k(),J("span",{key:0,title:i(e)(`${v.title}`),class:"flex"},[te(_(C,{icon:v.icon,label:i(e)(`${v.name}`),disabled:v.disabled,loading:v.loading,onClick:R=>l("exporter-selected",v.id)},null,8,["icon","label","disabled","loading","onClick"]),[[q,{theme:"tooltip"}]])],8,wa)),[[q,{theme:"tooltip"}]]):te((k(),B(C,{key:1,icon:v.icon,title:i(e)(`${v.title}`),label:i(e)(`${v.name}`),loading:v.loading,disabled:v.disabled,onClick:R=>l("exporter-selected",v.id)},null,8,["icon","title","label","loading","disabled","onClick"])),[[q,{theme:"tooltip"}]])],64))),128))])])}}}),Da={class:"flex flex-col space-y-2"},Pa=re({__name:"ImportExportSourcesList",props:{sources:{}},emits:["import-source-selected"],setup(n,{emit:o}){const e=ce(),t=o;return(l,s)=>{const c=ct;return k(),J("div",Da,[(k(!0),J(Pe,null,Ge(l.sources,a=>(k(),B(c,{key:a.id,icon:a.icon,label:i(e)(`${a.name}`),onClick:C=>t("import-source-selected",a.id)},null,8,["icon","label","onClick"]))),128))])}}}),Qn=re({__name:"Base",props:{importerModules:{type:Array,default:()=>[],required:!0},exporterModules:{type:Array,default:()=>[],required:!0},modalTitle:{type:String,required:!0}},emits:["hide-modal"],setup(n,{emit:o}){const e=ce(),t=n,{addStep:l,currentStep:s,goToStep:c,goToNextStep:a,goToPreviousStep:C,hasPreviousStep:T}=Ia(),q=I(null),v=I(null),R=$t("choose_importer_or_exporter",Ea,()=>({importers:t.importerModules.map(P=>({id:P.metadata.id,name:P.metadata.name,title:P.metadata.title,icon:P.metadata.icon,disabled:P.metadata.disabled})),exporters:t.exporterModules.map(P=>{var M;return{id:P.metadata.id,name:P.metadata.name,title:P.metadata.title,icon:P.metadata.icon,disabled:P.metadata.disabled,loading:((M=P.metadata.isLoading)==null?void 0:M.value)??!1}}),"onImporter-selected":P=>{q.value=P;const M=t.importerModules.find(H=>H.metadata.id===P);M!=null&&M.supported_sources?a():M!=null&&M.component&&c(M.component.id)},"onExporter-selected":P=>{const M=t.exporterModules.find(H=>H.metadata.id===P);M&&M.action&&M.action()}})),E=$t("choose_import_source",Pa,()=>{const P=t.importerModules.find(H=>H.metadata.id===q.value),M=P==null?void 0:P.supported_sources;return M?(M.forEach(H=>{l(H.step)}),{sources:M.map(H=>({id:H.id,name:H.name,icon:H.icon})),"onImport-source-selected":H=>{var A;v.value=H;const j=(A=M.find(f=>f.id===H))==null?void 0:A.step;j&&c(j.id)}}):{sources:[]}});l(R),l(E),t.importerModules.forEach(P=>{P.component&&l(P.component)});const y=o,w=()=>{y("hide-modal")};return(P,M)=>{const H=qe,j=Oe,A=Be("tippy");return k(),B(j,{dialog:"",title:i(e)(n.modalTitle),styles:"sm:max-w-md",onClose:w},{actions:W(()=>[i(T)?te((k(),B(H,{key:0,title:i(e)("action.go_back"),icon:i(ts),onClick:i(C)},null,8,["title","icon","onClick"])),[[A,{theme:"tooltip"}]]):ee("",!0)]),body:W(()=>[(k(),B(vt(i(s).component),os(ns(i(s).props())),null,16))]),_:1},8,["title"])}}}),Aa={class:"space-y-4"},Oa={class:"flex items-center"},La={class:"flex flex-col ml-10 border border-dashed rounded border-dividerDark"},Ma=["accept"],Ha={key:0,class:"text-red-500 ml-10"},Fa=10,Ua=re({__name:"FileImport",props:{caption:{},acceptedFileTypes:{}},emits:["importFromFile"],setup(n,{emit:o}){const e=ce(),t=be(),l=I(0),s=I(!1),c=I(!1),a=I([]),C=I(),T=o,q=async()=>{c.value&&(c.value=!1),l.value&&(l.value=0);const v=C.value;if(!v){s.value=!1;return}if(!v.files||v.files.length===0){C.value="",s.value=!1,t.show(e("action.choose_file").toString());return}const R=[];let E=0;for(let M=0;M<v.files.length;M++){const H=v.files[M];if(E+=H.size/1024/1024,E>Fa){c.value=!0;break}const j=new FileReader;R.push(new Promise((A,f)=>{j.onload=()=>A(j.result),j.onerror=f,j.readAsText(H)}))}l.value=R.length;const y=await Promise.allSettled(R),w=y.filter(M=>M.status==="fulfilled").map(M=>M.value).filter(Boolean);y.filter(M=>M.status==="rejected").length&&t.error(e("error.reading_files")),a.value=w,s.value=w.length>0};return(v,R)=>{const E=ht,y=Te;return k(),J("div",Aa,[g("p",Oa,[g("span",{class:ge(["inline-flex items-center justify-center flex-shrink-0 mr-4 border-4 rounded-full border-primary text-dividerDark",{"!text-green-500":s.value}])},[_(E,{class:"svg-icons"})],2),g("span",null,de(i(e)(`${v.caption}`)),1)]),g("div",La,[g("input",{id:"inputChooseFileToImportFrom",ref_key:"inputChooseFileToImportFrom",ref:C,name:"inputChooseFileToImportFrom",type:"file",class:"p-4 cursor-pointer transition file:transition file:cursor-pointer text-secondary hover:text-secondaryDark file:mr-2 file:py-2 file:px-4 file:rounded file:border-0 file:text-secondary hover:file:text-secondaryDark file:bg-primaryLight hover:file:bg-primaryDark",accept:v.acceptedFileTypes,multiple:"",onChange:q},null,40,Ma)]),c.value?(k(),J("p",Ha,[l.value?(k(),J(Pe,{key:0},[mt(de(i(e)("import.file_size_limit_exceeded_warning_multiple_files",{files:l.value===1?"file":`${l.value} files`})),1)],64)):(k(),J(Pe,{key:1},[mt(de(i(e)("import.file_size_limit_exceeded_warning_single_file")),1)],64))])):ee("",!0),g("div",null,[_(y,{class:"w-full",label:i(e)("import.title"),disabled:!s.value||c.value,onClick:R[0]||(R[0]=w=>T("importFromFile",a.value))},null,8,["label","disabled"])])])}}});function wt(n){const o=So();return $t(o,Ua,()=>({acceptedFileTypes:n.acceptedFileTypes,caption:n.caption,onImportFromFile:n.onImportFromFile}))}const Na={class:"space-y-4"},Ba={class:"flex items-center"},Va={class:"flex flex-col ml-10"},ja=["placeholder"],Xn=re({__name:"UrlImport",props:{caption:{},fetchLogic:{type:Function}},emits:["importFromURL"],setup(n,{emit:o}){const e=ce(),t=be(),l=n,s=o,c=I(""),a=I(!1),C=I(!1);ke(c,v=>{a.value=!!v});const T=l.fetchLogic??async function(v){return await wo.get(v,{transitional:{forcedJSONParsing:!1,silentJSONParsing:!1,clarifyTimeoutError:!0}})};async function q(){C.value=!0;try{const v=await T(c.value);v.status===200&&s("importFromURL",v.data)}catch(v){t.error(e("import.failed")),console.log(v)}finally{C.value=!1}}return(v,R)=>{const E=ht,y=Te;return k(),J("div",Na,[g("p",Ba,[g("span",{class:ge(["inline-flex items-center justify-center flex-shrink-0 mr-4 border-4 rounded-full border-primary text-dividerDark",{"!text-green-500":a.value}])},[_(E,{class:"svg-icons"})],2),g("span",null,de(i(e)(v.caption)),1)]),g("p",Va,[te(g("input",{"onUpdate:modelValue":R[0]||(R[0]=w=>c.value=w),type:"url",class:"input",placeholder:`${i(e)("import.from_url")}`},null,8,ja),[[ro,c.value]])]),g("div",null,[_(y,{class:"w-full",label:i(e)("import.title"),disabled:!a.value,loading:C.value,onClick:q},null,8,["label","disabled","loading"])])])}}});function Ga(n){const o=So();return $t(o,Xn,()=>({caption:n.caption,onImportFromURL:e=>{typeof e=="string"&&n.onImportFromURL(e)}}))}const za={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ja=g("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[g("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),g("path",{d:"M14 2v6h6"})],-1),Wa=[Ja];function Ka(n,o){return k(),J("svg",za,[...Wa])}const Io={name:"lucide-file",render:Ka},Qa=(n,o)=>Je(ls,{title:n,teamID:o}),Xa=(n,o)=>Je(ss,{childTitle:n,collectionID:o}),Za=n=>Je(cs,{collectionID:n}),yn=(n,o)=>Je(is,{collectionID:n,parentCollectionID:o}),Ya=(n,o)=>Je(as,{collectionID:n,destCollID:o}),er=(n,o)=>Je(ds,{jsonString:n,teamID:o}),Co=(n,o,e)=>Je(rs,{collectionID:n,data:o,newTitle:e});function tr(n,o){return er(n,o)}const or={class:"select-wrapper"},nr={key:void 0,value:void 0,disabled:"",selected:""},lr=["value"],sr={class:"my-4"},ir=re({__name:"MyCollectionImport",emits:["importFromMyCollection"],setup(n,{emit:o}){const e=ce(),t=I(void 0),l=Z(()=>t.value!==void 0),s=He(Eo,[]),c=o,a=async()=>{if(t.value===void 0)return;const C=ps(t.value);C&&c("importFromMyCollection",C)};return(C,T)=>{const q=Te;return k(),J(Pe,null,[g("div",or,[te(g("select",{"onUpdate:modelValue":T[0]||(T[0]=v=>t.value=v),autocomplete:"off",class:"select",autofocus:""},[(k(),J("option",nr,de(i(e)("collection.select")),1)),(k(!0),J(Pe,null,Ge(i(s),(v,R)=>(k(),J("option",{key:`collection-${R}`,value:R,class:"bg-primary"},de(v.name),9,lr))),128))],512),[[us,t.value]])]),g("div",sr,[_(q,{class:"w-full",label:i(e)("import.title"),disabled:!l.value,onClick:a},null,8,["label","disabled"])])],64)}}}),ar={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},rr=g("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m-3-3h6m5 7a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"},null,-1),cr=[rr];function dr(n,o){return k(),J("svg",ar,[...cr])}const st={name:"lucide-folder-plus",render:dr},ur={width:"1.2em",height:"1.2em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},pr=g("path",{fill:"currentColor",d:"M13.527.099C6.955-.744.942 3.9.099 10.473c-.843 6.572 3.8 12.584 10.373 13.428 6.573.843 12.587-3.801 13.428-10.374C24.744 6.955 20.101.943 13.527.099zm2.471 7.485a.855.855 0 0 0-.593.25l-4.453 4.453-.307-.307-.643-.643c4.389-4.376 5.18-4.418 5.996-3.753zm-4.863 4.861 4.44-4.44a.62.62 0 1 1 .847.903l-4.699 4.125-.588-.588zm.33.694-1.1.238a.06.06 0 0 1-.067-.032.06.06 0 0 1 .01-.073l.645-.645.512.512zm-2.803-.459 1.172-1.172.879.878-1.979.426a.074.074 0 0 1-.085-.039.072.072 0 0 1 .013-.093zm-3.646 6.058a.076.076 0 0 1-.069-.083.077.077 0 0 1 .022-.046h.002l.946-.946 1.222 1.222-2.123-.147zm2.425-1.256a.228.228 0 0 0-.117.256l.203.865a.125.125 0 0 1-.211.117h-.003l-.934-.934-.294-.295 3.762-3.758 1.82-.393.874.874c-1.255 1.102-2.971 2.201-5.1 3.268zm5.279-3.428h-.002l-.839-.839 4.699-4.125a.952.952 0 0 0 .119-.127c-.148 1.345-2.029 3.245-3.977 5.091zm3.657-6.46-.003-.002a1.822 1.822 0 0 1 2.459-2.684l-1.61 1.613a.119.119 0 0 0 0 .169l1.247 1.247a1.817 1.817 0 0 1-2.093-.343zm2.578 0a1.714 1.714 0 0 1-.271.218h-.001l-1.207-1.207 1.533-1.533c.661.72.637 1.832-.054 2.522zm-.1-1.544a.143.143 0 0 0-.053.157.416.416 0 0 1-.053.45.14.14 0 0 0 .023.197.141.141 0 0 0 .084.03.14.14 0 0 0 .106-.05.691.691 0 0 0 .087-.751.138.138 0 0 0-.194-.033z"},null,-1),mr=[pr];function fr(n,o){return k(),J("svg",ur,[...mr])}const vr={name:"hopp-postman",render:fr},hr={width:"1.2em",height:"1.2em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},gr=g("path",{fill:"currentColor",d:"M12 0C5.417 0 0 5.417 0 12s5.417 12 12 12 12-5.417 12-12S18.583 0 12 0zm0 2.478c5.256 0 9.522 4.266 9.522 9.522S17.256 21.522 12 21.522 2.478 17.256 2.478 12c0-.885.12-1.741.347-2.554a4.76 4.76 0 0 0 3.925 2.066 4.764 4.764 0 0 0 4.762-4.762 4.758 4.758 0 0 0-2.067-3.925A9.526 9.526 0 0 1 12 2.478Z"},null,-1),yr=[gr];function qr(n,o){return k(),J("svg",hr,[...yr])}const _r={name:"hopp-insomnia",render:qr},Cr={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},br=g("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[g("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),g("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1),$r=[br];function xr(n,o){return k(),J("svg",Cr,[...$r])}const Ir={name:"lucide-link",render:xr},Zn=10,kr=async n=>{const o=[];for(;;){const e=await lt({query:qs,variables:{collectionID:n,cursor:o.length>0?o[o.length-1]:void 0}});if(ye(e))return ot(e.left);if(o.push(...e.right.collection.children.map(t=>t.id)),e.right.collection.children.length!==Zn)break}return nt(o)},Tr=async n=>{const o=[];for(;;){const e=await lt({query:En,variables:{collectionID:n,cursor:o.length>0?o[o.length-1].id:void 0}});if(ye(e))return ot(e.left);if(o.push(...e.right.requestsInCollection.map(t=>({id:t.id,request:oo(JSON.parse(t.request)),collectionID:n,title:t.title}))),e.right.requestsInCollection.length!==Zn)break}return nt(o)},Yn=n=>_e(gs,go("titleAndData",()=>_e(()=>lt({query:hs,variables:{collectionID:n}}),sn(o=>({title:o.collection.title,data:o.collection.data})))),go("children",()=>_e(()=>kr(n),ms(fs(wn(Yn),vs)))),go("requests",()=>()=>Tr(n)),sn(({titleAndData:o,children:e,requests:t})=>({id:n,children:e,requests:t,title:o.title,data:o.data}))),el=n=>{var e,t;const o=n.data&&n.data!=="null"?JSON.parse(n.data):{auth:{authType:"inherit",authActive:!0},headers:[]};return Do({name:n.title,folders:((e=n.children)==null?void 0:e.map(el))??[],requests:((t=n.requests)==null?void 0:t.map(l=>l.request))??[],auth:o.auth??{authType:"inherit",authActive:!0},headers:o.headers??[]})},tl=async n=>await lt({query:ys,variables:{teamID:n}}),ko=(n,o)=>{const e=new Blob([n],{type:"application/json"}),t=document.createElement("a"),l=URL.createObjectURL(e);return t.href=l,o?t.download=`${o}.json`:t.download=`${l.split("/").pop().split("#")[0].split("?")[0]}.json`,document.body.appendChild(t),t.click(),setTimeout(()=>{document.body.removeChild(t),URL.revokeObjectURL(l)},1e3),nt("state.download_started")},Rr=(n,o,e)=>_s(async()=>wo.post("https://api.github.com/gists",{files:{[o]:{content:n}}},{headers:{Authorization:`token ${e}`,Accept:"application/vnd.github.v3+json"}}),t=>t),ol=async(n,o,e="hoppscotch-collections.json")=>{if(!o)return ot("Invalid User");const t=await Rr(n,e,o)();return ye(t)?ot(t.left):nt(t.right.data.html_url)},Sr=n=>JSON.stringify(n,null,2),wr=n=>tl(n);function nl(n){const o=So();return $t(o,Xn,()=>({caption:n.caption,onImportFromURL:e=>{const l=Yt.object({files:Yt.record(Yt.object({content:Yt.string()}))}).safeParse(e);if(!l.success){n.onImportFromGist(ot("INVALID_GIST"));return}const s=Object.values(l.data.files).map(({content:c})=>c);n.onImportFromGist(nt(s))},fetchLogic:Er}))}const Er=n=>wo.get(`https://api.github.com/gists/${n.split("/").pop()}`,{headers:{Accept:"application/vnd.github.v3+json"}}),Dr=re({__name:"ImportExport",props:{collectionsType:{type:Object,default:()=>({type:"my-collections",selectedTeam:void 0}),required:!0}},emits:["hide-modal"],setup(n,{emit:o}){var ue,ne;const e=ce(),t=be(),l=n,s=He(oe.auth.getCurrentUserStream(),oe.auth.getCurrentUser()),c=He(Eo,[]),a=()=>{t.error(e("import.failed"))},C=async d=>{const b=l.collectionsType.type==="my-collections"?await T(d):await v(d);Ne(b)?(t.success(e("state.file_imported")),R("hide-modal")):t.error(e("import.failed"))},T=d=>(Cs(d),nt({success:!0}));function q(d){const b=(d.folders??[]).map(q),h={auth:d.auth,headers:d.headers},U={...d,folders:b,data:h};return d.id&&(U.id=d.id),U}const v=async d=>{if(!K.value||!X.value)return ot({success:!1});const b=d.map(U=>q(U)),h=await tr(JSON.stringify(b),X.value)();return Ne(h)?nt({success:!0}):ot({success:!1})},R=o,E=I(!1),y=I(!1),w=I(!1),P=Z(()=>l.collectionsType.type==="team-collections"),M={metadata:{id:"hopp_rest",name:"import.from_json",title:"import.from_json_description",icon:st,disabled:!1,applicableTo:["personal-workspace","team-workspace","url-import"]},component:wt({caption:"import.from_file",acceptedFileTypes:".json",onImportFromFile:async d=>{var h;const b=await vn(d)();Ne(b)?(C(b.right),(h=oe.analytics)==null||h.logEvent({type:"HOPP_IMPORT_COLLECTION",importer:"import.from_json",platform:"rest",workspaceType:P.value?"team":"personal"})):a()}})},H={metadata:{id:"hopp_my_collection",name:"import.from_my_collections",title:"import.from_my_collections_description",icon:Dt,disabled:!1,applicableTo:["team-workspace"]},component:$t("my_collection_import",ir,()=>({async onImportFromMyCollection(d){var b;C([d]),(b=oe.analytics)==null||b.logEvent({type:"HOPP_EXPORT_COLLECTION",exporter:"import_to_teams",platform:"rest"})}}))},j={metadata:{id:"hopp_openapi",name:"import.from_openapi",title:"import.from_openapi_description",icon:Io,disabled:!1,applicableTo:["personal-workspace","team-workspace","url-import"]},supported_sources:[{id:"file_import",name:"import.from_file",icon:Io,step:wt({caption:"import.from_file",acceptedFileTypes:".json, .yaml, .yml",onImportFromFile:async d=>{var h;const b=await hn(d)();Ne(b)?(C(b.right),(h=oe.analytics)==null||h.logEvent({platform:"rest",type:"HOPP_IMPORT_COLLECTION",importer:"import.from_openapi",workspaceType:P.value?"team":"personal"})):a()}})},{id:"url_import",name:"import.from_url",icon:Ir,step:Ga({caption:"import.from_url",onImportFromURL:async d=>{var h;const b=await hn([d])();Ne(b)?(C(b.right),(h=oe.analytics)==null||h.logEvent({platform:"rest",type:"HOPP_IMPORT_COLLECTION",importer:"import.from_openapi",workspaceType:P.value?"team":"personal"})):a()}})}]},A={metadata:{id:"hopp_postman",name:"import.from_postman",title:"import.from_postman_description",icon:vr,disabled:!1,applicableTo:["personal-workspace","team-workspace","url-import"]},component:wt({caption:"import.from_file",acceptedFileTypes:".json",onImportFromFile:async d=>{var h;const b=await Hi(d)();Ne(b)?(C(b.right),(h=oe.analytics)==null||h.logEvent({platform:"rest",type:"HOPP_IMPORT_COLLECTION",importer:"import.from_postman",workspaceType:P.value?"team":"personal"})):a()}})},f={metadata:{id:"hopp_insomnia",name:"import.from_insomnia",title:"import.from_insomnia_description",icon:_r,disabled:!0,applicableTo:["personal-workspace","team-workspace","url-import"]},component:wt({caption:"import.from_file",acceptedFileTypes:".json",onImportFromFile:async d=>{var h;const b=await Fi(d)();Ne(b)?(C(b.right),(h=oe.analytics)==null||h.logEvent({platform:"rest",type:"HOPP_IMPORT_COLLECTION",importer:"import.from_insomnia",workspaceType:P.value?"team":"personal"})):a()}})},F={metadata:{id:"hopp_gist",name:"import.from_gist",title:"import.from_gist_description",icon:an,disabled:!0,applicableTo:["personal-workspace","team-workspace","url-import"]},component:nl({caption:"import.from_url",onImportFromGist:async d=>{var h;if(ye(d)){a();return}const b=await vn(d.right)();Ne(b)?(C(b.right),(h=oe.analytics)==null||h.logEvent({platform:"rest",type:"HOPP_IMPORT_COLLECTION",importer:"import.from_gist",workspaceType:P.value?"team":"personal"})):a()}})},p={metadata:{id:"hopp_my_collections",name:"export.as_json",title:"action.download_file",icon:Dt,disabled:!1,applicableTo:["personal-workspace"],isLoading:E},action:()=>{var b;if(!c.value.length)return t.error(e("error.no_collections_to_export"));E.value=!0;const d=ko(Sr(c.value),"Collections");Ne(d)&&(t.success(e(d.right)),(b=oe.analytics)==null||b.logEvent({type:"HOPP_EXPORT_COLLECTION",exporter:"json",platform:"rest"})),E.value=!1}},r={metadata:{id:"hopp_team_collections",name:"export.as_json",title:"export.as_json_description",icon:Dt,disabled:!1,applicableTo:["team-workspace"],isLoading:y},action:async()=>{var d;if(y.value=!0,l.collectionsType.type==="team-collections"&&l.collectionsType.selectedTeam){const b=await wr(l.collectionsType.selectedTeam.teamID);if(Ne(b)){const{exportCollectionsToJSON:h}=b.right;if(!JSON.parse(h).length)return y.value=!1,t.error(e("error.no_collections_to_export"));ko(h,"team-collections"),(d=oe.analytics)==null||d.logEvent({type:"HOPP_EXPORT_COLLECTION",exporter:"json",platform:"rest"})}else t.error(b.left.error.toString())}y.value=!1}},$={metadata:{id:"create_secret_gist",name:"export.create_secret_gist",icon:an,disabled:s.value?((ue=s.value)==null?void 0:ue.provider)!=="github.com":!0,title:((ne=s==null?void 0:s.value)==null?void 0:ne.provider)==="github.com"?"export.create_secret_gist_tooltip_text":"export.require_github",applicableTo:["personal-workspace","team-workspace"],isLoading:w},action:async()=>{var h,U;w.value=!0;const d=await S(),b=(h=s.value)==null?void 0:h.accessToken;if(!b){t.error(e("error.something_went_wrong")),w.value=!1;return}if(Ne(d)){if(!JSON.parse(d.right).length)return w.value=!1,t.error(e("error.no_collections_to_export"));const V=await ol(d.right,b);if(ye(V)){t.error(e("export.failed"));return}t.success(e("export.secret_gist_success")),(U=oe.analytics)==null||U.logEvent({type:"HOPP_EXPORT_COLLECTION",exporter:"gist",platform:"rest"}),oe.io.openExternalLink(V.right)}w.value=!1}},D=Z(()=>{const d=[M,H,j,A,f,F],b=l.collectionsType.type==="team-collections";return d.filter(h=>b?h.metadata.applicableTo.includes("team-workspace"):h.metadata.applicableTo.includes("personal-workspace"))}),z=Z(()=>{const d=[p,r];return oe.platformFeatureFlags.exportAsGIST&&d.push($),d.filter(b=>b.metadata.applicableTo.includes(l.collectionsType.type==="my-collections"?"personal-workspace":"team-workspace"))}),K=Z(()=>{const{collectionsType:d}=l;return!(d.type==="team-collections")||!d.selectedTeam?!1:d.selectedTeam.role==="EDITOR"||d.selectedTeam.role==="OWNER"}),X=Z(()=>{var b;const{collectionsType:d}=l;return d.type==="team-collections"?(b=d.selectedTeam)==null?void 0:b.teamID:void 0}),S=async()=>{var d,b;if(l.collectionsType.type==="team-collections"&&((d=l.collectionsType.selectedTeam)!=null&&d.teamID)){const h=await tl((b=l.collectionsType.selectedTeam)==null?void 0:b.teamID);return Ne(h)?nt(h.right.exportCollectionsToJSON):ot(h.left)}return l.collectionsType.type==="my-collections"?nt(JSON.stringify(c.value,null,2)):ot("INVALID_SELECTED_TEAM_OR_INVALID_COLLECTION_TYPE")};return(d,b)=>{const h=Qn;return k(),B(h,{ref:"collections-import-export","modal-title":"modal.collections","importer-modules":D.value,"exporter-modules":z.value,onHideModal:b[0]||(b[0]=U=>R("hide-modal"))},null,8,["importer-modules","exporter-modules"])}}}),Pr={class:"flex space-x-2"},Ar=re({__name:"EditRequest",props:{show:{type:Boolean,default:!1},loadingState:{type:Boolean,default:!1},modelValue:{default:""}},emits:["submit","hide-modal","update:modelValue"],setup(n,{emit:o}){const e=be(),t=ce(),l=n,s=o,c=Rn(l,"modelValue"),a=()=>{if(c.value.trim()===""){e.error(t("request.invalid_name"));return}s("submit",c.value)},C=()=>{c.value="",s("hide-modal")};return(T,q)=>{const v=ze,R=Te,E=qe,y=Oe;return T.show?(k(),B(y,{key:0,dialog:"",title:i(t)("modal.edit_request"),onClose:C},{body:W(()=>[_(v,{modelValue:i(c),"onUpdate:modelValue":q[0]||(q[0]=w=>Sn(c)?c.value=w:null),placeholder:" ",label:i(t)("action.label"),"input-styles":"floating-input",onSubmit:a},null,8,["modelValue","label"])]),footer:W(()=>[g("span",Pr,[_(R,{label:i(t)("action.save"),loading:T.loadingState,outline:"",onClick:a},null,8,["label","loading"]),_(E,{label:i(t)("action.cancel"),outline:"",filled:"",onClick:C},null,8,["label"])])]),_:1},8,["title"])):ee("",!0)}}}),Or={class:"flex space-x-2"},Lr=re({__name:"EditFolder",props:{show:{type:Boolean,default:!1},loadingState:{type:Boolean,default:!1},editingFolderName:{default:""}},emits:["submit","hide-modal"],setup(n,{emit:o}){const e=ce(),t=be(),l=n,s=o,c=I("");ke(()=>l.editingFolderName,T=>{c.value=T});const a=()=>{if(c.value.trim()===""){t.error(e("folder.invalid_name"));return}s("submit",c.value)},C=()=>{c.value="",s("hide-modal")};return(T,q)=>{const v=ze,R=Te,E=qe,y=Oe;return T.show?(k(),B(y,{key:0,dialog:"",title:i(e)("folder.edit"),onClose:q[1]||(q[1]=w=>s("hide-modal"))},{body:W(()=>[_(v,{modelValue:c.value,"onUpdate:modelValue":q[0]||(q[0]=w=>c.value=w),placeholder:" ",label:i(e)("action.label"),"input-styles":"floating-input",onSubmit:a},null,8,["modelValue","label"])]),footer:W(()=>[g("span",Or,[_(R,{label:i(e)("action.save"),loading:T.loadingState,outline:"",onClick:a},null,8,["label","loading"]),_(E,{label:i(e)("action.cancel"),outline:"",filled:"",onClick:C},null,8,["label"])])]),_:1},8,["title"])):ee("",!0)}}}),Mr={class:"flex space-x-2"},Hr=re({__name:"Edit",props:{show:{type:Boolean,default:!1},loadingState:{type:Boolean,default:!1},editingCollectionName:{default:""}},emits:["submit","hide-modal"],setup(n,{emit:o}){const e=ce(),t=be(),l=n,s=o,c=I("");ke(()=>l.editingCollectionName,T=>{c.value=T});const a=()=>{if(c.value.trim()===""){t.error(e("collection.invalid_name"));return}s("submit",c.value)},C=()=>{c.value="",s("hide-modal")};return(T,q)=>{const v=ze,R=Te,E=qe,y=Oe;return T.show?(k(),B(y,{key:0,dialog:"",title:i(e)("collection.edit"),onClose:C},{body:W(()=>[_(v,{modelValue:c.value,"onUpdate:modelValue":q[0]||(q[0]=w=>c.value=w),placeholder:" ","input-styles":"floating-input",label:i(e)("action.label"),onSubmit:a},null,8,["modelValue","label"])]),footer:W(()=>[g("span",Mr,[_(R,{label:i(e)("action.save"),loading:T.loadingState,outline:"",onClick:a},null,8,["label","loading"]),_(E,{label:i(e)("action.cancel"),outline:"",filled:"",onClick:C},null,8,["label"])])]),_:1},8,["title"])):ee("",!0)}}}),Fr={class:"flex space-x-2"},Ur=re({__name:"AddFolder",props:{show:{type:Boolean,default:!1},loadingState:{type:Boolean,default:!1}},emits:["hide-modal","add-folder"],setup(n,{emit:o}){const e=be(),t=ce(),l=n,s=o,c=I("");ke(()=>l.show,T=>{T||(c.value="")});const a=()=>{if(c.value.trim()===""){e.error(t("folder.invalid_name"));return}s("add-folder",c.value)},C=()=>{c.value="",s("hide-modal")};return(T,q)=>{const v=ze,R=Te,E=qe,y=Oe;return T.show?(k(),B(y,{key:0,dialog:"",title:i(t)("folder.new"),onClose:q[1]||(q[1]=w=>s("hide-modal"))},{body:W(()=>[_(v,{modelValue:c.value,"onUpdate:modelValue":q[0]||(q[0]=w=>c.value=w),placeholder:" ","input-styles":"floating-input",label:i(t)("action.label"),onSubmit:a},null,8,["modelValue","label"])]),footer:W(()=>[g("span",Fr,[_(R,{label:i(t)("action.save"),loading:T.loadingState,outline:"",onClick:a},null,8,["label","loading"]),_(E,{label:i(t)("action.cancel"),outline:"",filled:"",onClick:C},null,8,["label"])])]),_:1},8,["title"])):ee("",!0)}}}),Nr={class:"flex space-x-2"},Br=re({__name:"AddRequest",props:{show:{type:Boolean,default:!1},loadingState:{type:Boolean,default:!1}},emits:["hide-modal","add-request"],setup(n,{emit:o}){const e=be(),t=ce(),l=n,s=o,c=I(""),a=Se(We);ke(()=>l.show,q=>{q&&(c.value=a.currentActiveTab.value.document.request.name)});const C=()=>{if(c.value.trim()===""){e.error(`${t("error.empty_req_name")}`);return}s("add-request",c.value)},T=()=>{s("hide-modal")};return(q,v)=>{const R=ze,E=Te,y=qe,w=Oe;return q.show?(k(),B(w,{key:0,dialog:"",title:i(t)("request.new"),onClose:v[1]||(v[1]=P=>q.$emit("hide-modal"))},{body:W(()=>[_(R,{modelValue:c.value,"onUpdate:modelValue":v[0]||(v[0]=P=>c.value=P),placeholder:" ",label:i(t)("action.label"),"input-styles":"floating-input",onSubmit:C},null,8,["modelValue","label"])]),footer:W(()=>[g("span",Nr,[_(E,{label:i(t)("action.save"),loading:q.loadingState,outline:"",onClick:C},null,8,["label","loading"]),_(y,{label:i(t)("action.cancel"),outline:"",filled:"",onClick:T},null,8,["label"])])]),_:1},8,["title"])):ee("",!0)}}}),Vr={class:"flex space-x-2"},jr=re({__name:"Add",props:{show:{type:Boolean,default:!1},loadingState:{type:Boolean,default:!1}},emits:["submit","hide-modal"],setup(n,{emit:o}){const e=be(),t=ce(),l=n,s=o,c=I("");ke(()=>l.show,T=>{T||(c.value="")});const a=()=>{if(!c.value){e.error(t("collection.invalid_name"));return}s("submit",c.value)},C=()=>{c.value="",s("hide-modal")};return(T,q)=>{const v=ze,R=Te,E=qe,y=Oe;return T.show?(k(),B(y,{key:0,dialog:"",title:i(t)("collection.new"),onClose:C},{body:W(()=>[_(v,{modelValue:c.value,"onUpdate:modelValue":q[0]||(q[0]=w=>c.value=w),placeholder:" ",label:i(t)("action.label"),"input-styles":"floating-input",onSubmit:a},null,8,["modelValue","label"])]),footer:W(()=>[g("span",Vr,[_(R,{label:i(t)("action.save"),loading:T.loadingState,outline:"",onClick:a},null,8,["label","loading"]),_(E,{label:i(t)("action.cancel"),outline:"",filled:"",onClick:C},null,8,["label"])])]),_:1},8,["title"])):ee("",!0)}}}),Gr={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},zr=g("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[g("path",{d:"M16 12H3m13-6H3m7 12H3M21 6v10a2 2 0 0 1-2 2h-5"}),g("path",{d:"m16 16l-2 2l2 2"})],-1),Jr=[zr];function Wr(n,o){return k(),J("svg",Gr,[...Jr])}const Kr={name:"lucide-list-end",render:Wr},Qr={currentReorderingItem:{type:"collection",id:"",parentID:""}},Xr=Is({changeCurrentReorderStatus(n,{reorderItem:o}){return{currentReorderingItem:o}}}),ll=new bs(Qr,Xr),Ao=ll.subject$.pipe($s("currentReorderingItem"),xs());function sl(n){ll.dispatch({dispatcher:"changeCurrentReorderStatus",payload:{reorderItem:n}})}const Zr={class:"flex flex-col"},Yr=["draggable"],ec={key:2,class:"truncate text-tiny font-semibold"},tc={class:"pointer-events-none flex min-w-0 flex-1 items-center py-2 pr-2 transition group-hover:text-secondaryDark"},oc=["title"],nc=g("span",{class:"absolute inline-flex h-full w-full flex-shrink-0 animate-ping rounded-full bg-green-500 opacity-75"},null,-1),lc=g("span",{class:"relative inline-flex h-1.5 w-1.5 flex-shrink-0 rounded-full bg-green-500"},null,-1),sc=[nc,lc],ic={key:0,class:"flex"},ac=["onKeyup"],il=re({__name:"Request",props:{request:{type:Object,default:()=>({}),required:!0},requestID:{type:String,default:"",required:!1},parentID:{type:String,default:null,required:!0},collectionsType:{type:String,default:"my-collections",required:!0},duplicateLoading:{type:Boolean,default:!1,required:!1},saveRequest:{type:Boolean,default:!1,required:!1},isActive:{type:Boolean,default:!1,required:!1},hasNoTeamAccess:{type:Boolean,default:!1,required:!1},isSelected:{type:Boolean,default:!1,required:!1},requestMoveLoading:{type:Array,default:()=>[],required:!1},isLastItem:{type:Boolean,default:!1,required:!1}},emits:["edit-request","duplicate-request","remove-request","select-request","share-request","drag-request","update-request-order","update-last-request-order"],setup(n,{emit:o}){const e=ce(),t=n,l=o,s=I(null),c=I(null),a=I(null),C=I(null),T=I(null),q=I(null),v=I(!1),R=I(!1),E=I(!1),y=He(Ao,{type:"collection",id:"",parentID:""});ke(()=>t.duplicateLoading,K=>{K||C.value.tippy.hide()});const w=()=>{l("select-request")},P=({dataTransfer:K})=>{K&&(l("drag-request",K),v.value=!v.value,sl({type:"request",id:t.requestID,parentID:t.parentID}))},M=Z(()=>y.value.id===t.requestID),H=Z(()=>y.value.type==="collection"),j=Z(()=>y.value.parentID===t.parentID),A=Z(()=>R.value&&!H.value&&j.value&&!M.value),f=Z(()=>E.value&&j.value&&!H.value),F=K=>{v.value=!0,K.offsetY<10?(R.value=!0,v.value=!1,E.value=!1):K.offsetY>18?(E.value=!0,v.value=!1,R.value=!1):(R.value=!1,E.value=!1)},p=K=>{R.value?r(K):E.value?$(K):r(K)},r=K=>{K.dataTransfer&&(K.stopPropagation(),z(),l("update-request-order",K.dataTransfer))},$=K=>{K.dataTransfer&&(K.stopPropagation(),z(),l("update-last-request-order",K.dataTransfer))},D=Z(()=>t.requestMoveLoading.length>0&&t.requestID?t.requestMoveLoading.includes(t.requestID):!1),z=()=>{v.value=!1,R.value=!1,E.value=!1};return(K,X)=>{const S=Dn,ue=qe,ne=ct,d=rt("tippy"),b=Be("tippy");return k(),J("div",Zr,[g("div",{class:ge(["h-1 w-full transition",[{"bg-accentDark":A.value}]]),onDrop:r,onDragover:X[0]||(X[0]=Re(h=>R.value=!0,["prevent"])),onDragleave:z,onDragend:z},null,34),g("div",{class:"group flex items-stretch",draggable:!n.hasNoTeamAccess,onDrop:p,onDragstart:P,onDragover:X[7]||(X[7]=h=>F(h)),onDragleave:z,onDragend:z,onContextmenu:X[8]||(X[8]=Re(h=>{var U;return(U=C.value)==null?void 0:U.tippy.show()},["prevent"]))},[g("div",{class:"pointer-events-auto flex min-w-0 flex-1 cursor-pointer items-center justify-center",onClick:X[1]||(X[1]=h=>w())},[g("span",{class:"pointer-events-none flex w-16 items-center justify-center truncate px-2",style:Mt({color:i(ks)(n.request)})},[n.isSelected?(k(),B(vt(i(ht)),{key:0,class:ge(["svg-icons",{"text-accent":n.isSelected}])},null,8,["class"])):D.value?(k(),B(S,{key:1})):(k(),J("span",ec,de(n.request.method),1))],4),g("span",tc,[g("span",{class:ge(["truncate",{"text-accent":n.isSelected}])},de(n.request.name),3),n.isActive?te((k(),J("span",{key:0,class:"relative mx-3 flex h-1.5 w-1.5 flex-shrink-0",title:`${i(e)("collection.request_in_use")}`},sc,8,oc)),[[b,{theme:"tooltip"}]]):ee("",!0)])]),n.hasNoTeamAccess?ee("",!0):(k(),J("div",ic,[n.saveRequest?ee("",!0):te((k(),B(ue,{key:0,icon:i(Ts),title:i(e)("action.restore"),class:"hidden group-hover:inline-flex",onClick:X[2]||(X[2]=h=>w())},null,8,["icon","title"])),[[b,{theme:"tooltip"}]]),g("span",null,[_(d,{ref_key:"options",ref:C,interactive:"",trigger:"click",theme:"popover","on-shown":()=>s.value.focus()},{content:W(({hide:h})=>[g("div",{ref_key:"tippyActions",ref:s,class:"flex flex-col focus:outline-none",tabindex:"0",onKeyup:[X[3]||(X[3]=ve(U=>{var V;return(V=c.value)==null?void 0:V.$el.click()},["e"])),X[4]||(X[4]=ve(U=>{var V;return(V=T.value)==null?void 0:V.$el.click()},["d"])),X[5]||(X[5]=ve(U=>{var V;return(V=a.value)==null?void 0:V.$el.click()},["delete"])),X[6]||(X[6]=ve(U=>{var V;return(V=q.value)==null?void 0:V.$el.click()},["s"])),ve(U=>h(),["escape"])]},[_(ne,{ref_key:"edit",ref:c,icon:i(Ht),label:i(e)("action.edit"),shortcut:["E"],onClick:()=>{l("edit-request"),h()}},null,8,["icon","label","onClick"]),_(ne,{ref_key:"duplicate",ref:T,icon:i(ao),label:i(e)("action.duplicate"),loading:n.duplicateLoading,shortcut:["D"],onClick:()=>{l("duplicate-request"),n.collectionsType==="my-collections"&&h()}},null,8,["icon","label","loading","onClick"]),_(ne,{ref_key:"deleteAction",ref:a,icon:i(xt),label:i(e)("action.delete"),shortcut:["⌫"],onClick:()=>{l("remove-request"),h()}},null,8,["icon","label","onClick"]),_(ne,{ref_key:"shareAction",ref:q,icon:i(Rs),label:i(e)("action.share"),shortcut:["S"],onClick:()=>{l("share-request"),h()}},null,8,["icon","label","onClick"])],40,ac)]),default:W(()=>[te(_(ue,{title:i(e)("action.more"),icon:i(Ft)},null,8,["title","icon"]),[[b,{theme:"tooltip"}]])]),_:1},8,["on-shown"])])]))],40,Yr),g("div",{class:ge(["w-full transition",[{"bg-accentDark":f.value,"h-1 ":n.isLastItem}]]),onDrop:p,onDragover:X[9]||(X[9]=Re(h=>E.value=!0,["prevent"])),onDragleave:z,onDragend:z},null,34)])}}}),rc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},cc=g("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m6 14l1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"},null,-1),dc=[cc];function uc(n,o){return k(),J("svg",rc,[...dc])}const Oo={name:"lucide-folder-open",render:uc},pc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},mc=g("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[g("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),g("path",{d:"m9 8l6 4l-6 4Z"})],-1),fc=[mc];function vc(n,o){return k(),J("svg",pc,[...fc])}const qn={name:"lucide-play-square",render:vc},hc={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},gc=g("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[g("path",{d:"M20 7h-9m3 10H5"}),g("circle",{cx:"17",cy:"17",r:"3"}),g("circle",{cx:"7",cy:"7",r:"3"})],-1),yc=[gc];function qc(n,o){return k(),J("svg",hc,[...yc])}const Lo={name:"lucide-settings-2",render:qc},_c={class:"flex flex-col"},Cc={class:"relative flex flex-col"},bc=["draggable"],$c={class:"pointer-events-none flex items-center justify-center px-4"},xc={class:"pointer-events-none flex min-w-0 flex-1 py-2 pr-2 transition group-hover:text-secondaryDark"},Ic={key:0,class:"flex"},kc=["onKeyup"],al=re({__name:"Collection",props:{id:{default:""},parentID:{default:null},data:{},collectionsType:{default:"my-collections"},folderType:{default:"collection"},isOpen:{type:Boolean,default:!1},isSelected:{type:[Boolean,null],default:!1},exportLoading:{type:Boolean,default:!1},hasNoTeamAccess:{type:Boolean,default:!1},collectionMoveLoading:{},isLastItem:{type:Boolean,default:!1}},emits:["toggle-children","add-request","add-folder","edit-collection","edit-properties","export-data","remove-collection","drop-event","drag-event","dragging","update-collection-order","update-last-collection-order","run-collection"],setup(n,{emit:o}){const e=ce(),t=n,l=o,s=I(null),c=I(null),a=I(null),C=I(null),T=I(null),q=I(null),v=I(null),R=I(null),E=I(null),y=I(!1),w=I(!1),P=I(!1),M=I(""),H=He(Ao,{type:"collection",id:"",parentID:""});ke(()=>y.value,h=>{h&&ne.value&&f.value?l("dragging",!0):l("dragging",!1)});const j=Z(()=>{if(t.isSelected)return ht;if(t.isOpen){if(t.isOpen)return Oo}else return qt;return qt}),A=Z(()=>t.data.name?t.data.name:t.data.title);ke(()=>t.exportLoading,h=>{var U;h||(U=v.value.tippy)==null||U.hide()});const f=Z(()=>H.value.parentID!==t.id),F=Z(()=>H.value.type==="request"),p=Z(()=>H.value.parentID===t.parentID),r=Z(()=>w.value&&ne.value&&!F.value&&p.value),$=Z(()=>P.value&&ne.value&&!F.value&&p.value),D=({dataTransfer:h})=>{h&&(l("drag-event",h),M.value=h.getData("collectionIndex"),y.value=!y.value,sl({type:"collection",id:t.id,parentID:t.parentID}))},z=h=>{y.value=!0,h.offsetY<10&&ne.value&&!F.value&&p.value?(w.value=!0,y.value=!1,P.value=!1):h.offsetY>18&&ne.value&&!F.value&&p.value&&t.isLastItem?(P.value=!0,y.value=!1,w.value=!1):(w.value=!1,P.value=!1)},K=h=>{w.value?S(h):P.value?ue(h):f.value?X(h):h.stopPropagation()},X=h=>{h.dataTransfer&&(h.stopPropagation(),l("drop-event",h.dataTransfer),b())},S=h=>{h.dataTransfer&&(h.stopPropagation(),l("update-collection-order",h.dataTransfer),b())},ue=h=>{h.dataTransfer&&(h.stopPropagation(),l("update-last-collection-order",h.dataTransfer),b())},ne=Z(()=>M.value!==t.id),d=Z(()=>{const{collectionMoveLoading:h}=t;return h&&h.length>0&&t.data.id?h.includes(t.data.id):!1}),b=()=>{y.value=!1,w.value=!1,P.value=!1};return(h,U)=>{const V=Dn,we=qe,Fe=ct,Ke=rt("tippy"),it=Be("tippy");return k(),J("div",_c,[g("div",{class:ge(["h-1 w-full transition",[{"bg-accentDark":r.value}]]),onDrop:S,onDragover:U[0]||(U[0]=Re(Ce=>w.value=!0,["prevent"])),onDragleave:U[1]||(U[1]=Ce=>w.value=!1),onDragend:b},null,34),g("div",Cc,[g("div",{class:ge(["z-[1] pointer-events-none absolute inset-0 bg-accent opacity-0 transition",{"opacity-25":y.value&&ne.value&&f.value}])},null,2),g("div",{class:"z-[3] group pointer-events-auto relative flex cursor-pointer items-stretch",draggable:!h.hasNoTeamAccess,onDragstart:D,onDrop:U[13]||(U[13]=Ce=>K(Ce)),onDragover:U[14]||(U[14]=Ce=>z(Ce)),onDragleave:b,onDragend:U[15]||(U[15]=()=>{b(),M.value=""}),onContextmenu:U[16]||(U[16]=Re(Ce=>{var Ue,fe;return(fe=(Ue=v.value)==null?void 0:Ue.tippy)==null?void 0:fe.show()},["prevent"]))},[g("div",{class:"flex min-w-0 flex-1 items-center justify-center",onClick:U[2]||(U[2]=Ce=>l("toggle-children"))},[g("span",$c,[d.value?(k(),B(V,{key:0})):(k(),B(vt(j.value),{key:1,class:ge(["svg-icons",{"text-accent":h.isSelected}])},null,8,["class"]))]),g("span",xc,[g("span",{class:ge(["truncate",{"text-accent":h.isSelected}])},de(A.value),3)])]),h.hasNoTeamAccess?ee("",!0):(k(),J("div",Ic,[te(_(we,{icon:i(bt),title:i(e)("request.new"),class:"hidden group-hover:inline-flex",onClick:U[3]||(U[3]=Ce=>l("add-request"))},null,8,["icon","title"]),[[it,{theme:"tooltip"}]]),te(_(we,{icon:i(st),title:i(e)("folder.new"),class:"hidden group-hover:inline-flex",onClick:U[4]||(U[4]=Ce=>l("add-folder"))},null,8,["icon","title"]),[[it,{theme:"tooltip"}]]),h.collectionsType==="team-collections"?te((k(),B(we,{key:0,icon:i(qn),title:i(e)("collection_runner.run_collection"),class:"hidden group-hover:inline-flex",onClick:U[5]||(U[5]=Ce=>l("run-collection",t.id))},null,8,["icon","title"])),[[it,{theme:"tooltip"}]]):ee("",!0),g("span",null,[_(Ke,{ref_key:"options",ref:v,interactive:"",trigger:"click",theme:"popover","on-shown":()=>s.value.focus()},{content:W(({hide:Ce})=>[g("div",{ref_key:"tippyActions",ref:s,class:"flex flex-col focus:outline-none",tabindex:"0",onKeyup:[U[6]||(U[6]=ve(Ue=>{var fe;return(fe=c.value)==null?void 0:fe.$el.click()},["r"])),U[7]||(U[7]=ve(Ue=>{var fe;return(fe=a.value)==null?void 0:fe.$el.click()},["n"])),U[8]||(U[8]=ve(Ue=>{var fe;return(fe=C.value)==null?void 0:fe.$el.click()},["e"])),U[9]||(U[9]=ve(Ue=>{var fe;return(fe=T.value)==null?void 0:fe.$el.click()},["delete"])),U[10]||(U[10]=ve(Ue=>{var fe;return(fe=q.value)==null?void 0:fe.$el.click()},["x"])),U[11]||(U[11]=ve(Ue=>{var fe;return(fe=R.value)==null?void 0:fe.$el.click()},["p"])),U[12]||(U[12]=ve(Ue=>{var fe;return(fe=E.value)==null?void 0:fe.$el.click()},["t"])),ve(Ue=>Ce(),["escape"])]},[_(Fe,{ref_key:"requestAction",ref:c,icon:i(bt),label:i(e)("request.new"),shortcut:["R"],onClick:()=>{l("add-request"),Ce()}},null,8,["icon","label","onClick"]),_(Fe,{ref_key:"folderAction",ref:a,icon:i(st),label:i(e)("folder.new"),shortcut:["N"],onClick:()=>{l("add-folder"),Ce()}},null,8,["icon","label","onClick"]),_(Fe,{ref_key:"edit",ref:C,icon:i(Ht),label:i(e)("action.edit"),shortcut:["E"],onClick:()=>{l("edit-collection"),Ce()}},null,8,["icon","label","onClick"]),_(Fe,{ref_key:"exportAction",ref:q,icon:i(Ss),label:i(e)("export.title"),shortcut:["X"],loading:h.exportLoading,onClick:()=>{l("export-data"),h.collectionsType==="my-collections"&&Ce()}},null,8,["icon","label","loading","onClick"]),_(Fe,{ref_key:"deleteAction",ref:T,icon:i(xt),label:i(e)("action.delete"),shortcut:["⌫"],onClick:()=>{l("remove-collection"),Ce()}},null,8,["icon","label","onClick"]),_(Fe,{ref_key:"propertiesAction",ref:R,icon:i(Lo),label:i(e)("action.properties"),shortcut:["P"],onClick:()=>{l("edit-properties"),Ce()}},null,8,["icon","label","onClick"]),h.collectionsType==="team-collections"?(k(),B(Fe,{key:0,ref_key:"runCollectionAction",ref:E,icon:i(qn),label:i(e)("collection_runner.run_collection"),shortcut:["T"],onClick:()=>{l("run-collection",t.id),Ce()}},null,8,["icon","label","onClick"])):ee("",!0)],40,kc)]),default:W(()=>[te(_(we,{title:i(e)("action.more"),icon:i(Ft)},null,8,["title","icon"]),[[it,{theme:"tooltip"}]])]),_:1},8,["on-shown"])])]))],40,bc)]),h.isLastItem?(k(),J("div",{key:0,class:ge(["w-full transition",[{"bg-accentDark":$.value,"h-1 ":h.isLastItem}]]),onDrop:ue,onDragover:U[17]||(U[17]=Re(Ce=>P.value=!0,["prevent"])),onDragleave:U[18]||(U[18]=Ce=>P.value=!1),onDragend:b},null,34)):ee("",!0)])}}}),Tc={class:"flex flex-1 flex-col"},Rc={class:"flex"},Sc={class:"flex flex-col overflow-hidden"},wc={class:"flex flex-col items-center space-y-4"},Ec={class:"text-center text-secondaryLight"},Dc={class:"flex flex-col items-stretch gap-4"},Pc=re({__name:"TeamCollections",props:{collectionsType:{type:Object,default:()=>({type:"my-collections",selectedTeam:void 0}),required:!0},filterText:{type:String,default:"",required:!0},teamCollectionList:{type:Array,default:()=>[],required:!0},teamLoadingCollections:{type:Array,default:()=>[],required:!0},saveRequest:{type:Boolean,default:!1,required:!1},exportLoading:{type:Boolean,default:!1,required:!1},duplicateLoading:{type:Boolean,default:!1,required:!1},picked:{type:Object,default:null,required:!1},collectionMoveLoading:{type:Array,default:()=>[],required:!1},requestMoveLoading:{type:Array,default:()=>[],required:!1}},emits:["add-request","add-folder","edit-collection","edit-folder","edit-properties","edit-request","duplicate-request","export-data","remove-collection","remove-folder","remove-request","select-request","share-request","drop-request","drop-collection","update-request-order","update-collection-order","collection-click","select","expand-team-collection","display-modal-add","display-modal-import-export","run-collection"],setup(n,{emit:o}){const e=ce(),t=It(),l=Se(We),s=n,c=Z(()=>s.filterText.length>0),a=o,C=p=>{const r=p.split("/");return r.pop(),r.join("/")},T=p=>{const{collectionID:r,isOpen:$}=p;a("collection-click",{collectionID:r,isOpen:$})},q=Pn(s,"teamCollectionList"),v=Z(()=>s.collectionsType.type==="team-collections"&&(s.collectionsType.selectedTeam===void 0||s.collectionsType.selectedTeam.role==="VIEWER")),R=({collectionID:p,folderID:r,requestID:$})=>p!==void 0?s.picked&&s.picked.pickedType==="teams-collection"&&s.picked.collectionID===p:$!==void 0?s.picked&&s.picked.pickedType==="teams-request"&&s.picked.requestID===$:s.picked&&s.picked.pickedType==="teams-folder"&&s.picked.folderID===r,E=Z(()=>l.currentActiveTab.value.document.saveContext),y=p=>_e(E.value,Ln,On(r=>r.originLocation==="team-collection"&&r.requestID===p),An),w=p=>{const{request:r,requestIndex:$}=p;s.saveRequest?a("select",{pickedType:"teams-request",requestID:$}):a("select-request",{request:r,requestIndex:$,isActive:y($),folderPath:p.folderPath})},P=(p,{folderPath:r,requestIndex:$})=>{r&&(p.setData("folderPath",r),p.setData("requestIndex",$))},M=(p,r)=>{p.setData("collectionIndex",r)},H=(p,r)=>{const $=p.getData("folderPath"),D=p.getData("requestIndex"),z=p.getData("collectionIndex");$&&D?a("drop-request",{folderPath:$,requestIndex:D,destinationCollectionIndex:r}):a("drop-collection",{collectionIndexDragged:z,destinationCollectionIndex:r})},j=(p,{folderPath:r,requestIndex:$})=>{if(!r)return;const D=p.getData("requestIndex");a("update-request-order",{dragedRequestIndex:D,destinationRequestIndex:$,destinationCollectionIndex:r})},A=(p,r)=>{const $=p.getData("collectionIndex");a("update-collection-order",{dragedCollectionIndex:$,destinationCollection:r})};class f{constructor(r){this.data=r}findCollInTree(r,$){for(const D of r){if(D.id===$)return D;if(D.children){const z=this.findCollInTree(D.children,$);if(z)return z}}return null}getChildren(r){return Z(()=>{if(r===null){if(s.teamLoadingCollections.includes("root"))return{status:"loading"};const z=this.data.value.map((K,X)=>({id:K.id,data:{isLastItem:X===this.data.value.length-1,type:"collections",data:{parentIndex:null,data:K}}}));return{status:"loaded",data:Xe(z)}}const $=r.split("/")[r.split("/").length-1];if(!s.teamLoadingCollections.includes($)&&a("expand-team-collection",$),s.teamLoadingCollections.includes($))return{status:"loading"};const D=this.findCollInTree(this.data.value,$);if(D){const z=[...D.children?D.children.map((K,X)=>({id:`${r}/${K.id}`,data:{isLastItem:D.children&&D.children.length>1?X===D.children.length-1:!1,type:"folders",data:{parentIndex:$,data:K}}})):[],...D.requests?D.requests.map((K,X)=>({id:`${r}/${K.id}`,data:{isLastItem:D.requests&&D.requests.length>1?X===D.requests.length-1:!1,type:"requests",data:{parentIndex:$,data:K}}})):[]];return{status:"loaded",data:Xe(z)}}return{status:"loaded",data:[]}})}}const F=new f(q);return(p,r)=>{const $=qe,D=al,z=il,K=co,X=kt,S=Te,ue=Mn,ne=Be("tippy");return k(),J("div",Tc,[g("div",{class:"sticky z-10 flex flex-1 justify-between border-b border-dividerLight bg-primary",style:Mt(n.saveRequest?"top: calc(var(--upper-primary-sticky-fold) - var(--line-height-body))":"top: var(--upper-primary-sticky-fold)")},[v.value||c.value?te((k(),B($,{key:0,disabled:"",class:"!rounded-none",icon:i(ft),title:i(e)("team.no_access"),label:i(e)("action.new")},null,8,["icon","title","label"])),[[ne,{theme:"tooltip"}]]):(k(),B($,{key:1,icon:i(ft),label:i(e)("action.new"),class:"!rounded-none",onClick:r[0]||(r[0]=d=>a("display-modal-add"))},null,8,["icon","label"])),g("span",Rc,[te(_($,{to:"https://docs.hoppscotch.io/documentation/features/collections",blank:"",title:i(e)("app.wiki"),icon:i(Lt)},null,8,["title","icon"]),[[ne,{theme:"tooltip"}]]),n.saveRequest?ee("",!0):te((k(),B($,{key:0,disabled:n.collectionsType.type==="team-collections"&&n.collectionsType.selectedTeam===void 0||c.value,icon:i(_t),title:i(e)("modal.import_export"),onClick:r[1]||(r[1]=d=>a("display-modal-import-export"))},null,8,["disabled","icon","title"])),[[ne,{theme:"tooltip"}]])])],4),g("div",Sc,[_(ue,{adapter:i(F)},{content:W(({node:d,toggleChildren:b,isOpen:h,highlightChildren:U})=>[d.data.type==="collections"?(k(),B(D,{key:0,id:d.data.data.data.id,"parent-i-d":d.data.data.parentIndex,data:d.data.data.data,"collections-type":n.collectionsType.type,"is-open":h,"export-loading":n.exportLoading,"has-no-team-access":v.value||c.value,"collection-move-loading":n.collectionMoveLoading,"is-last-item":d.data.isLastItem,"is-selected":R({collectionID:d.id}),"folder-type":"collection",onAddRequest:V=>d.data.type==="collections"&&a("add-request",{path:d.id,folder:d.data.data.data}),onAddFolder:V=>d.data.type==="collections"&&a("add-folder",{path:d.id,folder:d.data.data.data}),onEditCollection:V=>d.data.type==="collections"&&a("edit-collection",{collectionIndex:d.id,collection:d.data.data.data}),onEditProperties:V=>d.data.type==="collections"&&a("edit-properties",{collectionIndex:d.id,collection:d.data.data.data}),onExportData:V=>d.data.type==="collections"&&a("export-data",d.data.data.data),onRemoveCollection:V=>a("remove-collection",d.id),onDropEvent:V=>H(V,d.id),onDragEvent:V=>M(V,d.id),onUpdateCollectionOrder:V=>A(V,{destinationCollectionIndex:d.data.data.data.id,destinationCollectionParentIndex:d.data.data.parentIndex}),onUpdateLastCollectionOrder:V=>A(V,{destinationCollectionIndex:null,destinationCollectionParentIndex:d.data.data.parentIndex}),onDragging:V=>U(V?d.data.data.data.id:null),onToggleChildren:()=>{b(),n.saveRequest&&a("select",{pickedType:"teams-collection",collectionID:d.id})},onRunCollection:r[2]||(r[2]=V=>a("run-collection",V)),onClick:()=>{T({collectionID:d.id,isOpen:h})}},null,8,["id","parent-i-d","data","collections-type","is-open","export-loading","has-no-team-access","collection-move-loading","is-last-item","is-selected","onAddRequest","onAddFolder","onEditCollection","onEditProperties","onExportData","onRemoveCollection","onDropEvent","onDragEvent","onUpdateCollectionOrder","onUpdateLastCollectionOrder","onDragging","onToggleChildren","onClick"])):ee("",!0),d.data.type==="folders"?(k(),B(D,{key:1,id:d.data.data.data.id,"parent-i-d":d.data.data.parentIndex,data:d.data.data.data,"collections-type":n.collectionsType.type,"is-open":h,"export-loading":n.exportLoading,"has-no-team-access":v.value||c.value,"collection-move-loading":n.collectionMoveLoading,"is-last-item":d.data.isLastItem,"is-selected":R({folderID:d.data.data.data.id}),"folder-type":"folder",onAddRequest:V=>d.data.type==="folders"&&a("add-request",{path:d.id,folder:d.data.data.data}),onAddFolder:V=>d.data.type==="folders"&&a("add-folder",{path:d.id,folder:d.data.data.data}),onEditCollection:V=>d.data.type==="folders"&&a("edit-folder",{folder:d.data.data.data}),onEditProperties:V=>d.data.type==="folders"&&a("edit-properties",{collectionIndex:d.id,collection:d.data.data.data}),onExportData:V=>d.data.type==="folders"&&a("export-data",d.data.data.data),onRemoveCollection:V=>d.data.type==="folders"&&a("remove-folder",d.data.data.data.id),onDropEvent:V=>H(V,d.data.data.data.id),onDragEvent:V=>M(V,d.data.data.data.id),onUpdateCollectionOrder:V=>A(V,{destinationCollectionIndex:d.data.data.data.id,destinationCollectionParentIndex:d.data.data.parentIndex}),onUpdateLastCollectionOrder:V=>A(V,{destinationCollectionIndex:null,destinationCollectionParentIndex:d.data.data.parentIndex}),onDragging:V=>U(V?d.data.data.data.id:null),onToggleChildren:()=>{b(),n.saveRequest&&a("select",{pickedType:"teams-folder",folderID:d.data.data.data.id})},onRunCollection:r[3]||(r[3]=V=>a("run-collection",V)),onClick:()=>{T({collectionID:d.id.split("/").pop(),isOpen:h})}},null,8,["id","parent-i-d","data","collections-type","is-open","export-loading","has-no-team-access","collection-move-loading","is-last-item","is-selected","onAddRequest","onAddFolder","onEditCollection","onEditProperties","onExportData","onRemoveCollection","onDropEvent","onDragEvent","onUpdateCollectionOrder","onUpdateLastCollectionOrder","onDragging","onToggleChildren","onClick"])):ee("",!0),d.data.type==="requests"?(k(),B(z,{key:2,request:d.data.data.data.request,"request-i-d":d.data.data.data.id,"parent-i-d":d.data.data.parentIndex,"collections-type":n.collectionsType.type,"duplicate-loading":n.duplicateLoading,"is-active":y(d.data.data.data.id),"has-no-team-access":v.value||c.value,"request-move-loading":n.requestMoveLoading,"is-last-item":d.data.isLastItem,"is-selected":R({requestID:d.data.data.data.id}),onEditRequest:V=>d.data.type==="requests"&&a("edit-request",{requestIndex:d.data.data.data.id,request:d.data.data.data.request}),onDuplicateRequest:V=>d.data.type==="requests"&&a("duplicate-request",{folderPath:d.data.data.parentIndex,request:d.data.data.data.request}),onRemoveRequest:V=>d.data.type==="requests"&&a("remove-request",{folderPath:null,requestIndex:d.data.data.data.id}),onSelectRequest:V=>d.data.type==="requests"&&w({request:d.data.data.data.request,requestIndex:d.data.data.data.id,folderPath:C(d.id)}),onShareRequest:V=>d.data.type==="requests"&&a("share-request",{request:d.data.data.data.request}),onDragRequest:V=>P(V,{folderPath:d.data.data.parentIndex,requestIndex:d.data.data.data.id}),onUpdateRequestOrder:V=>j(V,{folderPath:d.data.data.parentIndex,requestIndex:d.data.data.data.id}),onUpdateLastRequestOrder:V=>j(V,{folderPath:d.data.data.parentIndex,requestIndex:null})},null,8,["request","request-i-d","parent-i-d","collections-type","duplicate-loading","is-active","has-no-team-access","request-move-loading","is-last-item","is-selected","onEditRequest","onDuplicateRequest","onRemoveRequest","onSelectRequest","onShareRequest","onDragRequest","onUpdateRequestOrder","onUpdateLastRequestOrder"])):ee("",!0)]),emptyNode:W(({node:d})=>[n.filterText.length!==0&&n.teamCollectionList.length===0?(k(),B(X,{key:0,text:`${i(e)("state.nothing_found")} ‟${n.filterText}”`},{icon:W(()=>[_(K,{class:"svg-icons opacity-75"})]),_:1},8,["text"])):d===null?(k(),B(X,{key:1,src:`/images/states/${i(t).value}/pack.svg`,alt:`${i(e)("empty.collections")}`,text:i(e)("empty.collections"),onDrop:r[6]||(r[6]=Re(()=>{},["stop"]))},{body:W(()=>[g("div",wc,[g("span",Ec,de(i(e)("collection.import_or_create")),1),g("div",Dc,[_(S,{icon:i(_t),label:i(e)("import.title"),filled:"",outline:"",disabled:v.value,title:v.value?i(e)("team.no_access"):"",onClick:r[4]||(r[4]=b=>v.value?null:a("display-modal-import-export"))},null,8,["icon","label","disabled","title"]),_($,{icon:i(ft),label:i(e)("add.new"),filled:"",outline:"",disabled:v.value,title:v.value?i(e)("team.no_access"):"",onClick:r[5]||(r[5]=b=>v.value?null:a("display-modal-add"))},null,8,["icon","label","disabled","title"])])])]),_:1},8,["src","alt","text"])):d.data.type==="collections"?(k(),B(X,{key:2,src:`/images/states/${i(t).value}/pack.svg`,alt:`${i(e)("empty.collections")}`,text:i(e)("empty.collections"),onDrop:r[7]||(r[7]=Re(()=>{},["stop"]))},{body:W(()=>[_($,{label:i(e)("add.new"),filled:"",outline:"",onClick:b=>d.data.type==="collections"&&a("add-folder",{path:d.id,folder:d.data.data.data})},null,8,["label","onClick"])]),_:2},1032,["src","alt","text"])):d.data.type==="folders"?(k(),B(X,{key:3,src:`/images/states/${i(t).value}/pack.svg`,alt:`${i(e)("empty.folder")}`,text:i(e)("empty.folder"),onDrop:r[8]||(r[8]=Re(()=>{},["stop"]))},null,8,["src","alt","text"])):ee("",!0)]),_:1},8,["adapter"])])])}}}),Ac={class:"flex flex-1 flex-col"},Oc={class:"flex"},Lc={class:"flex flex-1 flex-col"},Mc={class:"flex flex-col items-center space-y-4"},Hc={class:"text-center text-secondaryLight"},Fc={class:"flex flex-col items-stretch gap-4"},Uc=re({__name:"MyCollections",props:{filteredCollections:{type:Array,default:()=>[],required:!0},collectionsType:{type:Object,default:()=>({type:"my-collections",selectedTeam:void 0}),required:!0},filterText:{type:String,default:"",required:!0},saveRequest:{type:Boolean,default:!1,required:!1},picked:{type:Object,default:null,required:!1}},emits:["display-modal-add","add-request","add-folder","edit-collection","edit-folder","edit-properties","edit-request","duplicate-request","export-data","remove-collection","remove-folder","remove-request","select-request","share-request","drop-request","drop-collection","update-request-order","update-collection-order","select","display-modal-import-export"],setup(n,{emit:o}){const e=ce(),t=It(),l=n,s=o,c=Pn(l,"filteredCollections"),a=A=>{const f=A.split("/");return f[f.length-1]},C=({collectionIndex:A,folderPath:f,requestIndex:F})=>A!==void 0?l.picked&&l.picked.pickedType==="my-collection"&&l.picked.collectionIndex===A:F!==void 0&&f!==void 0?l.picked&&l.picked.pickedType==="my-request"&&l.picked.folderPath===f&&l.picked.requestIndex===F:l.picked&&l.picked.pickedType==="my-folder"&&l.picked.folderPath===f,T=Se(We),q=Z(()=>T.currentActiveTab.value.document.saveContext),v=(A,f)=>_e(q.value,Ln,On(F=>F.originLocation==="user-collection"&&F.folderPath===A&&F.requestIndex===f),An),R=A=>{const{request:f,folderPath:F,requestIndex:p}=A;l.saveRequest?s("select",{pickedType:"my-request",folderPath:F,requestIndex:parseInt(p)}):s("select-request",{request:f,folderPath:F,requestIndex:p,isActive:v(F,parseInt(p))})},E=(A,f)=>{A.setData("collectionIndex",f)},y=(A,{folderPath:f,requestIndex:F})=>{f&&(A.setData("folderPath",f),A.setData("requestIndex",F))},w=(A,f)=>{const F=A.getData("folderPath"),p=A.getData("requestIndex"),r=A.getData("collectionIndex");F&&p?s("drop-request",{folderPath:F,requestIndex:p,destinationCollectionIndex:f}):s("drop-collection",{collectionIndexDragged:r,destinationCollectionIndex:f})},P=(A,{folderPath:f,requestIndex:F})=>{if(!f)return;const p=A.getData("requestIndex");s("update-request-order",{dragedRequestIndex:p,destinationRequestIndex:F,destinationCollectionIndex:f})},M=(A,f)=>{const F=A.getData("collectionIndex");s("update-collection-order",{dragedCollectionIndex:F,destinationCollection:f})};class H{constructor(f){this.data=f}navigateToFolderWithIndexPath(f,F){if(F.length===0)return null;let p=f[F.shift()];for(;F.length>0;)p=p==null?void 0:p.folders[F.shift()];return p!==void 0?p:null}getChildren(f){return Z(()=>{if(f===null)return{status:"loaded",data:this.data.value.map(($,D)=>({id:D.toString(),data:{type:"collections",isLastItem:D===this.data.value.length-1,data:{parentIndex:null,data:$}}}))};const F=f.split("/").map(r=>parseInt(r)),p=this.navigateToFolderWithIndexPath(this.data.value,F);return p?{status:"loaded",data:[...p.folders.map(($,D)=>({id:`${f}/${D}`,data:{isLastItem:p.folders&&p.folders.length>1?D===p.folders.length-1:!1,type:"folders",data:{parentIndex:f,data:$}}})),...p.requests.map(($,D)=>({id:`${f}/${D}`,data:{isLastItem:p.requests&&p.requests.length>1?D===p.requests.length-1:!1,type:"requests",data:{parentIndex:f,data:$}}}))]}:{status:"loaded",data:[]}})}}const j=new H(c);return(A,f)=>{const F=qe,p=al,r=il,$=co,D=kt,z=Te,K=Mn,X=Be("tippy");return k(),J("div",Ac,[g("div",{class:"sticky z-10 flex flex-1 justify-between border-b border-dividerLight bg-primary",style:Mt(n.saveRequest?"top: calc(var(--upper-primary-sticky-fold) - var(--line-height-body))":"top: var(--upper-primary-sticky-fold)")},[_(F,{icon:i(ft),label:i(e)("action.new"),class:"!rounded-none",onClick:f[0]||(f[0]=S=>s("display-modal-add"))},null,8,["icon","label"]),g("span",Oc,[te(_(F,{to:"https://docs.hoppscotch.io/documentation/features/collections",blank:"",title:i(e)("app.wiki"),icon:i(Lt)},null,8,["title","icon"]),[[X,{theme:"tooltip"}]]),n.saveRequest?ee("",!0):te((k(),B(F,{key:0,icon:i(_t),title:i(e)("modal.import_export"),onClick:f[1]||(f[1]=S=>s("display-modal-import-export"))},null,8,["icon","title"])),[[X,{theme:"tooltip"}]])])],4),g("div",Lc,[_(K,{adapter:i(j)},{content:W(({node:S,toggleChildren:ue,isOpen:ne,highlightChildren:d})=>[S.data.type==="collections"?(k(),B(p,{key:0,id:S.id,"parent-i-d":S.data.data.parentIndex,data:S.data.data.data,"collections-type":n.collectionsType.type,"is-open":ne,"is-last-item":S.data.isLastItem,"is-selected":C({collectionIndex:parseInt(S.id)}),"folder-type":"collection",onAddRequest:b=>S.data.type==="collections"&&s("add-request",{path:S.id,folder:S.data.data.data}),onAddFolder:b=>S.data.type==="collections"&&s("add-folder",{path:S.id,folder:S.data.data.data}),onEditCollection:b=>S.data.type==="collections"&&s("edit-collection",{collectionIndex:S.id,collection:S.data.data.data}),onEditProperties:b=>S.data.type==="collections"&&s("edit-properties",{collectionIndex:S.id,collection:S.data.data.data}),onExportData:b=>S.data.type==="collections"&&s("export-data",S.data.data.data),onRemoveCollection:b=>s("remove-collection",S.id),onDropEvent:b=>w(b,S.id),onDragEvent:b=>E(b,S.id),onUpdateCollectionOrder:b=>M(b,{destinationCollectionIndex:S.id,destinationCollectionParentIndex:S.data.data.parentIndex}),onUpdateLastCollectionOrder:b=>M(b,{destinationCollectionIndex:null,destinationCollectionParentIndex:S.data.data.parentIndex}),onDragging:b=>d(b?S.id:null),onToggleChildren:()=>{ue(),n.saveRequest&&s("select",{pickedType:"my-collection",collectionIndex:parseInt(S.id)})}},null,8,["id","parent-i-d","data","collections-type","is-open","is-last-item","is-selected","onAddRequest","onAddFolder","onEditCollection","onEditProperties","onExportData","onRemoveCollection","onDropEvent","onDragEvent","onUpdateCollectionOrder","onUpdateLastCollectionOrder","onDragging","onToggleChildren"])):ee("",!0),S.data.type==="folders"?(k(),B(p,{key:1,id:S.id,"parent-i-d":S.data.data.parentIndex,data:S.data.data.data,"collections-type":n.collectionsType.type,"is-open":ne,"is-last-item":S.data.isLastItem,"is-selected":C({folderPath:S.id}),"folder-type":"folder",onAddRequest:b=>S.data.type==="folders"&&s("add-request",{path:S.id,folder:S.data.data.data}),onAddFolder:b=>S.data.type==="folders"&&s("add-folder",{path:S.id,folder:S.data.data.data}),onEditCollection:b=>S.data.type==="folders"&&s("edit-folder",{folderPath:S.id,folder:S.data.data.data}),onEditProperties:b=>S.data.type==="folders"&&s("edit-properties",{collectionIndex:S.id,collection:S.data.data.data}),onExportData:b=>S.data.type==="folders"&&s("export-data",S.data.data.data),onRemoveCollection:b=>s("remove-folder",S.id),onDropEvent:b=>w(b,S.id),onDragEvent:b=>E(b,S.id),onUpdateCollectionOrder:b=>M(b,{destinationCollectionIndex:S.id,destinationCollectionParentIndex:S.data.data.parentIndex}),onUpdateLastCollectionOrder:b=>M(b,{destinationCollectionIndex:null,destinationCollectionParentIndex:S.data.data.parentIndex}),onDragging:b=>d(b?S.id:null),onToggleChildren:()=>{ue(),n.saveRequest&&s("select",{pickedType:"my-folder",folderPath:S.id})}},null,8,["id","parent-i-d","data","collections-type","is-open","is-last-item","is-selected","onAddRequest","onAddFolder","onEditCollection","onEditProperties","onExportData","onRemoveCollection","onDropEvent","onDragEvent","onUpdateCollectionOrder","onUpdateLastCollectionOrder","onDragging","onToggleChildren"])):ee("",!0),S.data.type==="requests"?(k(),B(r,{key:2,request:S.data.data.data,"request-i-d":S.id,"parent-i-d":S.data.data.parentIndex,"collections-type":n.collectionsType.type,"save-request":n.saveRequest,"is-last-item":S.data.isLastItem,"is-active":v(S.data.data.parentIndex,parseInt(a(S.id))),"is-selected":C({folderPath:S.data.data.parentIndex,requestIndex:parseInt(a(S.id))}),onEditRequest:b=>S.data.type==="requests"&&s("edit-request",{folderPath:S.data.data.parentIndex,requestIndex:a(S.id),request:S.data.data.data}),onDuplicateRequest:b=>S.data.type==="requests"&&s("duplicate-request",{folderPath:S.data.data.parentIndex,request:S.data.data.data}),onRemoveRequest:b=>S.data.type==="requests"&&s("remove-request",{folderPath:S.data.data.parentIndex,requestIndex:a(S.id)}),onSelectRequest:b=>S.data.type==="requests"&&R({request:S.data.data.data,folderPath:S.data.data.parentIndex,requestIndex:a(S.id)}),onShareRequest:b=>S.data.type==="requests"&&s("share-request",{request:S.data.data.data}),onDragRequest:b=>y(b,{folderPath:S.data.data.parentIndex,requestIndex:S.id}),onUpdateRequestOrder:b=>P(b,{folderPath:S.data.data.parentIndex,requestIndex:S.id}),onUpdateLastRequestOrder:b=>P(b,{folderPath:S.data.data.parentIndex,requestIndex:null})},null,8,["request","request-i-d","parent-i-d","collections-type","save-request","is-last-item","is-active","is-selected","onEditRequest","onDuplicateRequest","onRemoveRequest","onSelectRequest","onShareRequest","onDragRequest","onUpdateRequestOrder","onUpdateLastRequestOrder"])):ee("",!0)]),emptyNode:W(({node:S})=>[n.filterText.length!==0&&n.filteredCollections.length===0?(k(),B(D,{key:0,text:`${i(e)("state.nothing_found")} ‟${n.filterText}”`},{icon:W(()=>[_($,{class:"svg-icons opacity-75"})]),_:1},8,["text"])):S===null?(k(),B(D,{key:1,src:`/images/states/${i(t).value}/pack.svg`,alt:`${i(e)("empty.collections")}`,text:i(e)("empty.collections")},{body:W(()=>[g("div",Mc,[g("span",Hc,de(i(e)("collection.import_or_create")),1),g("div",Fc,[_(z,{icon:i(_t),label:i(e)("import.title"),filled:"",outline:"",onClick:f[2]||(f[2]=ue=>s("display-modal-import-export"))},null,8,["icon","label"]),_(F,{icon:i(ft),label:i(e)("add.new"),filled:"",outline:"",onClick:f[3]||(f[3]=ue=>s("display-modal-add"))},null,8,["icon","label"])])])]),_:1},8,["src","alt","text"])):S.data.type==="collections"?(k(),B(D,{key:2,src:`/images/states/${i(t).value}/pack.svg`,alt:`${i(e)("empty.collections")}`,text:i(e)("empty.collections")},{body:W(()=>[_(F,{label:i(e)("add.new"),filled:"",outline:"",onClick:ue=>S.data.type==="collections"&&s("add-folder",{path:S.id,folder:S.data.data.data})},null,8,["label","onClick"])]),_:2},1032,["src","alt","text"])):S.data.type==="folders"?(k(),B(D,{key:3,src:`/images/states/${i(t).value}/pack.svg`,alt:`${i(e)("empty.folder")}`,text:i(e)("empty.folder")},null,8,["src","alt","text"])):ee("",!0)]),_:1},8,["adapter"])])])}}}),Nc={class:"flex items-center overflow-x-auto whitespace-nowrap border-b border-dividerLight px-4 py-2 text-tiny text-secondaryLight"},Bc={class:"truncate"},rl=re({__name:"Current",props:{section:{},isOnlyPersonal:{type:Boolean}},setup(n){const o=n,e=ce(),l=Se(Hn).currentWorkspace,s=Z(()=>o.isOnlyPersonal||l.value.type==="personal"?e("workspace.personal"):c.value),c=Z(()=>l.value.type==="team"&&l.value.teamName?l.value.teamName:`${e("workspace.team")}`);return(a,C)=>{const T=Fn;return k(),J("div",Nc,[g("span",Bc,de(s.value),1),a.section?(k(),B(T,{key:0,class:"mx-2"})):ee("",!0),mt(" "+de(a.section),1)])}}}),To=(n,o)=>Je(ws,{collectionID:n,data:o}),cl=(n,o)=>Je(Es,{requestID:n,data:o}),Vc=n=>Je(As,{requestID:n}),jc=(n,o)=>Je(Ds,{collectionID:n,requestID:o}),Gc=(n,o,e)=>Je(Ps,{requestID:n,nextRequestID:o,collectionID:e});function eo(n,o="remove"){var q,v;const{lastIndex:e,folderPath:t,length:l}=n;let{newIndex:s}=n;if(s>e&&s--,e===s)return;const c=Os(e,s===-1?l:s);s===-1&&(c.delete(e),o==="remove"&&Kc(t?`${t}/${e}`:e.toString()));const a=new Map;for(const[R,E]of c)t?a.set(`${t}/${R}`,`${t}/${E}`):a.set(R.toString(),E.toString());const T=Ct(We).getTabsRefTo(R=>{var E;return((E=R.document.saveContext)==null?void 0:E.originLocation)==="user-collection"&&a.has(R.document.saveContext.folderPath)});for(const R of T)if(((q=R.value.document.saveContext)==null?void 0:q.originLocation)==="user-collection"){const E=a.get((v=R.value.document.saveContext)==null?void 0:v.folderPath);R.value.document.saveContext.folderPath=E}}function zc(n,o){var l;const t=Ct(We).getTabsRefTo(s=>{var c;return((c=s.document.saveContext)==null?void 0:c.originLocation)==="user-collection"&&s.document.saveContext.folderPath.startsWith(n)});for(const s of t)((l=s.value.document.saveContext)==null?void 0:l.originLocation)==="user-collection"&&(s.value.document.saveContext={...s.value.document.saveContext,folderPath:s.value.document.saveContext.folderPath.replace(n,o)})}function Jc(n,o,e){if(!n)return o;const t=n.split("/"),l=o.split("/"),s=e.split("/"),c=t.filter((C,T)=>C===s[T]).length,a=l.filter((C,T)=>C===s[T]).length;return c>a?n:o}function Wc(n){const o={};n.forEach((t,l)=>{const s=t.inheritedHeader.key;s in o||(o[s]=[]),o[s].push(l)});const e=[];for(const t in o)if(Object.prototype.hasOwnProperty.call(o,t)){const l=o[t][o[t].length-1];e.push(n[l])}return e.sort((t,l)=>t.parentID.localeCompare(l.parentID)),e}function Et(n,o,e){(e==="rest"?Ct(We):Ct(dt)).getTabsRefTo(s=>{const c=s.document.saveContext,a=(c==null?void 0:c.originLocation)==="team-collection"?c.collectionID:c==null?void 0:c.folderPath;return(a==null?void 0:a.startsWith(n))??!1}).map(s=>{var T,q,v,R;const c=(T=s.value.document.inheritedProperties)==null?void 0:T.auth.parentID,a=((q=s.value.document.saveContext)==null?void 0:q.originLocation)==="team-collection"?s.value.document.saveContext.collectionID:(v=s.value.document.saveContext)==null?void 0:v.folderPath;if(Jc(c,n,a??"")===n&&s.value.document.inheritedProperties&&(s.value.document.inheritedProperties.auth=o.auth),(R=s.value.document.inheritedProperties)!=null&&R.headers){const E=s.value.document.inheritedProperties.headers.filter(P=>P.parentID!==n),y=o.headers.filter(P=>P.parentID===n),w=Wc([...new Set([...y,...E])]);s.value.document.inheritedProperties.headers=w}})}function Kc(n){const e=Ct(We).getTabsRefTo(t=>{var l;return((l=t.document.saveContext)==null?void 0:l.originLocation)==="user-collection"&&t.document.saveContext.folderPath.startsWith(n)});for(const t of e)t.value.document.saveContext=null,t.value.document.isDirty=!0}async function _n(){var e,t;const o=Ct(We).getTabsRefTo(l=>{var s;return((s=l.document.saveContext)==null?void 0:s.originLocation)==="team-collection"});for(const l of o)if(((e=l.value.document.saveContext)==null?void 0:e.originLocation)==="team-collection"){const s=await lt({query:Ls,variables:{requestID:(t=l.value.document.saveContext)==null?void 0:t.requestID}});Ne(s)&&s.right.request===null&&(l.value.document.saveContext=null,l.value.document.isDirty=!0)}}function bo(n,o){if(!o)return n;const e=o.split("/").map(l=>parseInt(l));let t=n[e[0]];if(e.length===1)return t.folders;for(let l=1;l<e.length;l++){const s=t.folders[e[l]];s&&(t=s)}return t.folders}const $o=10;function io(n,o,e){for(const t of n){if(t.id===o)return e||null;if(t.children){const l=io(t.children,o,t);if(l)return l}}return null}function Qe(n,o){for(const e of n){if(e.id===o)return e;if(e.children){const t=Qe(e.children,o);if(t)return t}}return null}function Qc(n,o){const e=io(n,o);e&&e.children&&(e.children=e.children.filter(l=>l.id!==o));const t=Qe(n,o);t&&la(n,t)}function Xc(n,o){const e=Qe(n,o.id);e&&Object.assign(e,o)}function dl(n,o){for(const e of n){if(e.requests){const t=e.requests.find(l=>l.id===o);if(t)return t}if(e.children){const t=dl(e.children,o);if(t)return t}}return null}function ul(n,o){for(const e of n){if(e.requests&&e.requests.find(t=>t.id===o))return e;if(e.children){const t=ul(e.children,o);if(t)return t}}return null}class Zc{constructor(o){ae(this,"collections$");ae(this,"loadingCollections$");ae(this,"entityIDs");ae(this,"teamCollectionAdded$");ae(this,"teamCollectionUpdated$");ae(this,"teamCollectionRemoved$");ae(this,"teamRequestAdded$");ae(this,"teamRequestUpdated$");ae(this,"teamRequestDeleted$");ae(this,"teamRequestMoved$");ae(this,"teamCollectionMoved$");ae(this,"teamRequestOrderUpdated$");ae(this,"teamCollectionOrderUpdated$");ae(this,"teamCollectionAddedSub");ae(this,"teamCollectionUpdatedSub");ae(this,"teamCollectionRemovedSub");ae(this,"teamRequestAddedSub");ae(this,"teamRequestUpdatedSub");ae(this,"teamRequestDeletedSub");ae(this,"teamRequestMovedSub");ae(this,"teamCollectionMovedSub");ae(this,"teamRequestOrderUpdatedSub");ae(this,"teamCollectionOrderUpdatedSub");ae(this,"reorderItems",(o,e,t)=>{const l=o.splice(e,1)[0];e<t?o.splice(t-1,0,l):o.splice(t,0,l)});ae(this,"updateCollectionOrder",(o,e)=>{const t=this.collections$.value;if(e===null){const l=io(t,o);if(l&&l.children){const s=l.children.findIndex(c=>c.id===o);l.children.push(l.children.splice(s,1)[0])}else{const s=t.findIndex(c=>c.id===o);if(s===-1)return;t.push(t.splice(s,1)[0])}}else{const l=io(t,e);if(l&&l.children){const s=l.children.findIndex(a=>a.id===o),c=l.children.findIndex(a=>a.id===e);if(s===-1)return;this.reorderItems(l.children,s,c)}else{const s=t.findIndex(a=>a.id===o),c=t.findIndex(a=>a.id===e);if(s===-1)return;this.reorderItems(t,s,c)}}this.collections$.next(t)});this.teamID=o,this.collections$=new Pt([]),this.loadingCollections$=new Pt([]),this.entityIDs=new Set,this.teamCollectionAdded$=null,this.teamCollectionUpdated$=null,this.teamCollectionRemoved$=null,this.teamRequestAdded$=null,this.teamRequestDeleted$=null,this.teamRequestUpdated$=null,this.teamRequestMoved$=null,this.teamCollectionMoved$=null,this.teamRequestOrderUpdated$=null,this.teamCollectionOrderUpdated$=null,this.teamCollectionAddedSub=null,this.teamCollectionUpdatedSub=null,this.teamCollectionRemovedSub=null,this.teamRequestAddedSub=null,this.teamRequestDeletedSub=null,this.teamRequestUpdatedSub=null,this.teamRequestMovedSub=null,this.teamCollectionMovedSub=null,this.teamRequestOrderUpdatedSub=null,this.teamCollectionOrderUpdatedSub=null,this.teamID&&this.initialize()}changeTeamID(o){this.teamID=o,this.collections$.next([]),this.entityIDs.clear(),this.loadingCollections$.next([]),this.unsubscribeSubscriptions(),this.teamID&&this.initialize()}unsubscribeSubscriptions(){var o,e,t,l,s,c,a,C,T,q,v,R,E,y,w,P,M,H,j,A;(o=this.teamCollectionAdded$)==null||o.unsubscribe(),(e=this.teamCollectionUpdated$)==null||e.unsubscribe(),(t=this.teamCollectionRemoved$)==null||t.unsubscribe(),(l=this.teamRequestAdded$)==null||l.unsubscribe(),(s=this.teamRequestDeleted$)==null||s.unsubscribe(),(c=this.teamRequestUpdated$)==null||c.unsubscribe(),(a=this.teamRequestMoved$)==null||a.unsubscribe(),(C=this.teamCollectionMoved$)==null||C.unsubscribe(),(T=this.teamRequestOrderUpdated$)==null||T.unsubscribe(),(q=this.teamCollectionOrderUpdated$)==null||q.unsubscribe(),(v=this.teamCollectionAddedSub)==null||v.unsubscribe(),(R=this.teamCollectionUpdatedSub)==null||R.unsubscribe(),(E=this.teamCollectionRemovedSub)==null||E.unsubscribe(),(y=this.teamRequestAddedSub)==null||y.unsubscribe(),(w=this.teamRequestDeletedSub)==null||w.unsubscribe(),(P=this.teamRequestUpdatedSub)==null||P.unsubscribe(),(M=this.teamRequestMovedSub)==null||M.unsubscribe(),(H=this.teamCollectionMovedSub)==null||H.unsubscribe(),(j=this.teamRequestOrderUpdatedSub)==null||j.unsubscribe(),(A=this.teamCollectionOrderUpdatedSub)==null||A.unsubscribe()}async initialize(){await this.loadRootCollections(),this.registerSubscriptions()}addCollection(o,e){if(this.entityIDs.has(`collection-${o.id}`))return;const t=this.collections$.value;if(!e)t.push(o);else{const l=Qe(t,e);if(!l)return;l.children!==null?l.children.push(o):l.children=[o]}this.entityIDs.add(`collection-${o.id}`),this.collections$.next(t)}async loadRootCollections(){if(this.teamID===null)throw new Error("Team ID is null");this.loadingCollections$.next([...this.loadingCollections$.getValue(),"root"]);const o=[];for(;;){const e=await lt({query:Ms,variables:{teamID:this.teamID,cursor:o.length>0?o[o.length-1].id:void 0}});if(ye(e))throw this.loadingCollections$.next(this.loadingCollections$.getValue().filter(t=>t!=="root")),new Error(`Error fetching root collections: ${e.left.error}`);if(o.push(...e.right.rootCollectionsOfTeam.map(t=>({...t,children:null,requests:null}))),e.right.rootCollectionsOfTeam.length!==$o)break}this.loadingCollections$.next(this.loadingCollections$.getValue().filter(e=>e!=="root")),o.forEach(e=>this.entityIDs.add(`collection-${e.id}`)),this.collections$.next(o)}updateCollection(o){const e=this.collections$.value;Xc(e,o),this.collections$.next(e)}removeCollection(o){const e=this.collections$.value;Qc(e,o),this.entityIDs.delete(`collection-${o}`),this.collections$.next(e)}addRequest(o){if(this.entityIDs.has(`request-${o.id}`))return;const e=this.collections$.value,t=Qe(e,o.collectionID);t&&t.requests&&(t.requests.push(o),this.entityIDs.add(`request-${o.id}`),this.collections$.next(e))}updateRequest(o){const e=this.collections$.value,t=dl(e,o.id);t&&(Object.assign(t,o),this.collections$.next(e))}removeRequest(o){const e=this.collections$.value,t=ul(e,o);!t||!t.requests||(ra(t.requests,l=>l.id===o),this.entityIDs.delete(`request-${o}`),this.collections$.next(e))}async moveRequest(o){const e=this.collections$.value;this.removeRequest(o.id);const t=o.request;if(t==null)return;const l=Qe(e,o.collectionID);l&&l.requests&&this.addRequest({id:o.id,collectionID:o.collectionID,request:oo(o.request),title:o.title})}async moveCollection(o,e,t){this.removeCollection(o),!(o===null||e===void 0)&&(e&&this.expandCollection(e),this.addCollection({id:o,children:null,requests:null,title:t,data:null},e??null))}updateRequestOrder(o,e,t){const l=this.collections$.value;if(e===null){const s=Qe(l,t);if(!s||!s.requests)return;const c=s.requests.findIndex(a=>a.id===o);if(c===-1)return;s.requests.push(s.requests.splice(c,1)[0])}else{const s=Qe(l,t);if(!s||!s.requests)return;const c=s.requests.findIndex(C=>C.id===o),a=s.requests.findIndex(C=>C.id===e);if(c===-1)return;this.reorderItems(s.requests,c,a)}this.collections$.next(l)}registerSubscriptions(){if(!this.teamID)return;const[o,e]=je({query:Hs,variables:{teamID:this.teamID}});this.teamCollectionAddedSub=e,this.teamCollectionAdded$=o.subscribe(f=>{var F;if(ye(f))throw new Error(`Team Collection Added Error: ${JSON.stringify(f.left)}`);this.addCollection({id:f.right.teamCollectionAdded.id,children:null,requests:null,title:f.right.teamCollectionAdded.title,data:f.right.teamCollectionAdded.data??null},((F=f.right.teamCollectionAdded.parent)==null?void 0:F.id)??null)});const[t,l]=je({query:Fs,variables:{teamID:this.teamID}});this.teamCollectionUpdatedSub=l,this.teamCollectionUpdated$=t.subscribe(f=>{if(ye(f))throw new Error(`Team Collection Updated Error: ${JSON.stringify(f.left)}`);this.updateCollection({id:f.right.teamCollectionUpdated.id,title:f.right.teamCollectionUpdated.title,data:f.right.teamCollectionUpdated.data})});const[s,c]=je({query:Us,variables:{teamID:this.teamID}});this.teamCollectionRemovedSub=c,this.teamCollectionRemoved$=s.subscribe(f=>{if(ye(f))throw new Error(`Team Collection Removed Error: ${JSON.stringify(f.left)}`);this.removeCollection(f.right.teamCollectionRemoved)});const[a,C]=je({query:Ns,variables:{teamID:this.teamID}});this.teamRequestAddedSub=C,this.teamRequestAdded$=a.subscribe(f=>{if(ye(f))throw new Error(`Team Request Added Error: ${JSON.stringify(f.left)}`);this.addRequest({id:f.right.teamRequestAdded.id,collectionID:f.right.teamRequestAdded.collectionID,request:oo(JSON.parse(f.right.teamRequestAdded.request)),title:f.right.teamRequestAdded.title})});const[T,q]=je({query:Bs,variables:{teamID:this.teamID}});this.teamRequestUpdatedSub=q,this.teamRequestUpdated$=T.subscribe(f=>{if(ye(f))throw new Error(`Team Request Updated Error: ${JSON.stringify(f.left)}`);this.updateRequest({id:f.right.teamRequestUpdated.id,collectionID:f.right.teamRequestUpdated.collectionID,request:JSON.parse(f.right.teamRequestUpdated.request),title:f.right.teamRequestUpdated.title})});const[v,R]=je({query:Vs,variables:{teamID:this.teamID}});this.teamRequestDeletedSub=R,this.teamRequestDeleted$=v.subscribe(f=>{if(ye(f))throw new Error(`Team Request Deleted Error ${JSON.stringify(f.left)}`);this.removeRequest(f.right.teamRequestDeleted)});const[E,y]=je({query:js,variables:{teamID:this.teamID}});this.teamRequestMovedSub=y,this.teamRequestMoved$=E.subscribe(f=>{if(ye(f))throw new Error(`Team Request Move Error ${JSON.stringify(f.left)}`);const{requestMoved:F}=f.right,p={id:F.id,collectionID:F.collectionID,title:F.title,request:JSON.parse(F.request)};this.moveRequest(p)});const[w,P]=je({query:Gs,variables:{teamID:this.teamID}});this.teamCollectionMovedSub=P,this.teamCollectionMoved$=w.subscribe(f=>{if(ye(f))throw new Error(`Team Collection Move Error ${JSON.stringify(f.left)}`);const{teamCollectionMoved:F}=f.right,{id:p,parent:r,title:$}=F,D=(r==null?void 0:r.id)??null;this.moveCollection(p,D,$)});const[M,H]=je({query:zs,variables:{teamID:this.teamID}});this.teamRequestOrderUpdatedSub=H,this.teamRequestOrderUpdated$=M.subscribe(f=>{if(ye(f))throw new Error(`Team Request Order Update Error ${JSON.stringify(f.left)}`);const{requestOrderUpdated:F}=f.right,{request:p}=F,{nextRequest:r}=F;this.updateRequestOrder(p.id,r?r.id:null,r?r.collectionID:p.collectionID)});const[j,A]=je({query:Js,variables:{teamID:this.teamID}});this.teamCollectionOrderUpdatedSub=A,this.teamCollectionOrderUpdated$=j.subscribe(f=>{if(ye(f))throw new Error(`Team Collection Order Update Error ${JSON.stringify(f.left)}`);const{collectionOrderUpdated:F}=f.right,{collection:p}=F,{nextCollection:r}=F;this.updateCollectionOrder(p.id,r?r.id:null)})}async getCollectionChildren(o){const e=[];for(;;){const t=await lt({query:Ws,variables:{collectionID:o.id,cursor:e.length>0?e[e.length-1].id:void 0}});if(ye(t))throw new Error(`Child Collection Fetch Error for ${o.id}: ${t.left}`);if(e.push(...t.right.collection.children.map(l=>({id:l.id,title:l.title,data:l.data,children:null,requests:null}))),t.right.collection.children.length!==$o)break}return e}async getCollectionRequests(o){const e=[];for(;;){const t=await lt({query:En,variables:{collectionID:o.id,cursor:e.length>0?e[e.length-1].id:void 0}});if(ye(t))throw new Error(`Child Request Fetch Error for ${t}: ${t.left}`);if(e.push(...t.right.requestsInCollection.map(l=>({id:l.id,collectionID:o.id,title:l.title,request:oo(JSON.parse(l.request))}))),t.right.requestsInCollection.length!==$o)break}return e}async expandCollection(o){const e=this.collections$.value,t=Qe(e,o);if(t&&t.children===null){this.loadingCollections$.next([...this.loadingCollections$.getValue(),o]);try{const[l,s]=await Promise.all([this.getCollectionChildren(t),this.getCollectionRequests(t)]);t.children=l,t.requests=s,l.forEach(c=>this.entityIDs.add(`collection-${c.id}`)),s.forEach(c=>this.entityIDs.add(`request-${c.id}`)),this.collections$.next(e)}finally{this.loadingCollections$.next(this.loadingCollections$.getValue().filter(l=>l!==o))}}}cascadeParentCollectionForHeaderAuth(o){let e={parentID:o??"",parentName:"",inheritedAuth:{authType:"none",authActive:!0}};const t=[];if(!o)return{auth:e,headers:t};const l=o.split("/");if(!l||l.length===0)return console.error("Invalid path:",o),{auth:e,headers:t};for(let s=0;s<l.length;s++){const c=Qe(this.collections$.value,l[s]);if(!c)return console.error("Parent folder not found for path:",l),{auth:e,headers:t};const a=c.data?JSON.parse(c.data):{auth:null,headers:null};a.auth||(a.auth={authType:"inherit",authActive:!0},e.parentID=l.slice(0,s+1).join("/"),e.parentName=c.title),a.headers||(a.headers=[]);const C=a.auth,T=a.headers;(C==null?void 0:C.authType)==="inherit"&&l.slice(0,s+1).length===1&&(e={parentID:l.slice(0,s+1).join("/"),parentName:c.title,inheritedAuth:e.inheritedAuth}),(C==null?void 0:C.authType)!=="inherit"&&(e={parentID:l.slice(0,s+1).join("/"),parentName:c.title,inheritedAuth:C}),T&&T.filter(v=>v.active).forEach(v=>{const R=t.findIndex(y=>{var w;return((w=y.inheritedHeader)==null?void 0:w.key)===v.key}),E=l.slice(0,s+1).join("/");R!==-1?t[R]={parentID:E,parentName:c.title,inheritedHeader:v}:t.push({parentID:E,parentName:c.title,inheritedHeader:v})})}return{auth:e,headers:t}}}class Yc{constructor(o){ae(this,"error$");ae(this,"loading$");ae(this,"teamEnvironmentList$");ae(this,"entityIDs");ae(this,"isDispose");ae(this,"teamEnvironmentCreated$");ae(this,"teamEnvironmentUpdated$");ae(this,"teamEnvironmentDeleted$");ae(this,"teamEnvironmentCreatedSub");ae(this,"teamEnvironmentUpdatedSub");ae(this,"teamEnvironmentDeletedSub");this.teamID=o,this.error$=new Pt(null),this.loading$=new Pt(!1),this.teamEnvironmentList$=new Pt([]),this.isDispose=!0,this.entityIDs=new Set,this.teamEnvironmentCreated$=null,this.teamEnvironmentDeleted$=null,this.teamEnvironmentUpdated$=null,this.teamEnvironmentCreatedSub=null,this.teamEnvironmentDeletedSub=null,this.teamEnvironmentUpdatedSub=null,o&&this.initialize()}unsubscribeSubscriptions(){var o,e,t,l,s,c;(o=this.teamEnvironmentCreated$)==null||o.unsubscribe(),(e=this.teamEnvironmentDeleted$)==null||e.unsubscribe(),(t=this.teamEnvironmentUpdated$)==null||t.unsubscribe(),(l=this.teamEnvironmentCreatedSub)==null||l.unsubscribe(),(s=this.teamEnvironmentDeletedSub)==null||s.unsubscribe(),(c=this.teamEnvironmentUpdatedSub)==null||c.unsubscribe()}changeTeamID(o){this.teamID=o,this.teamEnvironmentList$.next([]),this.loading$.next(!1),this.entityIDs.clear(),this.unsubscribeSubscriptions(),this.teamID&&this.initialize()}async initialize(){if(!this.isDispose)throw new Error("Adapter is already initialized");await this.fetchList(),this.registerSubscriptions()}dispose(){if(this.isDispose)throw new Error("Adapter has been disposed");this.isDispose=!0,this.unsubscribeSubscriptions()}async fetchList(){if(this.teamID===void 0)throw new Error("Team ID is null");this.loading$.next(!0);const o=[],e=await lt({query:Ks,variables:{teamID:this.teamID}});if(ye(e))throw this.error$.next(e.left),this.loading$.next(!1),console.error(e.left),new Error(`Failed fetching team environments: ${e.left}`);e.right.team&&o.push(...e.right.team.teamEnvironments.map(t=>({id:t.id,teamID:t.teamID,environment:{v:1,id:t.id,name:t.name,variables:JSON.parse(t.variables)}}))),o.forEach(t=>this.entityIDs.add(`environment-${t.id}`)),this.teamEnvironmentList$.next(o),this.loading$.next(!1)}createNewTeamEnvironment(o){if(this.entityIDs.has(`environment-${o.id}`))return;const e=this.teamEnvironmentList$.value;e.push(o),this.entityIDs.add(`environment-${o.id}`),this.teamEnvironmentList$.next(e)}deleteTeamEnvironment(o){const e=this.teamEnvironmentList$.value.filter(({id:t})=>t!==o);this.entityIDs.delete(`environment-${o}`),this.teamEnvironmentList$.next(e)}updateTeamEnvironment(o){const e=this.teamEnvironmentList$.value,t=e.find(({id:l})=>l===o.id);t&&(Object.assign(t,o),this.teamEnvironmentList$.next(e))}registerSubscriptions(){if(this.teamID===void 0)return;const[o,e]=je({query:Qs,variables:{teamID:this.teamID}});this.teamEnvironmentCreatedSub=e,this.teamEnvironmentCreated$=o.subscribe(a=>{if(ye(a))throw console.error(a.left),new Error(`Team Environment Create Error ${a.left}`);this.createNewTeamEnvironment(_e(a.right.teamEnvironmentCreated,C=>({id:C.id,teamID:C.teamID,environment:{v:1,id:C.id,name:C.name,variables:JSON.parse(C.variables)}})))});const[t,l]=je({query:Xs,variables:{teamID:this.teamID}});this.teamEnvironmentDeletedSub=l,this.teamEnvironmentDeleted$=t.subscribe(a=>{if(ye(a))throw console.error(a.left),new Error(`Team Environment Delete Error ${a.left}`);this.deleteTeamEnvironment(a.right.teamEnvironmentDeleted.id)});const[s,c]=je({query:Zs,variables:{teamID:this.teamID}});this.teamEnvironmentUpdatedSub=c,this.teamEnvironmentUpdated$=s.subscribe(a=>{if(ye(a))throw console.error(a.left),new Error(`Team Environment Update Error ${a.left}`);this.updateTeamEnvironment(_e(a.right.teamEnvironmentUpdated,C=>({id:C.id,teamID:C.teamID,environment:{v:1,id:C.id,name:C.name,variables:JSON.parse(C.variables)}})))})}}const ed=["onDrop"],td=["placeholder"],od=re({__name:"index",props:{saveRequest:{type:Boolean,default:!1,required:!1},picked:{type:Object,default:null,required:!1}},emits:["select","update-team","update-collection-type"],setup(n,{emit:o}){const e=ce(),t=be(),l=Se(We),s=n,c=o,a=I({type:"my-collections",selectedTeam:void 0}),C=I(null),T=I(null),q=I(null),v=I(null),R=I(null),E=I(null),y=I(null),w=I(null),P=I(""),M=I(null),H=I(null),j=I({collection:null,isRootCollection:!1,path:"",inheritedProperties:void 0}),A=I(null),f=I(""),F=He(oe.auth.getCurrentUserStream(),oe.auth.getCurrentUser()),p=He(Eo,[],"deep"),r=I(!1),$=I([]),D=I([]),z=Se(Hn),K=z.acquireTeamListAdapter(null),X=Ys("REMEMBERED_TEAM_ID"),S=new Zc(null),ue=He(S.collections$,[]),ne=He(S.loadingCollections$,[]),d=new Yc(void 0),b=He(d.teamEnvironmentList$,[]),h=ei(oi,{type:"NO_ENV_SELECTED"},ti),{cascadeParentCollectionForHeaderAuthForSearchResults:U,searchTeams:V,teamsSearchResults:we,teamsSearchResultsLoading:Fe,expandCollection:Ke,expandingCollections:it}=Se(ni);ke(we,m=>{m.length===1&&f.value.length>0&&Ke(m[0].id)});const Ce=li(V,400),Ue=Z(()=>{const m=[];return Fe.value&&m.push("root"),m.push(...it.value),m});ke(f,m=>{var u,x;if(a.value.type==="team-collections"){const O=(u=a.value.selectedTeam)==null?void 0:u.teamID;O&&((x=Ce(m,O))==null||x.catch(()=>{}))}},{immediate:!0});const fe=Se(Ro),Tt=I("headers");Un(()=>{var N;const m=fe.getLocalConfig("oauth_temp_config");if(!m)return;const{context:u,source:x,token:O}=JSON.parse(m);if(x!=="GraphQL"&&(u==null?void 0:u.type)==="collection-properties"){const Q=fe.getLocalConfig("unsaved_collection_properties");if(Q){const se=JSON.parse(Q),pe=(N=se.collection)==null?void 0:N.auth;if((pe==null?void 0:pe.authType)==="oauth-2"){const Ve=pe.grantTypeInfo;Ve&&(Ve.token=O??"")}j.value=se}fe.removeLocalConfig("oauth_temp_config"),Tt.value="authorization",he.value=!0}});const Nt=()=>{a.value.type="my-collections",a.value.selectedTeam=void 0,S.changeTeamID(null)},uo=m=>{if(f.value.length>0&&we.value.length&&m.isOpen){Ke(m.collectionID);return}},at=m=>{f.value.length>0&&we.value||S.expandCollection(m)},G=m=>{m&&(a.value.type="team-collections",S.changeTeamID(m.teamID),a.value.selectedTeam=m,X.value=m.teamID,c("update-team",m),c("update-collection-type","team-collections"))},L=z.currentWorkspace;ke(L,m=>{m.type==="personal"?Nt():m.type==="team"&&(G(m),d.changeTeamID(m.teamID))},{immediate:!0}),ke(()=>F.value,m=>{m||Nt()});const ie=He(Ao,{type:"collection",id:"",parentID:""}),le=Z(()=>{var u;if(a.value.type!=="team-collections")return!1;const m=(u=a.value.selectedTeam)==null?void 0:u.role;return m==="OWNER"||m==="EDITOR"}),$e=Z(()=>{const m=a.value.type==="my-collections"?p.value:[];if(f.value==="")return m;if(a.value.type==="team-collections")return[];const u=f.value.toLowerCase(),x=[],O=N=>N.toLowerCase().includes(u);for(const N of m){const Q=[],se=[];for(const pe of N.requests)O(pe.name)&&Q.push(pe);for(const pe of N.folders){O(pe.name)&&se.push(pe);const Ve=[];for(const tt of pe.requests)O(tt.name)&&Ve.push(tt);if(Ve.length>0){const tt=Object.assign({},pe);tt.requests=Ve,se.push(tt)}}if(Q.length+se.length>0||O(N.name)){const pe=Object.assign({},N);pe.requests=Q,pe.folders=se,x.push(pe)}}return x}),me=({collectionIndex:m,folderPath:u,requestIndex:x,collectionID:O,folderID:N,requestID:Q})=>{if(m!==void 0)return s.picked&&s.picked.pickedType==="my-collection"&&s.picked.collectionIndex===m;if(x!==void 0&&u!==void 0)return s.picked&&s.picked.pickedType==="my-request"&&s.picked.folderPath===u&&s.picked.requestIndex===x;if(u!==void 0)return s.picked&&s.picked.pickedType==="my-folder"&&s.picked.folderPath===u;if(O!==void 0)return s.picked&&s.picked.pickedType==="teams-collection"&&s.picked.collectionID===O;if(Q!==void 0)return s.picked&&s.picked.pickedType==="teams-request"&&s.picked.requestID===Q;if(N!==void 0)return s.picked&&s.picked.pickedType==="teams-folder"&&s.picked.folderID===N},Y=I(!1),Le=I(!1),Me=I(!1),Bt=I(!1),Vt=I(!1),jt=I(!1),Gt=I(!1),zt=I(!1),Jt=I(!1),Rt=I(!1),he=I(!1),ut=I(!1),xe=I(!1),po=I(!1),Mo=I(null),mo=I(null),gt=m=>{Bt.value=m,m||et()},St=m=>{Vt.value=m,m||et()},Wt=m=>{jt.value=m,m||et()},Kt=m=>{Gt.value=m,m||et()},Qt=m=>{zt.value=m,m||et()},Xt=m=>{Jt.value=m,m||et()},Zt=m=>{Rt.value=m,m||et()},fo=m=>{he.value=m,m||et()},Ze=m=>{ut.value=m,m||et()},vl=m=>{xe.value=m,K.fetchList()},hl=m=>{var u,x;if(a.value.type==="my-collections")si(Do({name:m,folders:[],requests:[],headers:[],auth:{authType:"none",authActive:!0}})),(u=oe.analytics)==null||u.logEvent({type:"HOPP_CREATE_COLLECTION",platform:"rest",workspaceType:"personal",isRootCollection:!0}),gt(!1);else if(le.value){if(!a.value.selectedTeam)return;Y.value=!0,(x=oe.analytics)==null||x.logEvent({type:"HOPP_CREATE_COLLECTION",platform:"rest",workspaceType:"team",isRootCollection:!0}),_e(Qa(m,a.value.selectedTeam.teamID),Ee(O=>{t.error(`${Ae(O)}`),Y.value=!1},()=>{Y.value=!1,t.success(e("collection.created")),gt(!1)}))()}},Ho=m=>{const{path:u,folder:x}=m;R.value=x,y.value=u,St(!0)},gl=m=>{var O,N;const u={...Xe(l.currentActiveTab.value.document.request),name:m},x=y.value;if(x){if(a.value.type==="my-collections"){const Q=lo(x,u),{auth:se,headers:pe}=De(x,"rest");l.createNewTab({request:u,isDirty:!1,saveContext:{originLocation:"user-collection",folderPath:x,requestIndex:Q},inheritedProperties:{auth:se,headers:pe}}),(O=oe.analytics)==null||O.logEvent({type:"HOPP_SAVE_REQUEST",workspaceType:"personal",createdNow:!0,platform:"rest"}),St(!1)}else if(le.value){const Q=R.value;if(!Q||!a.value.selectedTeam||!Q.id)return;Y.value=!0;const se={request:JSON.stringify(u),teamID:a.value.selectedTeam.teamID,title:m};(N=oe.analytics)==null||N.logEvent({type:"HOPP_SAVE_REQUEST",workspaceType:"team",platform:"rest",createdNow:!0}),_e(To(Q.id,se),Ee(pe=>{t.error(`${Ae(pe)}`),Y.value=!1},pe=>{const{createRequestInCollection:Ve}=pe,{auth:tt,headers:ho}=S.cascadeParentCollectionForHeaderAuth(x);l.createNewTab({request:u,isDirty:!1,saveContext:{originLocation:"team-collection",requestID:Ve.id,collectionID:x,teamID:Ve.collection.team.id},inheritedProperties:{auth:tt,headers:ho}}),Y.value=!1,St(!1)}))()}}},Fo=m=>{const{path:u,folder:x}=m;R.value=x,y.value=u,Wt(!0)},yl=m=>{var x,O;const u=y.value;if(a.value.type==="my-collections"){if(!u)return;ii(m,u),(x=oe.analytics)==null||x.logEvent({type:"HOPP_CREATE_COLLECTION",workspaceType:"personal",isRootCollection:!1,platform:"rest"}),Wt(!1)}else if(le.value){const N=R.value;if(!N||!N.id)return;Y.value=!0,(O=oe.analytics)==null||O.logEvent({type:"HOPP_CREATE_COLLECTION",workspaceType:"personal",isRootCollection:!1,platform:"rest"}),_e(Xa(m,N.id),Ee(Q=>{Q.error==="team_coll/short_title"?t.error(e("folder.name_length_insufficient")):t.error(`${Ae(Q)}`),Y.value=!1},()=>{t.success(e("folder.created")),Y.value=!1,Wt(!1)}))()}},Uo=m=>{const{collectionIndex:u,collection:x}=m;C.value=x,a.value.type==="my-collections"?(q.value=parseInt(u),T.value=x.name):T.value=x.title,Kt(!0)},ql=m=>{if(C.value){if(!m){t.error(e("collection.invalid_name"));return}if(a.value.type==="my-collections"){const u=q.value;if(u===null)return;const x={...C.value,name:m};rn(u,x),Kt(!1)}else if(le.value){if(!C.value.id)return;Y.value=!0,_e(Co(C.value.id,void 0,m),Ee(u=>{t.error(`${Ae(u)}`),Y.value=!1},()=>{Y.value=!1,t.success(e("collection.renamed")),Kt(!1)}))()}}},No=m=>{const{folderPath:u,folder:x}=m;R.value=x,a.value.type==="my-collections"&&u?(y.value=u,E.value=x.name):E.value=x.title,Qt(!0)},_l=m=>{if(R.value){if(a.value.type==="my-collections"){if(!y.value)return;cn(y.value,{...R.value,name:m}),Qt(!1)}else if(le.value){if(!R.value.id)return;Y.value=!0,_e(Co(R.value.id,void 0,m),Ee(u=>{u.error==="team_coll/short_title"?t.error(e("folder.name_length_insufficient")):t.error(`${Ae(u)}`),Y.value=!1},()=>{Y.value=!1,t.success(e("folder.renamed")),Qt(!1)}))()}}},Bo=m=>{const{folderPath:u,requestIndex:x,request:O}=m;w.value=O,P.value=O.name??"",a.value.type==="my-collections"&&u?(y.value=u,M.value=parseInt(x)):H.value=x,Xt(!0)},Cl=m=>{const u=w.value;if(!u)return;const x={...u,name:m||u.name};if(a.value.type==="my-collections"){const O=y.value,N=M.value;if(O===null||N===null)return;const Q=l.getTabRefWithSaveContext({originLocation:"user-collection",requestIndex:N,folderPath:O});Nn(O,N,x),Q&&(Q.value.document.request.name=x.name,At(()=>{Q.value.document.isDirty=!1})),Xt(!1)}else if(le.value){Y.value=!0;const O=H.value,N=m||u.name;if(!O)return;const Q={request:JSON.stringify(x),title:N};_e(cl(O,Q),Ee(pe=>{t.error(`${Ae(pe)}`),Y.value=!1},()=>{Y.value=!1,t.success(e("request.renamed")),Xt(!1)}))();const se=l.getTabRefWithSaveContext({originLocation:"team-collection",requestID:O});se&&(se.value.document.request.name=N,At(()=>{se.value.document.isDirty=!1}))}},Vo=m=>{const{folderPath:u,request:x}=m;if(!u)return;const O={...Xe(x),name:`${x.name} - ${e("action.duplicate")}`};if(a.value.type==="my-collections")lo(u,O),t.success(e("request.duplicated"));else if(le.value){if(Me.value=!0,!a.value.selectedTeam)return;const N={request:JSON.stringify(O),teamID:a.value.selectedTeam.teamID,title:`${x.name} - ${e("action.duplicate")}`};_e(To(u,N),Ee(Q=>{t.error(`${Ae(Q)}`),Me.value=!1},()=>{Me.value=!1,t.success(e("request.duplicated")),St(!1)}))()}},jo=m=>{a.value.type==="my-collections"?q.value=parseInt(m):v.value=m,A.value=`${e("confirm.remove_collection")}`,Ze(!0)},Go=async m=>{Y.value=!0,await _e(Za(m),Ee(u=>{t.error(`${Ae(u)}`),Y.value=!1},()=>{Y.value=!1,t.success(e("state.deleted")),Ze(!1)}))()},bl=()=>{if(a.value.type==="my-collections"){const m=q.value,u=m||m===0?yo(qo.value.state,[m]):void 0;if(m===null)return;me({collectionIndex:m})&&c("select",null),ui(m,u?u.id:void 0),eo({lastIndex:m,newIndex:-1,folderPath:"",length:p.value.length}),t.success(e("state.deleted")),Ze(!1)}else if(le.value){const m=v.value;if(!m)return;me({collectionID:m})&&c("select",null),Go(m).then(()=>{_n()})}},zo=m=>{a.value.type==="my-collections"?y.value=m:v.value=m,A.value=`${e("confirm.remove_folder")}`,Ze(!0)},$l=()=>{if(a.value.type==="my-collections"){const m=y.value;if(!m)return;me({folderPath:m})&&c("select",null);const u=m?yo(qo.value.state,m.split("/").map(O=>parseInt(O))):void 0;pi(m,u?u.id:void 0);const x=m.split("/").slice(0,-1).join("/");eo({lastIndex:Ye(m),newIndex:-1,folderPath:x,length:bo(p.value,x).length}),t.success(e("state.deleted")),Ze(!1)}else if(le.value){const m=v.value;if(!m)return;me({collectionID:m})&&c("select",null),Go(m).then(()=>{_n()})}},Jo=m=>{const{folderPath:u,requestIndex:x}=m;a.value.type==="my-collections"&&u?(y.value=u,M.value=parseInt(x)):H.value=x,A.value=`${e("confirm.remove_request")}`,Ze(!0)},xl=()=>{var m;if(a.value.type==="my-collections"){const u=y.value,x=M.value;if(u===null||x===null)return;me({folderPath:u,requestIndex:x})&&c("select",null);const O=l.getTabRefWithSaveContext({originLocation:"user-collection",folderPath:u,requestIndex:x});O&&(O.value.document.saveContext=null,O.value.document.isDirty=!0);const N=(m=yo(qo.value.state,u.split("/").map(Q=>parseInt(Q))))==null?void 0:m.requests[x];mi(u,x,N==null?void 0:N.id),dn({lastIndex:x,newIndex:-1,folderPath:u,length:no(p.value,u).length}),t.success(e("state.deleted")),Ze(!1)}else if(le.value){const u=H.value;if(!u)return;me({requestID:u})&&c("select",null),Y.value=!0,_e(Vc(u),Ee(O=>{t.error(`${Ae(O)}`),Y.value=!1},()=>{Y.value=!1,t.success(e("state.deleted")),Ze(!1)}))();const x=l.getTabRefWithSaveContext({originLocation:"team-collection",requestID:u});x&&(x.value.document.saveContext=null,x.value.document.isDirty=!0)}},Wo=m=>{c("select",m)},Ko=m=>{const{request:u,folderPath:x,requestIndex:O}=m;let N=null;if(a.value.type==="team-collections"){let Q;if(f.value.length>0){const pe=x.split("/").at(-1);if(!pe)return;Q=U(pe)}else Q=S.cascadeParentCollectionForHeaderAuth(x);const se=l.getTabRefWithSaveContext({originLocation:"team-collection",requestID:O});se?l.setActiveTab(se.value.id):l.createNewTab({request:Xe(u),isDirty:!1,saveContext:{originLocation:"team-collection",requestID:O,collectionID:x},inheritedProperties:Q})}else{const{auth:Q,headers:se}=De(x,"rest");N=l.getTabRefWithSaveContext({originLocation:"user-collection",requestIndex:parseInt(O),folderPath:x}),N?l.setActiveTab(N.value.id):l.createNewTab({request:Xe(u),isDirty:!1,saveContext:{originLocation:"user-collection",folderPath:x,requestIndex:parseInt(O)},inheritedProperties:{auth:Q,headers:se}})}},Ye=m=>{const u=m.split("/");return parseInt(u[u.length-1])},Qo=m=>{const{folderPath:u,requestIndex:x,destinationCollectionIndex:O}=m;if(!x||!O||!u)return;let N=null;if(a.value.type==="my-collections"){const{auth:Q,headers:se}=De(O,"rest");N=l.getTabRefWithSaveContext({originLocation:"user-collection",folderPath:u,requestIndex:Ye(x)}),N&&(N.value.document.saveContext={originLocation:"user-collection",folderPath:O,requestIndex:no(p.value,O).length},N.value.document.inheritedProperties={auth:Q,headers:se}),dn({lastIndex:Ye(x),newIndex:-1,folderPath:u,length:no(p.value,u).length}),ai(u,Ye(x),O),t.success(`${e("request.moved")}`),r.value=!1}else le.value&&(D.value.push(x),_e(jc(O,x),Ee(Q=>{t.error(`${Ae(Q)}`),D.value.splice(D.value.indexOf(x),1)},()=>{D.value.splice(D.value.indexOf(x),1);const{auth:Q,headers:se}=S.cascadeParentCollectionForHeaderAuth(O);N=l.getTabRefWithSaveContext({originLocation:"team-collection",requestID:x}),N&&(N.value.document.saveContext={originLocation:"team-collection",requestID:x},N.value.document.inheritedProperties={auth:Q,headers:se}),t.success(`${e("request.moved")}`)}))())},pt=m=>m.split("/"),Il=(m,u)=>{const x=pt(m),O=pt(u);if(x.length<O.length){const N=O.slice(0,x.length);return!!_o(N,x)}return!1},kl=(m,u)=>{const x=pt(m),O=pt(u);if(x.length>0){const N=x.slice(0,x.length-1);return!!_o(N,O)}},Xo=m=>{const{collectionIndexDragged:u,destinationCollectionIndex:x}=m;if(!(!u||!x)&&u!==x)if(a.value.type==="my-collections"){if(Il(u,x)){t.error(`${e("team.parent_coll_move")}`);return}if(kl(u,x))return;const O=u.split("/").slice(0,-1).join("/"),N=bo(p.value,x).length-(O===x?1:0);un(u,x),eo({lastIndex:Ye(u),newIndex:-1,folderPath:O,length:bo(p.value,O).length},"drop"),zc(u,`${x}/${N}`);const{auth:Q,headers:se}=De(`${x}/${N}`,"rest"),pe={auth:Q,headers:se};Et(`${x}/${N}`,pe,"rest"),r.value=!1,t.success(`${e("collection.moved")}`)}else le.value&&($.value.push(u),_e(yn(u,x),Ee(O=>{t.error(`${Ae(O)}`),$.value.splice($.value.indexOf(u),1)},()=>{t.success(`${e("collection.moved")}`),$.value.splice($.value.indexOf(u),1);const{auth:O,headers:N}=S.cascadeParentCollectionForHeaderAuth(x),Q={auth:O,headers:N};Et(`${x}`,Q,"rest")}))())},vo=m=>pt(m).length===1,Tl=({dataTransfer:m})=>{if(m){const u=m.getData("collectionIndex");if(!u)return;a.value.type==="my-collections"?(vo(u)?t.error(`${e("collection.invalid_root_move")}`):(un(u,null),t.success(`${e("collection.moved")}`)),r.value=!1):le.value&&($.value.push(u),_e(yn(u,null),Ee(x=>{$.value.splice($.value.indexOf(u),1),t.error(`${Ae(x)}`)},()=>{$.value.splice($.value.indexOf(u),1),t.success(`${e("collection.moved")}`)}))())}},Zo=(m,u,x)=>{const O=pt(m);if(u===null&&x===null)return O.length===1;if(u===null&&x!==null&&O.length===1)return O[0]===x;if(u===null&&O.length!==1&&x!==null)return O.slice(0,-1).join("/")===x;if(u===null)return!1;const N=pt(u);if(O.length===1&&N.length===1)return!0;if(O.length===N.length){const Q=O.slice(0,-1),se=N.slice(0,-1);return!!_o(Q,se)}return!1},Yo=m=>{const{dragedRequestIndex:u,destinationRequestIndex:x,destinationCollectionIndex:O}=m;!u||!O||u!==x&&(a.value.type==="my-collections"?Zo(u,x,O)?(ri(Ye(u),x?Ye(x):null,O),t.success(`${e("request.order_changed")}`)):t.error(`${e("collection.different_parent")}`):le.value&&(D.value.push(u),_e(Gc(u,x,O),Ee(N=>{t.error(`${Ae(N)}`),D.value.splice(D.value.indexOf(u),1)},()=>{t.success(`${e("request.order_changed")}`),D.value.splice(D.value.indexOf(u),1)}))()))},en=m=>{const{dragedCollectionIndex:u,destinationCollection:x}=m,{destinationCollectionIndex:O,destinationCollectionParentIndex:N}=x;u&&u!==O&&(a.value.type==="my-collections"?Zo(u,O,N)?(ci(u,O),eo({lastIndex:Ye(u),newIndex:Ye(O||""),folderPath:u.split("/").slice(0,-1).join("/")}),t.success(`${e("collection.order_changed")}`)):t.error(`${e("collection.different_parent")}`):le.value&&($.value.push(u),_e(Ya(u,O),Ee(Q=>{t.error(`${Ae(Q)}`),$.value.splice($.value.indexOf(u),1)},()=>{t.success(`${e("collection.order_changed")}`),$.value.splice($.value.indexOf(u),1)}))()))},tn=async(m,u)=>{const x=await oe.io.saveFileWithDialog({data:m,contentType:"application/json",suggestedFilename:`${u??"collection"}.json`,filters:[{name:"Hoppscotch Collection JSON file",extensions:["json"]}]});(x.type==="unknown"||x.type==="saved")&&t.success(e("state.download_started").toString())},on=async m=>{if(a.value.type==="my-collections"){const u=JSON.stringify(m),x=m.name;tn(u,x)}else{if(!m.id)return;Le.value=!0,_e(Yn(m.id),Ee(u=>{t.error(`${Ae(u)}`),Le.value=!1},async u=>{const x=el(u),O=JSON.stringify(x);await tn(O,x.name),Le.value=!1}))()}},nn=({request:m})=>{F.value?xo("share.request",{request:m}):xo("modals.login.toggle")},ln=m=>{const{collection:u,collectionIndex:x}=m;if(a.value.type==="my-collections"){const O=x.split("/").slice(0,-1).join("/");let N={auth:{parentID:"",parentName:"",inheritedAuth:{authType:"inherit",authActive:!0}},headers:[{parentID:"",parentName:"",inheritedHeader:{}}]};if(O){const{auth:Q,headers:se}=De(O,"rest");N={auth:Q,headers:se}}j.value={collection:u,isRootCollection:vo(x),path:x,inheritedProperties:N}}else if(le.value){const O=x.split("/").slice(0,-1).join("/"),N=u.data?JSON.parse(u.data??""):null;let Q,se={id:u.id,name:u.title,auth:{authType:"inherit",authActive:!0},headers:[],folders:null,requests:null};if(O){const{auth:pe,headers:Ve}=S.cascadeParentCollectionForHeaderAuth(O);Q={auth:pe,headers:Ve}}N&&(se={...se,auth:N.auth,headers:N.headers}),j.value={collection:se,isRootCollection:vo(x),path:x,inheritedProperties:Q}}fo(!0)},Rl=m=>{const{collection:u,path:x,isRootCollection:O}=m;if(u){if(a.value.type==="my-collections"){O?rn(parseInt(x),u):cn(x,u);const{auth:N,headers:Q}=De(x,"rest");At(()=>{Et(x,{auth:N,headers:Q},"rest")}),t.success(e("collection.properties_updated"))}else if(le.value&&u.id){const N={auth:u.auth,headers:u.headers};_e(Co(u.id,JSON.stringify(N),void 0),Ee(Q=>{t.error(`${Ae(Q)}`)},()=>{t.success(e("collection.properties_updated"))}))(),setTimeout(()=>{const{auth:Q,headers:se}=S.cascadeParentCollectionForHeaderAuth(x);Et(x,{auth:Q,headers:se},"rest")},200)}fo(!1)}},Sl=m=>{var O;Mo.value=m,po.value=!0;const u=L.value,x=h.value;if(["NO_ENV_SELECTED","MY_ENV"].includes(x.type)){mo.value=null;return}u.type==="team"&&x.type==="TEAM_ENV"&&(mo.value=(O=b.value.find(N=>N.teamID===u.teamID&&N.environment.id===x.environment.id))==null?void 0:O.environment.id)},wl=m=>{m===`${e("confirm.remove_collection")}`?bl():m===`${e("confirm.remove_request")}`?xl():m===`${e("confirm.remove_folder")}`?$l():(console.error(`Confirm modal title ${m} is not handled by the component`),t.error(e("error.something_went_wrong")),Ze(!1))},et=()=>{C.value=null,q.value=null,v.value=null,R.value=null,y.value=null,w.value=null,M.value=null,H.value=null,A.value=null},Ae=m=>{if(console.error(m),m.type==="network_error")return e("error.network_error");switch(m.error){case"team_coll/short_title":return e("collection.name_length_insufficient");case"team/invalid_coll_id":case"bug/team_coll/no_coll_id":case"team_req/invalid_target_id":return e("team.invalid_coll_id");case"team/not_required_role":return e("profile.no_permission");case"team_req/not_required_role":return e("profile.no_permission");case"Forbidden resource":return e("profile.no_permission");case"team_req/not_found":return e("team.no_request_found");case"bug/team_req/no_req_id":return e("team.no_request_found");case"team/collection_is_parent_coll":return e("team.parent_coll_move");case"team/target_and_destination_collection_are_same":return e("team.same_target_destination");case"team/target_collection_is_already_root_collection":return e("collection.invalid_root_move");case"team_req/requests_not_from_same_collection":return e("request.different_collection");case"team/team_collections_have_different_parents":return e("collection.different_parent");default:return e("error.something_went_wrong")}};return Ot("collection.new",()=>{gt(!0)}),Ot("modals.collection.import",()=>{Zt(!0)}),(m,u)=>{const x=rl,O=Uc,N=Pc,Q=Kr,se=jr,pe=Br,Ve=Ur,tt=Hr,ho=Lr,El=Ar,Dl=Ut,Pl=Dr,Al=di,Ol=Kn,Ll=ha;return k(),J("div",{class:ge([{"rounded border border-divider":n.saveRequest,"bg-primaryDark":r.value&&i(ie).type!=="request"},"flex-1"]),onDrop:Re(Tl,["prevent"]),onDragover:u[18]||(u[18]=Re(Ie=>r.value=!0,["prevent"])),onDragend:u[19]||(u[19]=Ie=>r.value=!1)},[g("div",{class:ge(["sticky z-10 flex flex-shrink-0 flex-col overflow-x-auto bg-primary border-b border-dividerLight",{"rounded-t":n.saveRequest}]),style:Mt(n.saveRequest?"top: calc(-1 * var(--line-height-body))":"top: 0")},[_(x,{section:i(e)("tab.collections")},null,8,["section"]),te(g("input",{"onUpdate:modelValue":u[0]||(u[0]=Ie=>f.value=Ie),type:"search",autocomplete:"off",class:"flex w-full bg-transparent px-4 py-2 h-8",placeholder:i(e)("action.search")},null,8,td),[[ro,f.value]])],6),a.value.type==="my-collections"?(k(),B(O,{key:0,"collections-type":a.value,"filtered-collections":$e.value,"filter-text":f.value,"save-request":n.saveRequest,picked:n.picked,onAddFolder:Fo,onAddRequest:Ho,onEditCollection:Uo,onEditFolder:No,onEditProperties:ln,onExportData:on,onRemoveCollection:jo,onRemoveFolder:zo,onShareRequest:nn,onDropCollection:Xo,onUpdateRequestOrder:Yo,onUpdateCollectionOrder:en,onEditRequest:Bo,onDuplicateRequest:Vo,onRemoveRequest:Jo,onSelectRequest:Ko,onSelect:Wo,onDropRequest:Qo,onDisplayModalAdd:u[1]||(u[1]=Ie=>gt(!0)),onDisplayModalImportExport:u[2]||(u[2]=Ie=>Zt(!0))},null,8,["collections-type","filtered-collections","filter-text","save-request","picked"])):(k(),B(N,{key:1,"collections-type":a.value,"team-collection-list":f.value.length>0?i(we):i(ue),"team-loading-collections":f.value.length>0?Ue.value:i(ne),"filter-text":f.value,"export-loading":Le.value,"duplicate-loading":Me.value,"save-request":n.saveRequest,picked:n.picked,"collection-move-loading":$.value,"request-move-loading":D.value,onAddRequest:Ho,onAddFolder:Fo,onEditCollection:Uo,onEditFolder:No,onEditProperties:ln,onExportData:on,onRemoveCollection:jo,onRemoveFolder:zo,onShareRequest:nn,onEditRequest:Bo,onDuplicateRequest:Vo,onRemoveRequest:Jo,onSelectRequest:Ko,onSelect:Wo,onDropRequest:Qo,onDropCollection:Xo,onUpdateRequestOrder:Yo,onUpdateCollectionOrder:en,onExpandTeamCollection:at,onDisplayModalAdd:u[3]||(u[3]=Ie=>gt(!0)),onDisplayModalImportExport:u[4]||(u[4]=Ie=>Zt(!0)),onCollectionClick:uo,onRunCollection:Sl},null,8,["collections-type","team-collection-list","team-loading-collections","filter-text","export-loading","duplicate-loading","save-request","picked","collection-move-loading","request-move-loading"])),g("div",{class:ge(["py-15 hidden flex-1 flex-col items-center justify-center bg-primaryDark px-4 text-secondaryLight",{"!flex":r.value&&i(ie).type!=="request"}])},[_(Q,{class:"svg-icons !h-8 !w-8"})],2),_(se,{show:Bt.value,"loading-state":Y.value,onSubmit:hl,onHideModal:u[5]||(u[5]=Ie=>gt(!1))},null,8,["show","loading-state"]),_(pe,{show:Vt.value,"loading-state":Y.value,onAddRequest:gl,onHideModal:u[6]||(u[6]=Ie=>St(!1))},null,8,["show","loading-state"]),_(Ve,{show:jt.value,"loading-state":Y.value,onAddFolder:yl,onHideModal:u[7]||(u[7]=Ie=>Wt(!1))},null,8,["show","loading-state"]),_(tt,{show:Gt.value,"editing-collection-name":T.value??"","loading-state":Y.value,onHideModal:u[8]||(u[8]=Ie=>Kt(!1)),onSubmit:ql},null,8,["show","editing-collection-name","loading-state"]),_(ho,{show:zt.value,"editing-folder-name":E.value??"","loading-state":Y.value,onSubmit:_l,onHideModal:u[9]||(u[9]=Ie=>Qt(!1))},null,8,["show","editing-folder-name","loading-state"]),_(El,{modelValue:P.value,"onUpdate:modelValue":u[10]||(u[10]=Ie=>P.value=Ie),show:Jt.value,"loading-state":Y.value,onSubmit:Cl,onHideModal:u[11]||(u[11]=Ie=>Xt(!1))},null,8,["modelValue","show","loading-state"]),_(Dl,{show:ut.value,title:A.value,"loading-state":Y.value,onHideModal:u[12]||(u[12]=Ie=>ut.value=!1),onResolve:wl},null,8,["show","title","loading-state"]),Rt.value?(k(),B(Pl,{key:2,"collections-type":a.value,onHideModal:u[13]||(u[13]=Ie=>Zt(!1))},null,8,["collections-type"])):ee("",!0),_(Al,{show:xe.value,onHideModal:u[14]||(u[14]=Ie=>vl(!1))},null,8,["show"]),_(Ol,{modelValue:Tt.value,"onUpdate:modelValue":u[15]||(u[15]=Ie=>Tt.value=Ie),show:he.value,"editing-properties":j.value,"show-details":a.value.type==="team-collections",source:"REST",onHideModal:u[16]||(u[16]=Ie=>fo(!1)),onSetCollectionProperties:Rl},null,8,["modelValue","show","editing-properties","show-details"]),po.value?(k(),B(Ll,{key:3,"collection-i-d":Mo.value,"environment-i-d":mo.value,"selected-environment-index":i(h),onHideModal:u[17]||(u[17]=Ie=>po.value=!1)},null,8,["collection-i-d","environment-i-d","selected-environment-index"])):ee("",!0)],42,ed)}}}),Cn=n=>fi(()=>n.flatMap(o=>JSON.parse(o)),()=>"INVALID_JSON"),nd=n=>JSON.stringify(n,null,2),ld=re({__name:"ImportExport",emits:["hide-modal"],setup(n,{emit:o}){var P,M;const e=ce(),t=be(),l=He(oe.auth.getCurrentUserStream(),oe.auth.getCurrentUser()),s=He(Bn,[]),c=I(!1),a={metadata:{id:"import.from_json",name:"import.from_json",icon:st,title:"import.from_json",applicableTo:["personal-workspace"],disabled:!1},component:wt({acceptedFileTypes:"application/json",caption:"import.from_json_description",onImportFromFile:async H=>{var f;const j=await Cn(H);if(ye(j)){E();return}const A=await Ui(JSON.stringify(j.right))();Ne(A)&&(y(A.right),(f=oe.analytics)==null||f.logEvent({type:"HOPP_IMPORT_COLLECTION",platform:"gql",workspaceType:"personal",importer:"json"})),w("hide-modal")}})},C={metadata:{id:"import.from_gist",name:"import.from_gist",icon:st,title:"import.from_gist",applicableTo:["personal-workspace","team-workspace"],disabled:!1},component:nl({caption:"import.gql_collections_from_gist_description",onImportFromGist:async H=>{var A;if(ye(H)){E();return}const j=await Cn(H.right);if(ye(j)){E();return}y(j.right),(A=oe.analytics)==null||A.logEvent({type:"HOPP_IMPORT_COLLECTION",platform:"gql",workspaceType:"personal",importer:"gist"}),w("hide-modal")}})},T={metadata:{id:"export.as_json",name:"export.as_json",title:"action.download_file",icon:Dt,disabled:!1,applicableTo:["personal-workspace","team-workspace"]},action:()=>{var j;if(!s.value.length)return t.error(e("error.no_collections_to_export"));const H=ko(nd(s.value),"GQLCollections");if(ye(H)){t.error(e("export.failed"));return}t.success(H.right),(j=oe.analytics)==null||j.logEvent({type:"HOPP_EXPORT_COLLECTION",platform:"gql",exporter:"json"})}},q={metadata:{id:"export.as_gist",name:"export.create_secret_gist",title:((P=l==null?void 0:l.value)==null?void 0:P.provider)==="github.com"?"export.create_secret_gist_tooltip_text":"export.require_github",icon:Dt,disabled:l.value?((M=l.value)==null?void 0:M.provider)!=="github.com":!0,applicableTo:["personal-workspace"],isLoading:c},action:async()=>{var j,A;if(!s.value.length)return t.error(e("error.no_collections_to_export"));if(!l.value){t.error(e("profile.no_permission"));return}c.value=!0;const H=(j=l.value)==null?void 0:j.accessToken;if(H){const f=await ol(JSON.stringify(s.value),H);if(ye(f)){t.error(e("export.failed"));return}t.success(e("export.secret_gist_success")),(A=oe.analytics)==null||A.logEvent({type:"HOPP_EXPORT_COLLECTION",platform:"gql",exporter:"gist"}),oe.io.openExternalLink(f.right)}c.value=!1}},v=[a,C],R=Z(()=>{const H=[T];return oe.platformFeatureFlags.exportAsGIST&&H.push(q),H}),E=()=>{t.error(e("import.failed"))},y=async H=>{vi(H),t.success(e("state.file_imported"))},w=o;return(H,j)=>{const A=Qn;return k(),B(A,{ref:"collections-import-export","modal-title":"graphql_collections.title","importer-modules":v,"exporter-modules":R.value,onHideModal:j[0]||(j[0]=f=>w("hide-modal"))},null,8,["exporter-modules"])}}}),sd={class:"flex space-x-2"},id=re({__name:"EditRequest",props:{show:{type:Boolean},folderPath:{},requestIndex:{},request:{},editingRequestName:{}},emits:["hide-modal"],setup(n,{emit:o}){const e=ce(),t=be(),l=n,s=o,c=I({name:null});ke(()=>l.editingRequestName,T=>{c.value.name=T});const a=()=>{if(!c.value.name){t.error(`${e("collection.invalid_name")}`);return}const T={...l.request,name:c.value.name||l.request.name};Vn(l.folderPath,l.requestIndex,T),C()},C=()=>{c.value={name:null},s("hide-modal")};return(T,q)=>{const v=ze,R=Te,E=qe,y=Oe;return T.show?(k(),B(y,{key:0,dialog:"",title:`${i(e)("modal.edit_request")}`,onClose:C},{body:W(()=>[_(v,{modelValue:c.value.name,"onUpdate:modelValue":q[0]||(q[0]=w=>c.value.name=w),placeholder:" ",label:i(e)("action.label"),"input-styles":"floating-input",onSubmit:a},null,8,["modelValue","label"])]),footer:W(()=>[g("span",sd,[_(R,{label:`${i(e)("action.save")}`,outline:"",onClick:a},null,8,["label"]),_(E,{label:`${i(e)("action.cancel")}`,outline:"",filled:"",onClick:C},null,8,["label"])])]),_:1},8,["title"])):ee("",!0)}}}),ad={class:"flex space-x-2"},rd=re({__name:"EditFolder",props:{show:{type:Boolean},folderPath:{},folder:{},editingFolderName:{}},emits:["hide-modal"],setup(n,{emit:o}){const e=ce(),t=be(),l=n,s=o,c=I("");ke(()=>l.editingFolderName,T=>{c.value=T});const a=()=>{if(!c.value){t.error(`${e("collection.invalid_name")}`);return}jn(l.folderPath,{...l.folder,name:c.value}),C()},C=()=>{c.value="",s("hide-modal")};return(T,q)=>{const v=ze,R=Te,E=qe,y=Oe;return T.show?(k(),B(y,{key:0,dialog:"",title:`${i(e)("folder.edit")}`,onClose:q[1]||(q[1]=w=>T.$emit("hide-modal"))},{body:W(()=>[_(v,{modelValue:c.value,"onUpdate:modelValue":q[0]||(q[0]=w=>c.value=w),placeholder:" ",label:i(e)("action.label"),"input-styles":"floating-input",onSubmit:a},null,8,["modelValue","label"])]),footer:W(()=>[g("span",ad,[_(R,{label:`${i(e)("action.save")}`,outline:"",onClick:a},null,8,["label"]),_(E,{label:`${i(e)("action.cancel")}`,outline:"",filled:"",onClick:C},null,8,["label"])])]),_:1},8,["title"])):ee("",!0)}}}),cd={class:"flex space-x-2"},dd=re({__name:"AddFolder",props:{show:{type:Boolean},folderPath:{},collectionIndex:{}},emits:["hide-modal","add-folder"],setup(n,{emit:o}){const e=ce(),t=be(),l=n,s=o,c=I(null),a=()=>{if(!c.value){t.error(`${e("folder.name_length_insufficient")}`);return}s("add-folder",{name:c.value,path:l.folderPath||`${l.collectionIndex}`}),C()},C=()=>{c.value=null,s("hide-modal")};return(T,q)=>{const v=ze,R=Te,E=qe,y=Oe;return T.show?(k(),B(y,{key:0,dialog:"",title:i(e)("folder.new"),onClose:C},{body:W(()=>[_(v,{modelValue:c.value,"onUpdate:modelValue":q[0]||(q[0]=w=>c.value=w),placeholder:" ",label:i(e)("action.label"),"input-styles":"floating-input",onSubmit:a},null,8,["modelValue","label"])]),footer:W(()=>[g("span",cd,[_(R,{label:i(e)("action.save"),outline:"",onClick:a},null,8,["label"]),_(E,{label:i(e)("action.cancel"),outline:"",filled:"",onClick:C},null,8,["label"])])]),_:1},8,["title"])):ee("",!0)}}}),ud={class:"flex space-x-2"},pd=re({__name:"AddRequest",props:{show:{type:Boolean},folderPath:{}},emits:["hide-modal","add-request"],setup(n,{emit:o}){const e=be(),t=ce(),l=Se(dt),s=n,c=o,a=I("");ke(()=>s.show,q=>{var v;q&&(a.value=(v=l.currentActiveTab.value)==null?void 0:v.document.request.name)});const C=()=>{if(!a.value){e.error(`${t("error.empty_req_name")}`);return}c("add-request",{name:a.value,path:s.folderPath}),T()},T=()=>{c("hide-modal")};return(q,v)=>{const R=ze,E=Te,y=qe,w=Oe;return q.show?(k(),B(w,{key:0,dialog:"",title:i(t)("request.new"),onClose:v[1]||(v[1]=P=>c("hide-modal"))},{body:W(()=>[_(R,{modelValue:a.value,"onUpdate:modelValue":v[0]||(v[0]=P=>a.value=P),placeholder:" ",label:i(t)("action.label"),"input-styles":"floating-input",onSubmit:C},null,8,["modelValue","label"])]),footer:W(()=>[g("span",ud,[_(E,{label:i(t)("action.save"),outline:"",onClick:C},null,8,["label"]),_(y,{label:i(t)("action.cancel"),outline:"",filled:"",onClick:T},null,8,["label"])])]),_:1},8,["title"])):ee("",!0)}}}),md={class:"flex space-x-2"},fd=re({__name:"Edit",props:{show:{type:Boolean},editingCollectionIndex:{},editingCollection:{},editingCollectionName:{}},emits:["hide-modal"],setup(n,{emit:o}){const e=n,t=o,l=ce(),s=be(),c=I();ke(()=>e.editingCollectionName,T=>{c.value=T});const a=()=>{if(!c.value){s.error(`${l("collection.invalid_name")}`);return}const T={...e.editingCollection,name:c.value};Gn(e.editingCollectionIndex,T),C()},C=()=>{c.value=null,t("hide-modal")};return(T,q)=>{const v=ze,R=Te,E=qe,y=Oe;return T.show?(k(),B(y,{key:0,dialog:"",title:`${i(l)("collection.edit")}`,onClose:C},{body:W(()=>[_(v,{modelValue:c.value,"onUpdate:modelValue":q[0]||(q[0]=w=>c.value=w),placeholder:" ",label:i(l)("action.label"),"input-styles":"floating-input",onSubmit:a},null,8,["modelValue","label"])]),footer:W(()=>[g("span",md,[_(R,{label:`${i(l)("action.save")}`,outline:"",onClick:a},null,8,["label"]),_(E,{label:`${i(l)("action.cancel")}`,outline:"",filled:"",onClick:C},null,8,["label"])])]),_:1},8,["title"])):ee("",!0)}}}),vd={class:"flex space-x-2"},hd=re({__name:"Add",props:{show:{type:Boolean}},emits:["hide-modal"],setup(n,{emit:o}){const e=ce(),t=be(),l=o,s=I(null),c=()=>{var C;if(!s.value){t.error(`${e("collection.invalid_name")}`);return}hi(Do({name:s.value,folders:[],requests:[],auth:{authType:"inherit",authActive:!0},headers:[]})),a(),(C=oe.analytics)==null||C.logEvent({type:"HOPP_CREATE_COLLECTION",isRootCollection:!0,platform:"gql",workspaceType:"personal"})},a=()=>{s.value=null,l("hide-modal")};return(C,T)=>{const q=ze,v=Te,R=qe,E=Oe;return C.show?(k(),B(E,{key:0,dialog:"",title:`${i(e)("collection.new")}`,onClose:a},{body:W(()=>[_(q,{modelValue:s.value,"onUpdate:modelValue":T[0]||(T[0]=y=>s.value=y),placeholder:" ","input-styles":"floating-input",label:i(e)("action.label"),onSubmit:c},null,8,["modelValue","label"])]),footer:W(()=>[g("span",vd,[_(v,{label:`${i(e)("action.save")}`,outline:"",onClick:c},null,8,["label"]),_(R,{label:`${i(e)("action.cancel")}`,outline:"",filled:"",onClick:a},null,8,["label"])])]),_:1},8,["title"])):ee("",!0)}}}),gd={class:"pointer-events-none flex w-8 items-center justify-center truncate px-6"},yd={class:"pointer-events-none flex min-w-0 flex-1 items-center py-2 pr-2 transition group-hover:text-secondaryDark"},qd=["title"],_d=g("span",{class:"absolute inline-flex h-full w-full flex-shrink-0 animate-ping rounded-full bg-green-500 opacity-75"},null,-1),Cd=g("span",{class:"relative inline-flex h-1.5 w-1.5 flex-shrink-0 rounded-full bg-green-500"},null,-1),bd=[_d,Cd],$d={class:"flex"},xd=["onKeyup"],pl=re({__name:"Request",props:{picked:{type:Object,default:null},saveRequest:{type:Boolean,default:!1},request:{type:Object,default:()=>({})},folderPath:{type:String,default:null},requestIndex:{type:Number,default:null}},emits:["select","edit-request","duplicate-request","select-request"],setup(n,{emit:o}){const e=I(null),t=I(null),l=I(null),s=I(null),c=I(null),a=ce(),C=be(),T=Se(dt),q=n,v=Z(()=>{var f;const A=(f=T.currentActiveTab.value)==null?void 0:f.document.saveContext;return A?A.originLocation==="user-collection"&&A.folderPath===q.folderPath&&A.requestIndex===q.requestIndex:!1}),R=o,E=I(!1),y=I(!1),w=Z(()=>{var A,f,F;return((A=q.picked)==null?void 0:A.pickedType)==="gql-my-request"&&((f=q.picked)==null?void 0:f.folderPath)===q.folderPath&&((F=q.picked)==null?void 0:F.requestIndex)===q.requestIndex}),P=()=>{R("select",{pickedType:"gql-my-request",folderPath:q.folderPath,requestIndex:q.requestIndex})},M=()=>{q.saveRequest?P():R("select-request",{request:q.request,folderPath:q.folderPath,requestIndex:q.requestIndex})},H=({dataTransfer:A})=>{E.value=!E.value,A.setData("folderPath",q.folderPath),A.setData("requestIndex",q.requestIndex)},j=()=>{q.picked&&q.picked.pickedType==="gql-my-request"&&q.picked.folderPath===q.folderPath&&q.picked.requestIndex===q.requestIndex&&R("select",null);const A=T.getTabRefWithSaveContext({originLocation:"user-collection",folderPath:q.folderPath,requestIndex:q.requestIndex});A&&(A.value.document.saveContext=void 0,A.value.document.isDirty=!0),gi(q.folderPath,q.requestIndex,q.request.id),C.success(`${a("state.deleted")}`)};return(A,f)=>{const F=qe,p=ct,r=rt("tippy"),$=Ut,D=Be("tippy");return k(),J("div",{class:ge(["flex flex-col",[{"bg-primaryLight":E.value}]])},[g("div",{class:"group flex items-stretch",draggable:"true",onDragstart:H,onDragover:f[4]||(f[4]=Re(()=>{},["stop"])),onDragleave:f[5]||(f[5]=z=>E.value=!1),onDragend:f[6]||(f[6]=z=>E.value=!1),onContextmenu:f[7]||(f[7]=Re(z=>t.value.tippy.show(),["prevent"]))},[g("div",{class:"pointer-events-auto flex min-w-0 flex-1 cursor-pointer items-center justify-center",onClick:f[0]||(f[0]=z=>M())},[g("span",gd,[(k(),B(vt(w.value?i(ht):i(Io)),{class:ge(["svg-icons",{"text-accent":w.value}])},null,8,["class"]))]),g("span",yd,[g("span",{class:ge(["truncate",{"text-accent":w.value}])},de(n.request.name),3),v.value?te((k(),J("span",{key:0,class:"relative mx-3 flex h-1.5 w-1.5 flex-shrink-0",title:`${i(a)("collection.request_in_use")}`},bd,8,qd)),[[D,{theme:"tooltip"}]]):ee("",!0)])]),g("div",$d,[g("span",null,[_(r,{ref_key:"options",ref:t,interactive:"",trigger:"click",theme:"popover","on-shown":()=>e.value.focus()},{content:W(({hide:z})=>[g("div",{ref_key:"tippyActions",ref:e,class:"flex flex-col focus:outline-none",tabindex:"0",onKeyup:[f[1]||(f[1]=ve(K=>l.value.$el.click(),["e"])),f[2]||(f[2]=ve(K=>s.value.$el.click(),["d"])),f[3]||(f[3]=ve(K=>c.value.$el.click(),["delete"])),ve(K=>z(),["escape"])]},[_(p,{ref_key:"edit",ref:l,icon:i(Ht),label:`${i(a)("action.edit")}`,shortcut:["E"],onClick:()=>{A.$emit("edit-request",{request:n.request,requestIndex:n.requestIndex,folderPath:n.folderPath}),z()}},null,8,["icon","label","onClick"]),_(p,{ref_key:"duplicate",ref:s,icon:i(ao),label:`${i(a)("action.duplicate")}`,shortcut:["D"],onClick:()=>{A.$emit("duplicate-request",{request:n.request,requestIndex:n.requestIndex,folderPath:n.folderPath}),z()}},null,8,["icon","label","onClick"]),_(p,{ref_key:"deleteAction",ref:c,icon:i(xt),label:`${i(a)("action.delete")}`,shortcut:["⌫"],onClick:()=>{y.value=!0,z()}},null,8,["icon","label","onClick"])],40,xd)]),default:W(()=>[te(_(F,{title:i(a)("action.more"),icon:i(Ft)},null,8,["title","icon"]),[[D,{theme:"tooltip"}]])]),_:1},8,["on-shown"])])])],32),_($,{show:y.value,title:`${i(a)("confirm.remove_request")}`,onHideModal:f[8]||(f[8]=z=>y.value=!1),onResolve:j},null,8,["show","title"])],2)}}}),Id=["onDrop"],kd={class:"pointer-events-none flex items-center justify-center px-4"},Td={class:"pointer-events-none flex min-w-0 flex-1 cursor-pointer py-2 pr-2 transition group-hover:text-secondaryDark"},Rd={class:"flex"},Sd=["onKeyup"],wd={key:0,class:"flex"},Ed={class:"flex flex-1 flex-col truncate"},Dd=re({__name:"Folder",props:{picked:{},saveRequest:{type:Boolean},folder:{},folderIndex:{},collectionIndex:{},folderPath:{},isFiltered:{type:Boolean}},emits:["select","add-request","edit-request","add-folder","edit-folder","duplicate-request","edit-properties","select-request","drop-request"],setup(n,{emit:o}){const e=be(),t=ce(),l=It(),s=Se(dt),c=n,a=o,C=I(null),T=I(null),q=I(null),v=I(null),R=I(null),E=I(null),y=I(!1),w=I(!1),P=I(!1),M=Z(()=>{var p,r;return((p=c.picked)==null?void 0:p.pickedType)==="gql-my-folder"&&((r=c.picked)==null?void 0:r.folderPath)===c.folderPath}),H=Z(()=>M.value?ht:!y.value&&!c.isFiltered?qt:y.value||!c.isFiltered?Oo:qt),j=()=>{a("select",{pickedType:"gql-my-folder",folderPath:c.folderPath})},A=()=>{c.saveRequest&&j(),y.value=!y.value},f=()=>{var r,$;((r=c.picked)==null?void 0:r.pickedType)==="gql-my-folder"&&(($=c.picked)==null?void 0:$.folderPath)===c.folderPath&&a("select",{picked:null});const p=s.getTabsRefTo(D=>{const z=D.document.saveContext;return z?z.originLocation==="user-collection"&&z.folderPath.startsWith(c.folderPath):!1});for(const D of p)D.value.document.saveContext=void 0,D.value.document.isDirty=!0;yi(c.folderPath,c.folder.id),e.success(t("state.deleted"))},F=({dataTransfer:p})=>{w.value=!w.value;const r=p.getData("folderPath"),$=p.getData("requestIndex");a("drop-request",{folderPath:r,requestIndex:$,collectionIndex:c.folderPath})};return(p,r)=>{const $=qe,D=ct,z=rt("tippy"),K=rt("Folder",!0),X=pl,S=kt,ue=Ut,ne=Be("tippy");return k(),J("div",{class:ge(["flex flex-col",[{"bg-primaryLight":w.value}]])},[g("div",{class:"group flex items-stretch",onDragover:[r[7]||(r[7]=Re(()=>{},["prevent"])),r[8]||(r[8]=d=>w.value=!0)],onDrop:[Re(F,["prevent"]),r[9]||(r[9]=d=>w.value=!1)],onDragleave:r[10]||(r[10]=d=>w.value=!1),onDragend:r[11]||(r[11]=d=>w.value=!1),onContextmenu:r[12]||(r[12]=Re(d=>T.value.tippy.show(),["prevent"]))},[g("div",{class:"flex min-w-0 flex-1 items-center justify-center cursor-pointer",onClick:r[0]||(r[0]=d=>A())},[g("span",kd,[(k(),B(vt(H.value),{class:ge(["svg-icons",{"text-accent":M.value}])},null,8,["class"]))]),g("span",Td,[g("span",{class:ge(["truncate",{"text-accent":M.value}])},de(p.folder.name?p.folder.name:p.folder.title),3)])]),g("div",Rd,[te(_($,{icon:i(bt),title:i(t)("request.new"),class:"hidden group-hover:inline-flex",onClick:r[1]||(r[1]=d=>a("add-request",{path:p.folderPath,index:p.folder.requests.length}))},null,8,["icon","title"]),[[ne,{theme:"tooltip"}]]),te(_($,{icon:i(st),title:i(t)("folder.new"),class:"hidden group-hover:inline-flex",onClick:r[2]||(r[2]=d=>a("add-folder",{folder:p.folder,path:p.folderPath}))},null,8,["icon","title"]),[[ne,{theme:"tooltip"}]]),g("span",null,[_(z,{ref_key:"options",ref:T,interactive:"",trigger:"click",theme:"popover","on-shown":()=>C.value.focus()},{content:W(({hide:d})=>[g("div",{ref_key:"tippyActions",ref:C,class:"flex flex-col focus:outline-none",tabindex:"0",onKeyup:[r[3]||(r[3]=ve(b=>q.value.$el.click(),["r"])),r[4]||(r[4]=ve(b=>v.value.$el.click(),["n"])),r[5]||(r[5]=ve(b=>R.value.$el.click(),["e"])),r[6]||(r[6]=ve(b=>E.value.$el.click(),["delete"])),ve(b=>d(),["escape"])]},[_(D,{ref_key:"requestAction",ref:q,icon:i(bt),label:`${i(t)("request.new")}`,shortcut:["R"],onClick:()=>{a("add-request",{path:p.folderPath}),d()}},null,8,["icon","label","onClick"]),_(D,{ref_key:"folderAction",ref:v,icon:i(st),label:`${i(t)("folder.new")}`,shortcut:["N"],onClick:()=>{a("add-folder",{folder:p.folder,path:p.folderPath}),d()}},null,8,["icon","label","onClick"]),_(D,{ref_key:"edit",ref:R,icon:i(Ht),label:`${i(t)("action.edit")}`,shortcut:["E"],onClick:()=>{a("edit-folder",{folder:p.folder,folderPath:p.folderPath}),d()}},null,8,["icon","label","onClick"]),_(D,{ref_key:"deleteAction",ref:E,icon:i(xt),label:`${i(t)("action.delete")}`,shortcut:["⌫"],onClick:()=>{P.value=!0,d()}},null,8,["icon","label","onClick"]),_(D,{ref:"propertiesAction",icon:i(Lo),label:i(t)("action.properties"),shortcut:["P"],onClick:()=>{a("edit-properties",{collectionIndex:p.collectionIndex,collection:p.collection}),d()}},null,8,["icon","label","onClick"])],40,Sd)]),default:W(()=>[te(_($,{title:i(t)("action.more"),icon:i(Ft)},null,8,["title","icon"]),[[ne,{theme:"tooltip"}]])]),_:1},8,["on-shown"])])])],40,Id),y.value||p.isFiltered?(k(),J("div",wd,[g("div",{class:"ml-[1.375rem] flex w-0.5 transform cursor-nsResize bg-dividerLight transition hover:scale-x-125 hover:bg-dividerDark",onClick:r[13]||(r[13]=d=>A())}),g("div",Ed,[(k(!0),J(Pe,null,Ge(p.folder.folders,(d,b)=>(k(),B(K,{key:`subFolder-${String(b)}`,picked:p.picked,"save-request":p.saveRequest,folder:d,"folder-index":b,"folder-path":`${p.folderPath}/${String(b)}`,"collection-index":p.collectionIndex,"is-filtered":p.isFiltered,onAddRequest:r[14]||(r[14]=h=>a("add-request",h)),onAddFolder:r[15]||(r[15]=h=>a("add-folder",h)),onEditFolder:r[16]||(r[16]=h=>a("edit-folder",h)),onEditRequest:r[17]||(r[17]=h=>a("edit-request",h)),onDuplicateRequest:r[18]||(r[18]=h=>a("duplicate-request",h)),onEditProperties:h=>a("edit-properties",{collectionIndex:`${p.folderPath}/${String(b)}`,collection:d}),onSelect:r[19]||(r[19]=h=>a("select",h)),onSelectRequest:r[20]||(r[20]=h=>p.$emit("select-request",h))},null,8,["picked","save-request","folder","folder-index","folder-path","collection-index","is-filtered","onEditProperties"]))),128)),(k(!0),J(Pe,null,Ge(p.folder.requests,(d,b)=>(k(),B(X,{key:`request-${String(b)}`,picked:p.picked,"save-request":p.saveRequest,request:d,"collection-index":p.collectionIndex,"folder-index":p.folderIndex,"folder-path":p.folderPath,"folder-name":p.folder.name,"request-index":b,onEditRequest:r[21]||(r[21]=h=>a("edit-request",h)),onDuplicateRequest:r[22]||(r[22]=h=>a("duplicate-request",h)),onSelect:r[23]||(r[23]=h=>a("select",h)),onSelectRequest:r[24]||(r[24]=h=>p.$emit("select-request",h))},null,8,["picked","save-request","request","collection-index","folder-index","folder-path","folder-name","request-index"]))),128)),p.folder.folders&&p.folder.folders.length===0&&p.folder.requests&&p.folder.requests.length===0?(k(),B(S,{key:0,src:`/images/states/${i(l).value}/pack.svg`,alt:`${i(t)("empty.folder")}`,text:i(t)("empty.folder")},null,8,["src","alt","text"])):ee("",!0)])])):ee("",!0),_(ue,{show:P.value,title:`${i(t)("confirm.remove_folder")}`,onHideModal:r[25]||(r[25]=d=>P.value=!1),onResolve:f},null,8,["show","title"])],2)}}}),Pd=["onDrop"],Ad={class:"flex"},Od=["onKeyup"],Ld={key:0,class:"flex"},Md={class:"flex flex-1 flex-col truncate"},Hd=re({__name:"Collection",props:{picked:{},saveRequest:{type:Boolean},collectionIndex:{},collection:{},isFiltered:{type:Boolean}},emits:["select","edit-request","duplicate-request","add-request","add-folder","edit-folder","edit-properties","edit-collection","select-request","drop-request"],setup(n,{emit:o}){const e=n,t=It(),l=be(),s=ce(),c=Se(dt),a=o,C=I(null),T=I(null),q=I(null),v=I(null),R=I(null),E=I(null),y=I(!1),w=I(!1),P=I(!1),M=Z(()=>{var p,r;return((p=e.picked)==null?void 0:p.pickedType)==="gql-my-collection"&&((r=e.picked)==null?void 0:r.collectionIndex)===e.collectionIndex}),H=Z(()=>M.value?ht:!y.value&&!e.isFiltered?qt:!y.value||e.isFiltered?Oo:qt),j=()=>{a("select",{pickedType:"gql-my-collection",collectionIndex:e.collectionIndex})},A=()=>{e.saveRequest&&j(),y.value=!y.value},f=()=>{var r,$;((r=e.picked)==null?void 0:r.pickedType)==="gql-my-collection"&&(($=e.picked)==null?void 0:$.collectionIndex)===e.collectionIndex&&a("select",null);const p=c.getTabsRefTo(D=>{const z=D.document.saveContext;return z?z.originLocation==="user-collection"&&z.folderPath.startsWith(e.collectionIndex.toString()):!1});for(const D of p)D.value.document.saveContext=void 0,D.value.document.isDirty=!0;qi(e.collectionIndex,e.collection.id),l.success(`${s("state.deleted")}`)},F=({dataTransfer:p})=>{w.value=!w.value;const r=p.getData("folderPath"),$=p.getData("requestIndex");a("drop-request",{folderPath:r,requestIndex:$,collectionIndex:e.collectionIndex})};return(p,r)=>{const $=qe,D=ct,z=rt("tippy"),K=Dd,X=pl,S=kt,ue=Ut,ne=Be("tippy");return k(),J("div",{class:ge(["flex flex-col",[{"bg-primaryLight":w.value}]])},[g("div",{class:"group flex items-stretch",onDragover:[r[8]||(r[8]=Re(()=>{},["prevent"])),r[9]||(r[9]=d=>w.value=!0)],onDrop:[Re(F,["prevent"]),r[10]||(r[10]=d=>w.value=!1)],onDragleave:r[11]||(r[11]=d=>w.value=!1),onDragend:r[12]||(r[12]=d=>w.value=!1),onContextmenu:r[13]||(r[13]=Re(d=>T.value.tippy.show(),["prevent"]))},[g("span",{class:"flex cursor-pointer items-center justify-center px-4",onClick:r[0]||(r[0]=d=>A())},[(k(),B(vt(H.value),{class:ge(["svg-icons",{"text-accent":M.value}])},null,8,["class"]))]),g("span",{class:"flex min-w-0 flex-1 cursor-pointer py-2 pr-2 transition group-hover:text-secondaryDark",onClick:r[1]||(r[1]=d=>A())},[g("span",{class:ge(["truncate",{"text-accent":M.value}])},de(p.collection.name),3)]),g("div",Ad,[te(_($,{icon:i(bt),title:i(s)("request.new"),class:"hidden group-hover:inline-flex",onClick:r[2]||(r[2]=d=>a("add-request",{path:`${p.collectionIndex}`,index:p.collection.requests.length}))},null,8,["icon","title"]),[[ne,{theme:"tooltip"}]]),te(_($,{icon:i(st),title:i(s)("folder.new"),class:"hidden group-hover:inline-flex",onClick:r[3]||(r[3]=d=>a("add-folder",{path:`${p.collectionIndex}`}))},null,8,["icon","title"]),[[ne,{theme:"tooltip"}]]),g("span",null,[_(z,{ref_key:"options",ref:T,interactive:"",trigger:"click",theme:"popover","on-shown":()=>C.value.focus()},{content:W(({hide:d})=>[g("div",{ref_key:"tippyActions",ref:C,class:"flex flex-col focus:outline-none",tabindex:"0",onKeyup:[r[4]||(r[4]=ve(b=>q.value.$el.click(),["r"])),r[5]||(r[5]=ve(b=>v.value.$el.click(),["n"])),r[6]||(r[6]=ve(b=>R.value.$el.click(),["e"])),r[7]||(r[7]=ve(b=>E.value.$el.click(),["delete"])),ve(b=>d(),["escape"])]},[_(D,{ref_key:"requestAction",ref:q,icon:i(bt),label:`${i(s)("request.new")}`,shortcut:["R"],onClick:()=>{p.$emit("add-request",{path:`${p.collectionIndex}`}),d()}},null,8,["icon","label","onClick"]),_(D,{ref_key:"folderAction",ref:v,icon:i(st),label:`${i(s)("folder.new")}`,shortcut:["N"],onClick:()=>{a("add-folder",{path:`${p.collectionIndex}`}),d()}},null,8,["icon","label","onClick"]),_(D,{ref_key:"edit",ref:R,icon:i(Ht),label:`${i(s)("action.edit")}`,shortcut:["E"],onClick:()=>{a("edit-collection"),d()}},null,8,["icon","label","onClick"]),_(D,{ref_key:"deleteAction",ref:E,icon:i(xt),label:`${i(s)("action.delete")}`,shortcut:["⌫"],onClick:()=>{P.value=!0,d()}},null,8,["icon","label","onClick"]),_(D,{ref:"propertiesAction",icon:i(Lo),label:i(s)("action.properties"),shortcut:["P"],onClick:()=>{a("edit-properties",{collectionIndex:String(p.collectionIndex),collection:p.collection}),d()}},null,8,["icon","label","onClick"])],40,Od)]),default:W(()=>[te(_($,{title:i(s)("action.more"),icon:i(Ft)},null,8,["title","icon"]),[[ne,{theme:"tooltip"}]])]),_:1},8,["on-shown"])])])],40,Pd),y.value||p.isFiltered?(k(),J("div",Ld,[g("div",{class:"ml-[1.375rem] flex w-0.5 transform cursor-nsResize bg-dividerLight transition hover:scale-x-125 hover:bg-dividerDark",onClick:r[14]||(r[14]=d=>A())}),g("div",Md,[(k(!0),J(Pe,null,Ge(p.collection.folders,(d,b)=>(k(),B(K,{key:`folder-${String(b)}`,picked:p.picked,"save-request":p.saveRequest,folder:d,"folder-index":b,"folder-path":`${p.collectionIndex}/${String(b)}`,"collection-index":p.collectionIndex,"is-filtered":p.isFiltered,onAddRequest:r[15]||(r[15]=h=>p.$emit("add-request",h)),onAddFolder:r[16]||(r[16]=h=>p.$emit("add-folder",h)),onEditFolder:r[17]||(r[17]=h=>p.$emit("edit-folder",h)),onEditRequest:r[18]||(r[18]=h=>p.$emit("edit-request",h)),onDuplicateRequest:r[19]||(r[19]=h=>p.$emit("duplicate-request",h)),onEditProperties:h=>p.$emit("edit-properties",{collectionIndex:`${p.collectionIndex}/${String(b)}`,collection:d}),onSelect:r[20]||(r[20]=h=>p.$emit("select",h)),onSelectRequest:r[21]||(r[21]=h=>p.$emit("select-request",h)),onDropRequest:r[22]||(r[22]=h=>p.$emit("drop-request",h))},null,8,["picked","save-request","folder","folder-index","folder-path","collection-index","is-filtered","onEditProperties"]))),128)),(k(!0),J(Pe,null,Ge(p.collection.requests,(d,b)=>(k(),B(X,{key:`request-${String(b)}`,picked:p.picked,"save-request":p.saveRequest,request:d,"collection-index":p.collectionIndex,"folder-index":-1,"folder-name":p.collection.name,"folder-path":`${p.collectionIndex}`,"request-index":b,onEditRequest:r[23]||(r[23]=h=>p.$emit("edit-request",h)),onDuplicateRequest:r[24]||(r[24]=h=>p.$emit("duplicate-request",h)),onSelect:r[25]||(r[25]=h=>p.$emit("select",h)),onSelectRequest:r[26]||(r[26]=h=>p.$emit("select-request",h))},null,8,["picked","save-request","request","collection-index","folder-name","folder-path","request-index"]))),128)),p.collection.folders.length===0&&p.collection.requests.length===0?(k(),B(S,{key:0,src:`/images/states/${i(t).value}/pack.svg`,alt:`${i(s)("empty.collection")}`,text:i(s)("empty.collection")},{body:W(()=>[_($,{label:i(s)("add.new"),filled:"",outline:"",onClick:r[27]||(r[27]=d=>a("add-folder",{path:`${p.collectionIndex}`}))},null,8,["label"])]),_:1},8,["src","alt","text"])):ee("",!0)])])):ee("",!0),_(ue,{show:P.value,title:`${i(s)("confirm.remove_collection")}`,onHideModal:r[28]||(r[28]=d=>P.value=!1),onResolve:f},null,8,["show","title"])],2)}}}),Fd=["placeholder"],Ud={class:"flex flex-1 flex-shrink-0 justify-between border-y border-dividerLight bg-primary"},Nd={class:"flex"},Bd={class:"flex flex-col"},Vd={class:"flex flex-col items-center space-y-4"},jd={class:"text-center text-secondaryLight"},Gd={class:"flex flex-col items-stretch gap-4"},zd=re({__name:"index",props:{saveRequest:{type:Boolean},picked:{}},setup(n){const o=ce(),e=be(),t=He(Bn,[],"deep"),l=It(),s=Se(dt),c=I(!1),a=I(!1),C=I(!1),T=I(!1),q=I(!1),v=I(!1),R=I(!1),E=I(!1),y=I(null),w=I(null),P=I(null),M=I(""),H=I(null),j=I(""),A=I(null),f=I(null),F=I({collection:null,isRootCollection:!1,path:"",inheritedProperties:void 0}),p=I(""),r=Se(Ro),$=I("headers");Un(()=>{var $e;const G=r.getLocalConfig("oauth_temp_config");if(!G)return;const{context:L,source:ie,token:le}=JSON.parse(G);if(ie!=="REST"&&(L==null?void 0:L.type)==="collection-properties"){const me=r.getLocalConfig("unsaved_collection_properties");if(me){const Y=JSON.parse(me),Le=($e=Y.collection)==null?void 0:$e.auth;if((Le==null?void 0:Le.authType)==="oauth-2"){const Me=Le.grantTypeInfo;Me&&(Me.token=le??"")}F.value=Y}r.removeLocalConfig("oauth_temp_config"),$.value="authorization",E.value=!0}});const D=Z(()=>{const G=to(t.value);if(!p.value)return G;const L=p.value.toLowerCase(),ie=[];for(const le of G){const $e=[],me=[];for(const Y of le.requests)Y.name.toLowerCase().includes(L)&&$e.push(Y);for(const Y of le.folders){const Le=[];for(const Me of Y.requests)Me.name.toLowerCase().includes(L)&&Le.push(Me);if(Le.length>0){const Me={...Y};Me.requests=Le,me.push(Me)}}if($e.length+me.length>0){const Y={...le};Y.requests=$e,Y.folders=me,ie.push(Y)}}return ie}),z=G=>{c.value=G},K=G=>{a.value=G,G||at()},X=G=>{C.value=G},S=G=>{T.value=G,G||at()},ue=G=>{q.value=G,G||at()},ne=G=>{v.value=G,G||at()},d=G=>{R.value=G,G||at()},b=G=>{E.value=G,G||at()},h=(G,L)=>{y.value=G,w.value=L,K(!0)},U=({name:G,path:L,index:ie})=>{var Y;const le={...s.currentActiveTab.value.document.request,name:G};so(L,le);const{auth:$e,headers:me}=De(L,"graphql");s.createNewTab({saveContext:{originLocation:"user-collection",folderPath:L,requestIndex:ie},request:le,isDirty:!1,inheritedProperties:{auth:$e,headers:me}}),(Y=oe.analytics)==null||Y.logEvent({type:"HOPP_SAVE_REQUEST",platform:"gql",createdNow:!0,workspaceType:"personal"}),S(!1)},V=G=>{const{path:L}=G;j.value=L,S(!0)},we=({name:G,path:L})=>{var ie;_i(G,L??"0"),(ie=oe.analytics)==null||ie.logEvent({type:"HOPP_CREATE_COLLECTION",isRootCollection:!1,platform:"gql",workspaceType:"personal"}),ue(!1)},Fe=G=>{const{path:L}=G;j.value=L,ue(!0)},Ke=G=>{const{folder:L,folderPath:ie}=G;P.value=L,j.value=ie,ne(!0)},it=G=>{const{collectionIndex:L,folderIndex:ie,folderName:le,request:$e,requestIndex:me,folderPath:Y}=G;j.value=Y,w.value=L,H.value=ie,M.value=le,A.value=$e,f.value=me,d(!0)},Ce=({folderPath:G,request:L})=>{so(G,{...Xe(L),name:`${L.name} - ${o("action.duplicate")}`})},Ue=({request:G,folderPath:L,requestIndex:ie})=>{const le=s.getTabRefWithSaveContext({originLocation:"user-collection",folderPath:L,requestIndex:ie}),{auth:$e,headers:me}=De(L,"graphql");if(le){s.setActiveTab(le.value.id);return}s.createNewTab({saveContext:{originLocation:"user-collection",folderPath:L,requestIndex:ie},request:Xe(zn({name:G.name,url:G.url,query:G.query,headers:G.headers,variables:G.variables,auth:G.auth})),isDirty:!1,inheritedProperties:{auth:$e,headers:me}})},fe=({folderPath:G,requestIndex:L,collectionIndex:ie})=>{const{auth:le,headers:$e}=De(`${ie}`,"graphql"),me=s.getTabRefWithSaveContext({originLocation:"user-collection",folderPath:G,requestIndex:Number(L)});me&&(me.value.document.saveContext={originLocation:"user-collection",folderPath:`${ie}`,requestIndex:no(t.value,`${ie}`).length},me.value.document.inheritedProperties={auth:le,headers:$e}),Ci(G,L,`${ie}`),e.success(`${o("request.moved")}`)},Tt=G=>G.split("/").length===1,Nt=({collectionIndex:G,collection:L})=>{if(G===null||L===null)return;const ie=G.split("/").slice(0,-1).join("/");let le;if(ie){const{auth:$e,headers:me}=De(ie,"graphql");le={auth:$e,headers:me}}F.value={collection:L,isRootCollection:Tt(G),path:G,inheritedProperties:le},b(!0)},uo=G=>{const{collection:L,path:ie,isRootCollection:le}=G;if(!L)return;le?Gn(parseInt(ie),L):jn(ie,L);const{auth:$e,headers:me}=De(ie,"graphql");At(()=>{Et(ie,{auth:$e,headers:me},"graphql")}),b(!1)},at=()=>{y.value=null,w.value=null,P.value=null,H.value=null,A.value=null,f.value=null};return Ot("collection.new",()=>{z(!0)}),Ot("modals.collection.import",()=>{X(!0)}),(G,L)=>{const ie=qe,le=Hd,$e=Te,me=kt,Y=co,Le=hd,Me=fd,Bt=pd,Vt=dd,jt=rd,Gt=id,zt=ld,Jt=Kn,Rt=Be("tippy");return k(),J("div",{class:ge({"rounded border border-divider":G.saveRequest})},[g("div",{class:"sticky z-10 flex flex-shrink-0 flex-col overflow-x-auto rounded-t bg-primary",style:Mt(G.saveRequest?"top: calc(-1 * var(--line-height-body))":"top: 0")},[te(g("input",{"onUpdate:modelValue":L[0]||(L[0]=he=>p.value=he),type:"search",autocomplete:"off",placeholder:i(o)("action.search"),class:"flex w-full bg-transparent px-4 py-2 h-8"},null,8,Fd),[[ro,p.value]]),g("div",Ud,[_(ie,{icon:i(ft),label:i(o)("action.new"),class:"!rounded-none",onClick:L[1]||(L[1]=he=>z(!0))},null,8,["icon","label"]),g("div",Nd,[te(_(ie,{to:"https://docs.hoppscotch.io/documentation/features/collections",blank:"",title:i(o)("app.wiki"),icon:i(Lt)},null,8,["title","icon"]),[[Rt,{theme:"tooltip"}]]),G.saveRequest?ee("",!0):te((k(),B(ie,{key:0,title:i(o)("modal.import_export"),icon:i(_t),onClick:L[2]||(L[2]=he=>X(!0))},null,8,["title","icon"])),[[Rt,{theme:"tooltip"}]])])])],4),g("div",Bd,[(k(!0),J(Pe,null,Ge(D.value,(he,ut)=>(k(),B(le,{key:`collection-${ut}`,picked:G.picked,name:he.name,"collection-index":ut,collection:he,"is-filtered":p.value.length>0,"save-request":G.saveRequest,onEditCollection:xe=>h(he,ut),onAddRequest:L[3]||(L[3]=xe=>V(xe)),onAddFolder:L[4]||(L[4]=xe=>Fe(xe)),onEditFolder:L[5]||(L[5]=xe=>Ke(xe)),onEditRequest:L[6]||(L[6]=xe=>it(xe)),onDuplicateRequest:L[7]||(L[7]=xe=>Ce(xe)),onSelectCollection:xe=>G.$emit("use-collection",he),onEditProperties:L[8]||(L[8]=xe=>Nt(xe)),onSelect:L[9]||(L[9]=xe=>G.$emit("select",xe)),onSelectRequest:L[10]||(L[10]=xe=>Ue(xe)),onDropRequest:L[11]||(L[11]=xe=>fe(xe))},null,8,["picked","name","collection-index","collection","is-filtered","save-request","onEditCollection","onSelectCollection"]))),128))]),i(t).length===0?(k(),B(me,{key:0,src:`/images/states/${i(l).value}/pack.svg`,alt:`${i(o)("empty.collections")}`,text:i(o)("empty.collections")},{body:W(()=>[g("div",Vd,[g("span",jd,de(i(o)("collection.import_or_create")),1),g("div",Gd,[_($e,{icon:i(_t),label:i(o)("import.title"),filled:"",outline:"",onClick:L[12]||(L[12]=he=>X(!0))},null,8,["icon","label"]),_(ie,{label:i(o)("add.new"),filled:"",outline:"",icon:i(ft),onClick:L[13]||(L[13]=he=>z(!0))},null,8,["label","icon"])])])]),_:1},8,["src","alt","text"])):ee("",!0),D.value.length!==0||i(t).length===0?ee("",!0):(k(),B(me,{key:1,text:`${i(o)("state.nothing_found")} ‟${p.value}”`},{icon:W(()=>[_(Y,{class:"svg-icons opacity-75"})]),_:1},8,["text"])),_(Le,{show:c.value,onHideModal:L[14]||(L[14]=he=>z(!1))},null,8,["show"]),_(Me,{show:a.value,"editing-collection":y.value,"editing-collection-index":w.value,"editing-collection-name":y.value?y.value.name:"",onHideModal:L[15]||(L[15]=he=>K(!1))},null,8,["show","editing-collection","editing-collection-index","editing-collection-name"]),_(Bt,{show:T.value,"folder-path":j.value,onAddRequest:L[16]||(L[16]=he=>U(he)),onHideModal:L[17]||(L[17]=he=>S(!1))},null,8,["show","folder-path"]),_(Vt,{show:q.value,"folder-path":j.value,onAddFolder:L[18]||(L[18]=he=>we(he)),onHideModal:L[19]||(L[19]=he=>ue(!1))},null,8,["show","folder-path"]),_(jt,{show:v.value,"collection-index":w.value,folder:P.value,"folder-index":H.value,"folder-path":j.value,"editing-folder-name":P.value?P.value.name:"",onHideModal:L[20]||(L[20]=he=>ne(!1))},null,8,["show","collection-index","folder","folder-index","folder-path","editing-folder-name"]),_(Gt,{show:R.value,"folder-path":j.value,request:A.value,"request-index":f.value,"editing-request-name":A.value?A.value.name:"",onHideModal:L[21]||(L[21]=he=>d(!1))},null,8,["show","folder-path","request","request-index","editing-request-name"]),C.value?(k(),B(zt,{key:2,onHideModal:L[22]||(L[22]=he=>X(!1))})):ee("",!0),_(Jt,{modelValue:$.value,"onUpdate:modelValue":L[23]||(L[23]=he=>$.value=he),show:E.value,"editing-properties":F.value,source:"GraphQL",onHideModal:L[24]||(L[24]=he=>b(!1)),onSetCollectionProperties:uo},null,8,["modelValue","show","editing-properties"])],2)}}}),Jd={class:"flex flex-col"},Wd={class:"p-4"},Kd={class:"flex space-x-2"},Gu=re({__name:"SaveRequest",props:{show:{type:Boolean,default:!1},mode:{default:"rest"},request:{default:null}},emits:["edit-request","hide-modal"],setup(n,{emit:o}){const e=ce(),t=be(),l=Se(We),s=Se(dt),c=n,a=o,C=pn(()=>s.currentActiveTab.value,()=>s.currentActiveTab.value.document.request.name),T=pn(()=>l.currentActiveTab.value,()=>l.currentActiveTab.value.document.request.name),q=Z(()=>c.request?c.request.name:c.mode==="rest"?T.value:C.value),v=I(q.value);ke(()=>[l.currentActiveTab.value,s.currentActiveTab.value],()=>{var r,$;c.mode==="rest"?v.value=((r=l.currentActiveTab.value)==null?void 0:r.document.request.name)??"":v.value=(($=s.currentActiveTab.value)==null?void 0:$.document.request.name)??""});const R=bi({name:v,collectionIndex:void 0,folderName:void 0,requestIndex:void 0}),E=I({type:"my-collections",selectedTeam:void 0}),y=I(null),w=I(!1);ke(()=>R.collectionIndex,()=>{R.folderName=void 0,R.requestIndex=void 0}),ke(()=>R.folderName,()=>{R.requestIndex=void 0});const P=r=>{E.value.selectedTeam=r},M=r=>{E.value.type=r},H=r=>{y.value=r},j=async()=>{var $,D,z,K,X,S,ue,ne,d;if(!v.value){t.error(`${e("error.empty_req_name")}`);return}if(y.value===null){t.error(`${e("collection.select")}`);return}const r=c.mode==="rest"?Xe(l.currentActiveTab.value.document.request):Xe(s.currentActiveTab.value.document.request);if(r.name=v.value,y.value.pickedType==="my-collection"){if(!yt(r))throw new Error("requestUpdated is not a REST Request");const b=lo(`${y.value.collectionIndex}`,r);l.currentActiveTab.value.document={request:r,isDirty:!1,saveContext:{originLocation:"user-collection",folderPath:`${y.value.collectionIndex}`,requestIndex:b}};const{auth:h,headers:U}=De(`${y.value.collectionIndex}`,"rest");l.currentActiveTab.value.document.inheritedProperties={auth:h,headers:U},($=oe.analytics)==null||$.logEvent({type:"HOPP_SAVE_REQUEST",createdNow:!0,platform:"rest",workspaceType:"personal"}),f()}else if(y.value.pickedType==="my-folder"){if(!yt(r))throw new Error("requestUpdated is not a REST Request");const b=lo(y.value.folderPath,r);l.currentActiveTab.value.document={request:r,isDirty:!1,saveContext:{originLocation:"user-collection",folderPath:y.value.folderPath,requestIndex:b}};const{auth:h,headers:U}=De(y.value.folderPath,"rest");l.currentActiveTab.value.document.inheritedProperties={auth:h,headers:U},(D=oe.analytics)==null||D.logEvent({type:"HOPP_SAVE_REQUEST",createdNow:!0,platform:"rest",workspaceType:"personal"}),f()}else if(y.value.pickedType==="my-request"){if(!yt(r))throw new Error("requestUpdated is not a REST Request");Nn(y.value.folderPath,y.value.requestIndex,r),l.currentActiveTab.value.document={request:r,isDirty:!1,saveContext:{originLocation:"user-collection",folderPath:y.value.folderPath,requestIndex:y.value.requestIndex}};const{auth:b,headers:h}=De(y.value.folderPath,"rest");l.currentActiveTab.value.document.inheritedProperties={auth:b,headers:h},(z=oe.analytics)==null||z.logEvent({type:"HOPP_SAVE_REQUEST",createdNow:!1,platform:"rest",workspaceType:"personal"}),f()}else if(y.value.pickedType==="teams-collection"){if(!yt(r))throw new Error("requestUpdated is not a REST Request");A(y.value.collectionID,r),(K=oe.analytics)==null||K.logEvent({type:"HOPP_SAVE_REQUEST",createdNow:!0,platform:"rest",workspaceType:"team"})}else if(y.value.pickedType==="teams-folder"){if(!yt(r))throw new Error("requestUpdated is not a REST Request");A(y.value.folderID,r),(X=oe.analytics)==null||X.logEvent({type:"HOPP_SAVE_REQUEST",createdNow:!0,platform:"rest",workspaceType:"team"})}else if(y.value.pickedType==="teams-request"){if(!yt(r))throw new Error("requestUpdated is not a REST Request");if(E.value.type!=="team-collections"||!E.value.selectedTeam)throw new Error("Collections Type mismatch");w.value=!0;const b={request:JSON.stringify(r),title:r.name};(S=oe.analytics)==null||S.logEvent({type:"HOPP_SAVE_REQUEST",createdNow:!1,platform:"rest",workspaceType:"team"}),_e(cl(y.value.requestID,b),Ee(h=>{t.error(`${p(h)}`),w.value=!1},()=>{w.value=!1,f()}))()}else if(y.value.pickedType==="gql-my-request"){Vn(y.value.folderPath,y.value.requestIndex,r),(ue=oe.analytics)==null||ue.logEvent({type:"HOPP_SAVE_REQUEST",createdNow:!1,platform:"gql",workspaceType:"team"});const{auth:b,headers:h}=De(y.value.folderPath,"graphql");s.currentActiveTab.value.document.inheritedProperties={auth:b,headers:h},f()}else if(y.value.pickedType==="gql-my-folder"){so(y.value.folderPath,r),(ne=oe.analytics)==null||ne.logEvent({type:"HOPP_SAVE_REQUEST",createdNow:!0,platform:"gql",workspaceType:"team"});const{auth:b,headers:h}=De(y.value.folderPath,"graphql");s.currentActiveTab.value.document.inheritedProperties={auth:b,headers:h},f()}else if(y.value.pickedType==="gql-my-collection"){so(`${y.value.collectionIndex}`,r),(d=oe.analytics)==null||d.logEvent({type:"HOPP_SAVE_REQUEST",createdNow:!0,platform:"gql",workspaceType:"team"});const{auth:b,headers:h}=De(`${y.value.collectionIndex}`,"graphql");s.currentActiveTab.value.document.inheritedProperties={auth:b,headers:h},f()}},A=(r,$)=>{if(E.value.type!=="team-collections"||!E.value.selectedTeam)throw new Error("Collections Type mismatch");w.value=!0;const D={title:$.name,request:JSON.stringify($),teamID:E.value.selectedTeam.teamID};_e(To(r,D),Ee(z=>{t.error(`${p(z)}`),w.value=!1},z=>{const{createRequestInCollection:K}=z;l.currentActiveTab.value.document={request:$,isDirty:!1,saveContext:{originLocation:"team-collection",requestID:K.id,collectionID:K.collection.id,teamID:K.collection.team.id}},w.value=!1,f()}))()},f=()=>{t.success(`${e("request.added")}`),At(()=>{l.currentActiveTab.value.document.isDirty=!1}),F()},F=()=>{y.value=null,a("hide-modal")},p=r=>{if(console.error(r),r.type==="network_error")return e("error.network_error");switch(r.error){case"team_coll/short_title":return e("collection.name_length_insufficient");case"team/invalid_coll_id":return e("team.invalid_id");case"team/not_required_role":return e("profile.no_permission");case"team_req/not_required_role":return e("profile.no_permission");case"Forbidden resource":return e("profile.no_permission");default:return e("error.something_went_wrong")}};return(r,$)=>{const D=ze,z=zd,K=od,X=Te,S=qe,ue=Oe;return r.show?(k(),B(ue,{key:0,dialog:"",title:`${i(e)("collection.save_as")}`,onClose:F},{body:W(()=>[g("div",Jd,[_(D,{modelValue:v.value,"onUpdate:modelValue":$[0]||($[0]=ne=>v.value=ne),styles:"relative flex",placeholder:" ",label:i(e)("request.name"),"input-styles":"floating-input",onSubmit:j},null,8,["modelValue","label"]),g("label",Wd,de(i(e)("collection.select_location")),1),r.mode==="graphql"?(k(),B(z,{key:0,picked:y.value,"save-request":!0,onSelect:H},null,8,["picked"])):(k(),B(K,{key:1,picked:y.value,"save-request":!0,onSelect:H,onUpdateTeam:P,onUpdateCollectionType:M},null,8,["picked"]))])]),footer:W(()=>[g("span",Kd,[_(X,{label:`${i(e)("action.save")}`,loading:w.value,outline:"",onClick:j},null,8,["label","loading"]),_(S,{label:`${i(e)("action.cancel")}`,outline:"",filled:"",onClick:F},null,8,["label"])])]),_:1},8,["title"])):ee("",!0)}}}),Qd={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Xd=g("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m12 2l3.09 6.26L22 9.27l-5 4.87l1.18 6.88L12 17.77l-6.18 3.25L7 14.14L2 9.27l6.91-1.01L12 2z"},null,-1),Zd=[Xd];function Yd(n,o){return k(),J("svg",Qd,[...Zd])}const ml={name:"lucide-star",render:Yd},eu={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-star"},tu=g("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},null,-1),ou=[tu];function nu(n,o){return k(),J("svg",eu,[...ou])}const fl={name:"hopp-star-off",render:nu},lu=["title"],su={class:"truncate text-tiny font-semibold"},iu={class:"truncate"},au=["onKeyup"],ru=re({__name:"Card",props:{entry:{},showMore:{type:Boolean}},emits:["use-entry","delete-entry","toggle-star","add-to-collection"],setup(n,{emit:o}){const e=n,t=o,l=I(null),s=I(null),c=I(null),a=ce(),C=Z(()=>{if(e.entry.responseMeta.duration){const q=e.entry.responseMeta.duration;return q?q>0?`${a("request.duration")}: ${q}ms`:a("error.no_duration"):""}return a("error.no_duration")}),T=Z(()=>$i(e.entry.responseMeta.statusCode)||{className:""});return(q,v)=>{const R=ct,E=rt("tippy"),y=qe,w=Be("tippy");return k(),J("div",{class:"group flex items-stretch",onContextmenu:v[5]||(v[5]=Re(P=>s.value.tippy.show(),["prevent"]))},[te((k(),J("span",{class:ge(["flex w-16 cursor-pointer items-center justify-center truncate px-2",T.value.className]),"data-testid":"restore_history_entry",title:`${C.value}`,onClick:v[0]||(v[0]=P=>t("use-entry"))},[g("span",su,de(q.entry.request.method),1)],10,lu)),[[w,{theme:"tooltip",delay:[500,20]}]]),te((k(),J("span",{class:"flex min-w-0 flex-1 cursor-pointer py-2 pr-2 transition group-hover:text-secondaryDark","data-testid":"restore_history_entry",onClick:v[1]||(v[1]=P=>t("use-entry"))},[g("span",iu,de(q.entry.request.endpoint),1)])),[[w,{theme:"tooltip",delay:[500,20],content:q.entry.updatedOn?i(Jn)(q.entry.updatedOn):null}]]),g("span",null,[_(E,{ref_key:"options",ref:s,interactive:"",trigger:"click",theme:"popover","on-shown":()=>l.value.focus()},{content:W(({hide:P})=>[g("div",{ref_key:"tippyActions",ref:l,class:"flex flex-col focus:outline-none",tabindex:"0",role:"menu",onKeyup:[v[2]||(v[2]=ve(M=>{var H;return(H=c.value)==null?void 0:H.$el.click()},["s"])),ve(M=>P(),["escape"])]},[_(R,{ref_key:"addToCollectionAction",ref:c,icon:i(xi),label:`${i(a)("collection.save_to_collection")}`,shortcut:["S"],onClick:()=>{t("add-to-collection"),P()}},null,8,["icon","label","onClick"])],40,au)]),_:1},8,["on-shown"])]),te(_(y,{icon:i(Po),color:"red",title:i(a)("action.remove"),class:"hidden group-hover:inline-flex","data-testid":"delete_history_entry",onClick:v[3]||(v[3]=P=>t("delete-entry"))},null,8,["icon","title"]),[[w,{theme:"tooltip"}]]),te(_(y,{title:q.entry.star?i(a)("remove.star"):i(a)("add.star"),class:ge({"hidden group-hover:inline-flex":!q.entry.star}),icon:q.entry.star?i(fl):i(ml),color:"yellow","data-testid":"star_button",onClick:v[4]||(v[4]=P=>t("toggle-star"))},null,8,["title","class","icon"]),[[w,{theme:"tooltip"}]])],32)}}}),cu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},du=g("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 14h6v6m10-10h-6V4m0 6l7-7M3 21l7-7"},null,-1),uu=[du];function pu(n,o){return k(),J("svg",cu,[...uu])}const mu={name:"lucide-minimize-2",render:pu},fu={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},vu=g("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"},null,-1),hu=[vu];function gu(n,o){return k(),J("svg",fu,[...hu])}const yu={name:"lucide-maximize-2",render:gu},qu={class:"group flex flex-col"},_u={class:"flex items-center"},Cu={class:"truncate"},bu={class:"flex flex-col text-tiny"},$u=re({__name:"Card",props:{entry:{},showMore:{type:Boolean}},emits:["delete-entry","toggle-star"],setup(n,{emit:o}){const e=ce(),t=Se(dt),l=n,s=o,c=I(!1),a=Z(()=>c.value?l.entry.request.query.split(`
`):l.entry.request.query.split(`
`).slice(0,2).concat(["..."])),C=()=>{t.createNewTab({request:zn({name:l.entry.request.name,url:l.entry.request.url,headers:l.entry.request.headers,query:l.entry.request.query,variables:l.entry.request.variables,auth:l.entry.request.auth}),isDirty:!1})};return(T,q)=>{const v=qe,R=Be("tippy");return k(),J("div",qu,[g("div",_u,[te((k(),J("span",{class:"flex min-w-0 flex-1 cursor-pointer py-2 pl-4 pr-2 transition group-hover:text-secondaryDark","data-testid":"restore_history_entry",onClick:C},[g("span",Cu,de(T.entry.request.url),1)])),[[R,{theme:"tooltip",delay:[500,20],content:T.entry.updatedOn?i(Jn)(T.entry.updatedOn):null}]]),te(_(v,{icon:i(Po),color:"red",title:i(e)("action.remove"),class:"hidden group-hover:inline-flex","data-testid":"delete_history_entry",onClick:q[0]||(q[0]=E=>s("delete-entry"))},null,8,["icon","title"]),[[R,{theme:"tooltip"}]]),te(_(v,{title:c.value?i(e)("hide.more"):i(e)("show.more"),icon:c.value?i(mu):i(yu),class:"hidden group-hover:inline-flex",onClick:q[1]||(q[1]=E=>c.value=!c.value)},null,8,["title","icon"]),[[R,{theme:"tooltip"}]]),te(_(v,{title:T.entry.star?i(e)("remove.star"):i(e)("add.star"),icon:T.entry.star?i(fl):i(ml),color:"yellow",class:ge({"hidden group-hover:inline-flex":!T.entry.star}),"data-testid":"star_button",onClick:q[2]||(q[2]=E=>s("toggle-star"))},null,8,["title","icon","class"]),[[R,{theme:"tooltip"}]])]),g("div",bu,[(k(!0),J(Pe,null,Ge(a.value,(E,y)=>(k(),J("span",{key:`line-${y}`,class:"cursor-pointer truncate whitespace-pre px-4 font-mono text-secondaryLight","data-testid":"restore_history_entry",onClick:C},de(E),1))),128))])])}}}),xu={class:"sticky top-0 z-10 flex flex-shrink-0 flex-col overflow-x-auto border-b border-dividerLight bg-primary"},Iu={class:"flex"},ku=["placeholder"],Tu={class:"flex"},Ru={ref:"tippyActions",class:"flex flex-col focus:outline-none"},Su={class:"pb-2 pl-4 text-tiny text-secondaryLight"},wu=g("hr",null,null,-1),Eu={class:"pb-2 pl-4 text-tiny text-secondaryLight"},Du={class:"flex flex-col"},Pu={class:"group flex min-w-0 flex-1 cursor-pointer items-center justify-between text-tiny text-secondaryLight transition focus:outline-none"},Au={class:"inline-flex items-center justify-center truncate px-4 py-2 transition group-hover:text-secondary"},zu=re({__name:"index",props:{page:{}},setup(n){const o=n,e=be(),t=ce(),l=It(),s=I(""),c=I(!1),a=I(!1),C=He(o.page==="rest"?Ii:ki,[]),T=($,D)=>$==null?!1:typeof $=="string"?D.test($):typeof $=="number"?D.test($.toString()):typeof $=="object"?Object.values($).some(z=>T(z,D)):Array.isArray($)?$.some(z=>T(z,D)):!1,q=Z(()=>_e(C.value,Ri($=>!!$.updatedOn&&(s.value.length===0||T($,new RegExp(Wi(s.value),"gi")))),wn($=>({entry:$,timeAgo:Ti($.updatedOn)})))),v=Z(()=>[{value:"ALL",label:t("filter.all")},{value:"STARRED",label:t("filter.starred")}]),R=I("ALL"),E=Z(()=>[{value:"TIME",label:t("group.time")},{value:"URL",label:t("group.url")}]),y=I("TIME"),w=Z(()=>Si(Qi(q.value,$=>R.value==="STARRED"?$.entry.star:!0),$=>y.value==="TIME"?$.timeAgo.value:P($.entry))),P=$=>{if(o.page==="rest")return $.request.endpoint;if(o.page==="graphql")return $.request.url},M=()=>{o.page==="rest"?Ei():Di(),e.success(`${t("state.history_deleted")}`)},H=Se(We),j=$=>{H.createNewTab({request:$.request,isDirty:!1})},A=$=>o.page==="rest",f=$=>{A()?$.forEach(D=>{mn(D.entry)}):$.forEach(D=>{fn(D.entry)}),e.success(`${t("state.deleted")}`)},F=$=>{o.page==="rest"?mn($):fn($),e.success(`${t("state.deleted")}`)},p=$=>{o.page==="rest"&&xo("request.save-as",{requestType:"rest",request:$.request})},r=$=>{o.page==="rest"?Pi($):Ai($)};return Ot("history.clear",()=>{a.value=!0}),($,D)=>{const z=rl,K=qe,X=Oi,S=rt("tippy"),ue=Fn,ne=kt,d=co,b=Ut,h=Be("tippy");return k(),J("div",null,[g("div",xu,[_(z,{section:i(t)("tab.history"),"is-only-personal":!0},null,8,["section"]),g("div",Iu,[te(g("input",{"onUpdate:modelValue":D[0]||(D[0]=U=>s.value=U),type:"search",autocomplete:"off",class:"flex w-full bg-transparent px-4 py-2 h-8",placeholder:`${i(t)("action.search")}`},null,8,ku),[[ro,s.value]]),g("div",Tu,[te(_(K,{to:"https://docs.hoppscotch.io/documentation/features/history",blank:"",title:i(t)("app.wiki"),icon:i(Lt)},null,8,["title","icon"]),[[h,{theme:"tooltip"}]]),_(S,{interactive:"",trigger:"click",theme:"popover"},{content:W(({hide:U})=>[g("div",Ru,[g("div",Su,de(i(t)("action.filter")),1),_(X,{modelValue:R.value,"onUpdate:modelValue":[D[1]||(D[1]=V=>R.value=V),V=>U()],radios:v.value},null,8,["modelValue","radios","onUpdate:modelValue"]),wu,g("div",Eu,de(i(t)("action.group_by")),1),_(X,{modelValue:y.value,"onUpdate:modelValue":[D[2]||(D[2]=V=>y.value=V),V=>U()],radios:E.value},null,8,["modelValue","radios","onUpdate:modelValue"])],512)]),default:W(()=>[te(_(K,{title:i(t)("action.filter"),icon:i(Ni)},null,8,["title","icon"]),[[h,{theme:"tooltip"}]])]),_:1}),te(_(K,{"data-testid":"clear_history",disabled:i(C).length===0,icon:i(xt),title:i(t)("action.clear_all"),onClick:D[3]||(D[3]=U=>a.value=!0)},null,8,["disabled","icon","title"]),[[h,{theme:"tooltip"}]])])])]),g("div",Du,[(k(!0),J(Pe,null,Ge(w.value,(U,V)=>(k(),J("details",{key:`filteredHistoryGroup-${V}`,class:"flex flex-col",open:""},[g("summary",Pu,[g("span",Au,[_(ue,{class:"indicator mr-2 flex flex-shrink-0"}),g("span",{class:ge([{"capitalize-first":y.value==="TIME"},"truncate"])},de(V),3)]),te(_(K,{icon:i(Po),color:"red",title:i(t)("action.remove"),class:"hidden group-hover:inline-flex",onClick:we=>f(U)},null,8,["icon","title","onClick"]),[[h,{theme:"tooltip"}]])]),(k(!0),J(Pe,null,Ge(U,(we,Fe)=>(k(),B(vt($.page==="rest"?ru:$u),{id:Fe,key:`entry-${Fe}`,entry:we.entry,"show-more":c.value,onToggleStar:Ke=>r(we.entry),onDeleteEntry:Ke=>F(we.entry),onUseEntry:Ke=>j(wi(we.entry)),onAddToCollection:Ke=>p(we.entry)},null,40,["id","entry","show-more","onToggleStar","onDeleteEntry","onUseEntry","onAddToCollection"]))),128))]))),128))]),i(C).length===0?(k(),B(ne,{key:0,src:`/images/states/${i(l).value}/time.svg`,alt:`${i(t)("empty.history")}`,text:i(t)("empty.history")},null,8,["src","alt","text"])):Object.keys(w.value).length===0||q.value.length===0?(k(),B(ne,{key:1,text:`${i(t)("state.nothing_found")} ‟${s.value||R.value}”`},{icon:W(()=>[_(d,{class:"svg-icons opacity-75"})]),body:W(()=>[_(K,{label:i(t)("action.clear"),outline:"",onClick:D[4]||(D[4]=()=>{s.value="",R.value="ALL"})},null,8,["label"])]),_:1},8,["text"])):ee("",!0),_(b,{show:a.value,title:`${i(t)("confirm.remove_history")}`,onHideModal:D[5]||(D[5]=U=>a.value=!1),onResolve:M},null,8,["show","title"])])}}}),Ou={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Lu=g("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[g("circle",{cx:"12",cy:"12",r:"10"}),g("path",{d:"M12 6v6l4 2"})],-1),Mu=[Lu];function Hu(n,o){return k(),J("svg",Ou,[...Mu])}const Ju={name:"lucide-clock",render:Hu};export{Zn as B,wt as F,nl as G,Lo as I,Yc as T,rl as _,st as a,vr as b,_r as c,Qn as d,od as e,zu as f,ol as g,Ju as h,ko as i,Gu as j,Ar as k,zd as l};
//# sourceMappingURL=clock-96f88523.js.map
