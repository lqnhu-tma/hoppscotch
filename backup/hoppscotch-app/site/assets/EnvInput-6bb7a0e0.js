import{f as te,M as oe,g as O,r as me,i as se,o as u,d as p,a as w,w as Z,e as r,Z as j,j as g,n as N,aZ as he,F as ne,l as le,$ as G,m as A,bU as _e,E as F,v as ae,bV as ye,bf as ge,C as ke,h as b,Y as I,bW as xe,b1 as M,bX as L,ai as be,W as we,bY as Ee,aj as Ce,X as Ve,ao as Se,c as $e,bZ as H,b_ as Me,b$ as Ae,c0 as V,c1 as Q,c2 as Be,c3 as Ie,c4 as Te,c5 as De,c6 as Re,c7 as ee,c8 as Le,c9 as He,ca as Oe,cb as je,cc as Fe,cd as Ne,ce as Ue,_ as qe}from"./index-7d8b347c.js";const Pe={key:0},We={class:"flex flex-1 flex-col items-center justify-center"},Ze={class:"flex flex-1 flex-col items-start space-y-2"},Ke={class:"sticky top-0 flex justify-between self-stretch rounded border border-divider bg-popover pl-2"},Je={class:"flex flex-1 items-center"},Xe={class:"font-bold"},Ye={class:"flex flex-1 flex-col divide-y divide-dashed divide-dividerDark rounded border border-dashed border-dividerDark"},ze={key:0,class:"flex-1 px-3 py-2"},Ge={key:1,class:"flex space-x-2 p-2"},Qe=te({__name:"Inspection",props:{inspectionResults:{}},setup(k){const E=oe(),S=k,s=O(()=>S.inspectionResults?S.inspectionResults.reduce((d,l)=>d.severity>l.severity?d:l,{severity:0}):{severity:0}),m=d=>{switch(d){case 1:return"!text-green-500 hover:!text-green-600";case 2:return"!text-yellow-500 hover:!text-yellow-600";case 3:return"!text-red-500 hover:!text-red-600";default:return"!text-gray-500 hover:!text-gray-600"}};return(d,l)=>{const h=ae,c=ye,v=ge,T=ke,D=me("tippy"),_=se("tippy");return d.inspectionResults&&d.inspectionResults.length>0?(u(),p("div",Pe,[w(D,{interactive:"",trigger:"click",theme:"popover"},{content:Z(({hide:B})=>[r("div",Ze,[r("div",Ke,[r("span",Je,[w(c,{class:"svg-icons mr-2 text-accent"}),r("span",Xe,j(g(E)("inspections.title")),1)]),N(w(h,{to:"https://docs.hoppscotch.io/documentation/features/inspections",blank:"",title:g(E)("app.wiki"),icon:g(he)},null,8,["title","icon"]),[[_,{theme:"tooltip"}]])]),(u(!0),p(ne,null,le(d.inspectionResults,(x,$)=>(u(),p("div",{key:$,class:"flex w-full max-w-md self-stretch"},[r("div",Ye,[x.text.type==="text"?(u(),p("span",ze,[G(j(x.text.text)+" ",1),w(T,{blank:"",to:x.doc.link,class:"text-accent transition hover:text-accentDark"},{default:Z(()=>[G(j(x.doc.text)+" ",1),w(v,{class:"svg-icons"})]),_:2},1032,["to"])])):A("",!0),x.action?(u(),p("span",Ge,[w(h,{label:x.action.text,outline:"",filled:"",onClick:()=>{var f;(f=x.action)==null||f.apply(),B()}},null,8,["label","onClick"])])):A("",!0)])]))),128))])]),default:Z(()=>[r("div",We,[N(w(h,{icon:g(_e),class:F(m(s.value.severity)),title:g(E)("inspections.description")},null,8,["icon","class","title"]),[[_,{theme:"tooltip"}]])])]),_:1})])):A("",!0)}}}),et={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},tt=r("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[r("path",{d:"M2 12s3-7 10-7s10 7 10 7s-3 7-10 7s-10-7-10-7Z"}),r("circle",{cx:"12",cy:"12",r:"3"})],-1),ot=[tt];function st(k,E){return u(),p("svg",et,[...ot])}const nt={name:"lucide-eye",render:st},lt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},at=r("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[r("path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24m-3.39-9.04A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"}),r("path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61M2 2l20 20"})],-1),ct=[at];function it(k,E){return u(),p("svg",lt,[...ct])}const rt={name:"lucide-eye-off",render:it},ce=k=>(Ne("data-v-29f17c4c"),k=k(),Ue(),k),ut={class:"no-scrollbar absolute inset-0 flex flex-1 divide-x divide-dividerLight overflow-x-auto"},dt=["placeholder"],pt=["placeholder"],vt=["onClick"],ft={class:"truncate py-0.5"},mt={key:0,class:"hidden items-center text-secondary md:flex"},ht=ce(()=>r("kbd",{class:"shortcut-key"},"Enter",-1)),_t=ce(()=>r("span",{class:"ml-2 truncate"},"to select",-1)),yt=[ht,_t],gt=te({__name:"EnvInput",props:{modelValue:{default:""},placeholder:{default:""},styles:{default:""},envs:{default:null},focus:{type:Boolean,default:!1},selectTextOnMount:{type:Boolean},environmentHighlights:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},autoCompleteSource:{default:void 0},inspectionResults:{default:void 0},contextMenuEnabled:{type:Boolean,default:!0},secret:{type:Boolean,default:!1},autoCompleteEnv:{type:Boolean}},emits:["update:modelValue","change","paste","enter","keyup","keydown","click"],setup(k,{emit:E}){const S=oe(),s=k,m=E,d=b(s.modelValue),l=b(),h=b(null),c=b(-1),v=b(!1),T=b(null),D=b(null),_=b(s.secret),B=b(s.modelValue);I(()=>B.value,e=>{_.value&&U(e)}),xe(D,()=>{v.value=!1});const x=()=>{_.value=!_.value},$=O(()=>s.autoCompleteSource?[...new Set(s.autoCompleteSource)]:[]),f=O(()=>s.modelValue&&s.modelValue.length>0&&$.value&&$.value.length>0?$.value.filter(e=>e.toLowerCase().includes(s.modelValue.toLowerCase())):$.value??[]),U=e=>{m("update:modelValue",e),m("change",e),M(()=>{v.value=!1})};I(()=>s.modelValue,e=>{e||L("contextmenu.open",{position:{top:0,left:0},text:null})});const ie=e=>{["ArrowDown","ArrowUp","Enter","Escape"].includes(e.key)&&e.preventDefault(),["Escape","Tab","Shift"].includes(e.key)&&(v.value=!1),e.key==="Enter"?(f.value.length>0&&c.value>-1&&(U(f.value[c.value]),c.value=-1,M(()=>{var t;(t=l.value)==null||t.dispatch({selection:H.create([H.range(s.modelValue.length,s.modelValue.length)])})})),v.value?v.value=!1:m("enter",e)):v.value=!0,e.key==="ArrowDown"&&(R(),c.value=c.value<f.value.length-1?c.value+1:f.value.length-1,m("keydown",e)),e.key==="ArrowUp"&&(R(),c.value=c.value-1>=0?c.value-1:0,m("keyup",e)),e.key==="ArrowLeft"&&f.value.length>0&&(c.value=0,M(()=>{R()})),e.key==="ArrowRight"&&f.value.length>0&&(c.value=f.value.length-1,M(()=>{R()}))};I(()=>v.value,e=>{e||(c.value=-1)});const R=()=>{const e=T.value;if(e){const t=e.querySelector(".active");t&&t.scrollIntoView({behavior:"smooth",block:"center",inline:"start"})}};I(()=>s.modelValue,e=>{var i,a;const t=e.replaceAll(`
`,""),o=(i=l.value)==null?void 0:i.state.doc.toJSON().join(l.value.state.lineBreak);(d.value!==t||e!==o)&&(d.value=t,(a=l.value)==null||a.dispatch({filter:!1,changes:{from:0,to:l.value.state.doc.length,insert:t}}))},{immediate:!0,flush:"sync"});let q=null,P=null;const re=be(Me,[]),ue=we(Ae),K=O(()=>s.envs?s.envs.map(e=>{const{key:t,secret:o}=e,i=o?"********":e.value,a="sourceEnv"in e?e.sourceEnv:null;return{key:t,value:i,sourceEnv:a,secret:o}}):[...ue.currentActiveTab.value.document.request.requestVariables.map(({active:e,key:t,value:o})=>e?{key:t,value:o,sourceEnv:"RequestVariable",secret:!1}:{}),...re.value]);function de(e){const t=(K.value??[]).map(n=>({label:n!=null&&n.key?`<<${n.key}>>`:"",info:(n==null?void 0:n.value)??"",apply:n!=null&&n.key?`<<${n.key}>>`:""})).filter(n=>n),o=je(e.state).resolveInner(e.pos,-1),i=e.state.sliceDoc(o.from,e.pos),a=/<<\w*$/.exec(i);return!a&&!e.explicit?null:{from:a?o.from+a.index:e.pos,options:t,validFor:/^(<<\w*)?$/}}const pe=new Ee(K,l);function ve(){var t,o,i;const e=(t=l.value)==null?void 0:t.state.selection.main;if(e){const{from:a,to:n}=e;if(a===n)return;const y=(o=l.value)==null?void 0:o.state.doc.sliceString(a,n),C=(i=l.value)==null?void 0:i.coordsAtPos(a),Y=(C==null?void 0:C.top)??0,z=(C==null?void 0:C.left)??0;y?(L("contextmenu.open",{position:{top:Y,left:z},text:y}),v.value=!1):L("contextmenu.open",{position:{top:Y,left:z},text:null})}}const W=e=>Fe(()=>{ve()},e),J=e=>{s.contextMenuEnabled&&(e.addEventListener("mouseup",W(140)),e.addEventListener("keyup",W(140)));const t=fe(s.readonly||_.value);l.value=new V({parent:e,state:Q.create({doc:s.modelValue,extensions:t})})},fe=e=>[V.contentAttributes.of({"aria-label":s.placeholder}),V.contentAttributes.of({"data-enable-grammarly":"false"}),V.updateListener.of(o=>{e&&(o.view.contentDOM.inputMode="none")}),Q.changeFilter.of(()=>!e),Be,e?V.theme({".cm-content":{caretColor:"var(--secondary-dark-color)",color:"var(--secondary-dark-color)",backgroundColor:"var(--divider-color)",opacity:.25}}):V.theme({}),Ie({parent:document.body,position:"absolute"}),s.environmentHighlights?pe:[],Te(s.placeholder),V.domEventHandlers({paste(o){var i;q=o,P=((i=o.clipboardData)==null?void 0:i.getData("text"))??""},drop(o){o.preventDefault()},scroll(o){o.target&&s.contextMenuEnabled&&W(30)()}}),s.autoCompleteEnv?De({activateOnTyping:!0,override:[de]}):[],Re.fromClass(class{update(o){if(!e&&o.docChanged){const i=ee(d.value);d.value=o.state.doc.toJSON().join(o.state.lineBreak);const a=ee(d.value).replaceAll(`
`,"");if(m("update:modelValue",a),m("change",a),!!o.transactions.find(y=>y.isUserEvent("input.paste"))&&q){const y=P;M(()=>{m("paste",{pastedValue:y,prevValue:i})})}else q=null,P=null;s.contextMenuEnabled&&L("contextmenu.open",{position:{top:0,left:0},text:null})}}}),Le(),He.of([...Oe])],X=()=>{M(()=>{var e,t;(e=l.value)==null||e.focus(),(t=l.value)==null||t.dispatch({selection:H.create([H.range(0,s.modelValue.length)])})})};return Ce(()=>{var e,t,o;h.value&&(l.value||J(h.value),s.selectTextOnMount&&X(),s.focus&&((e=l.value)==null||e.focus()),(o=(t=Ve.ui)==null?void 0:t.onCodemirrorInstanceMount)==null||o.call(t,h.value))}),I(h,()=>{var e;h.value?(l.value||J(h.value),s.selectTextOnMount&&X()):((e=l.value)==null||e.destroy(),l.value=void 0)}),(e,t)=>{const o=ae,i=Qe,a=se("tippy");return u(),p("div",{ref_key:"autoCompleteWrapper",ref:D,class:"autocomplete-wrapper"},[r("div",ut,[_.value?N((u(),p("input",{key:0,id:"secret","onUpdate:modelValue":t[0]||(t[0]=n=>B.value=n),name:"secret",placeholder:g(S)("environment.secret_value"),class:F(["flex flex-1 bg-transparent px-4",e.styles]),type:"password"},null,10,dt)),[[Se,B.value]]):(u(),p("div",{key:1,ref_key:"editor",ref:h,placeholder:e.placeholder,class:F(["flex flex-1",e.styles]),onClick:t[1]||(t[1]=n=>m("click",n)),onKeydown:ie,onFocusin:t[2]||(t[2]=n=>v.value=!0)},null,42,pt)),e.secret?N((u(),$e(o,{key:2,title:_.value?g(S)("action.show_secret"):g(S)("action.hide_secret"),icon:_.value?g(rt):g(nt),onClick:x},null,8,["title","icon"])),[[a,{theme:"tooltip"}]]):A("",!0),w(i,{"inspection-results":e.inspectionResults,class:"sticky inset-y-0 right-0 rounded-r bg-primary"},null,8,["inspection-results"])]),v.value&&e.autoCompleteSource&&f.value.length>0?(u(),p("ul",{key:0,ref_key:"suggestionsMenu",ref:T,class:"suggestions"},[(u(!0),p(ne,null,le(f.value,(n,y)=>(u(),p("li",{key:`suggestion-${y}`,class:F({active:c.value===y}),onClick:C=>U(n)},[r("span",ft,j(n),1),c.value===y?(u(),p("div",mt,yt)):A("",!0)],10,vt))),128))],512)):A("",!0)],512)}}});const xt=qe(gt,[["__scopeId","data-v-29f17c4c"]]);export{nt as I,xt as _,Qe as a,rt as b};
//# sourceMappingURL=EnvInput-6bb7a0e0.js.map
