import{f as E,M as T,a9 as g,W as i,aj as m,cF as O,o as R,d as N,a as S,ap as v,cz as z,cO as A,aK as I,b$ as k}from"./index-7d8b347c.js";import{r as C}from"./oauth.service-b346be9c.js";const L={class:"flex items-center justify-center"},D=E({__name:"oauth",setup(b){const t=T(),o=g(),a=v(),h=i(A),u=i(I),d=i(k);function p(e){switch(e){case"AUTH_SERVER_RETURNED_ERROR":return t("authorization.oauth.redirect_auth_server_returned_error");case"NO_AUTH_CODE":return t("authorization.oauth.redirect_no_auth_code");case"INVALID_STATE":return t("authorization.oauth.redirect_invalid_state");case"NO_TOKEN_ENDPOINT":return t("authorization.oauth.redirect_no_token_endpoint");case"NO_CLIENT_ID":return t("authorization.oauth.redirect_no_client_id");case"NO_CLIENT_SECRET":return t("authorization.oauth.redirect_no_client_secret");case"NO_CODE_VERIFIER":return t("authorization.oauth.redirect_no_code_verifier");case"AUTH_TOKEN_REQUEST_FAILED":return t("authorization.oauth.redirect_auth_token_request_failed");case"AUTH_TOKEN_REQUEST_INVALID_RESPONSE":return t("authorization.oauth.redirect_auth_token_request_invalid_response");default:return t("authorization.oauth.something_went_wrong_on_oauth_redirect")}}return m(async()=>{const e=u.getLocalConfig("oauth_temp_config");if(!e){a.error(t("authorization.oauth.something_went_wrong_on_oauth_redirect")),o.push("/");return}const c=JSON.parse(e),{context:r,source:n}=c,s=await C();if(O(s)){a.error(p(s.left)),o.push(n==="REST"?"/":"/graphql");return}if((r==null?void 0:r.type)==="collection-properties"){const l={...c,token:s.right.access_token};u.setLocalConfig("oauth_temp_config",JSON.stringify(l)),a.success(t("authorization.oauth.token_fetched_successfully")),o.push(n==="REST"?"/":"/graphql");return}const f=n==="GraphQL"?"/graphql":"/",_=n==="GraphQL"?h:d;_.currentActiveTab.value.document.request.auth.authType==="oauth-2"&&(_.currentActiveTab.value.document.request.auth.grantTypeInfo.token=s.right.access_token,a.success(t("authorization.oauth.token_fetched_successfully"))),o.push(f)}),(e,c)=>{const r=z;return R(),N("div",L,[S(r)])}}});export{D as default};
//# sourceMappingURL=oauth-c3b4abdc.js.map
