{"version":3,"file":"regex-774f4422.js","sources":["../../../hoppscotch-common/src/components/realtime/Log.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-1 flex-col overflow-auto whitespace-nowrap\">\n    <div\n      v-if=\"log.length !== 0\"\n      class=\"sticky top-0 z-10 flex flex-shrink-0 items-center justify-between overflow-x-auto border-b border-dividerLight bg-primary pl-4\"\n    >\n      <label for=\"log\" class=\"truncate font-semibold text-secondaryLight\">\n        {{ title }}\n      </label>\n      <div class=\"flex\">\n        <HoppButtonSecondary\n          v-tippy=\"{ theme: 'tooltip' }\"\n          :title=\"t('action.delete')\"\n          :icon=\"IconTrash\"\n          @click=\"emit('delete')\"\n        />\n        <HoppButtonSecondary\n          id=\"bottompage\"\n          v-tippy=\"{ theme: 'tooltip' }\"\n          :title=\"t('action.scroll_to_top')\"\n          :icon=\"IconArrowUp\"\n          @click=\"scrollTo('top')\"\n        />\n        <HoppButtonSecondary\n          id=\"bottompage\"\n          v-tippy=\"{ theme: 'tooltip' }\"\n          :title=\"t('action.scroll_to_bottom')\"\n          :icon=\"IconArrowDown\"\n          @click=\"scrollTo('bottom')\"\n        />\n        <HoppButtonSecondary\n          id=\"bottompage\"\n          v-tippy=\"{ theme: 'tooltip' }\"\n          :title=\"`${t('action.autoscroll')}: ${\n            autoScrollEnabled ? t('action.turn_off') : t('action.turn_on')\n          }`\"\n          :icon=\"IconChevronsDown\"\n          :color=\"autoScrollEnabled ? 'green' : 'red'\"\n          @click=\"autoScrollEnabled = !autoScrollEnabled\"\n        />\n      </div>\n    </div>\n    <div\n      v-if=\"log.length !== 0\"\n      ref=\"logs\"\n      class=\"flex flex-1 flex-col overflow-y-auto\"\n    >\n      <div class=\"border-b border-dividerLight\">\n        <div class=\"flex flex-col divide-y divide-dividerLight\">\n          <RealtimeLogEntry\n            v-for=\"(entry, index) in log\"\n            :key=\"`entry-${index}`\"\n            :entry=\"entry\"\n          />\n        </div>\n      </div>\n    </div>\n    <AppShortcutsPrompt v-else class=\"p-4\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, PropType, watch, Ref } from \"vue\"\nimport IconTrash from \"~icons/lucide/trash\"\nimport IconArrowUp from \"~icons/lucide/arrow-up\"\nimport IconArrowDown from \"~icons/lucide/arrow-down\"\nimport IconChevronsDown from \"~icons/lucide/chevron-down\"\nimport { useThrottleFn, useScroll } from \"@vueuse/core\"\nimport { useI18n } from \"@composables/i18n\"\n\nexport type LogEntryData = {\n  prefix?: string\n  ts: number | undefined\n  source: \"info\" | \"client\" | \"server\" | \"disconnected\"\n  payload: string\n  event?: \"connecting\" | \"connected\" | \"disconnected\" | \"error\"\n}\n\nconst props = defineProps({\n  log: { type: Array as PropType<LogEntryData[]>, default: () => [] },\n  title: {\n    type: String,\n    default: \"\",\n  },\n})\n\nconst emit = defineEmits<{\n  (e: \"delete\"): void\n}>()\n\nconst t = useI18n()\n\nconst logs = ref<HTMLElement>()\n\nconst autoScrollEnabled = ref(true)\n\nconst logListScroll = useScroll(logs as Ref<HTMLElement>)\n\n// Disable autoscroll when scrolling to top\nwatch(logListScroll.isScrolling, (isScrolling) => {\n  if (isScrolling && logListScroll.directions.top)\n    autoScrollEnabled.value = false\n})\n\nconst scrollTo = (position: \"top\" | \"bottom\") => {\n  if (position === \"top\") {\n    logs.value?.scroll({\n      behavior: \"smooth\",\n      top: 0,\n    })\n  } else if (position === \"bottom\") {\n    logs.value?.scroll({\n      behavior: \"smooth\",\n      top: logs.value?.scrollHeight,\n    })\n  }\n}\n\nwatch(\n  () => props.log,\n  useThrottleFn(() => {\n    if (autoScrollEnabled.value) scrollTo(\"bottom\")\n  }, 200),\n  { flush: \"post\" }\n)\n</script>\n"],"names":["props","__props","emit","__emit","t","useI18n","logs","ref","autoScrollEnabled","logListScroll","useScroll","watch","isScrolling","scrollTo","position","_a","_c","_b","useThrottleFn"],"mappings":"m0BA8EA,MAAAA,EAAAC,EAQAC,EAAAC,EAIAC,EAAAC,IAEAC,EAAAC,IAEAC,EAAAD,EAAA,EAAA,EAEAE,EAAAC,EAAAJ,CAAA,EAGAK,EAAAF,EAAA,YAAAG,GAAA,CACEA,GAAAH,EAAA,WAAA,MACED,EAAA,MAAA,GAA0B,CAAA,EAG9B,MAAAK,EAAAC,GAAA,WACEA,IAAA,OACEC,EAAAT,EAAA,QAAA,MAAAS,EAAA,OAAA,CAAmB,SAAA,SACP,IAAA,CACL,GACND,IAAA,YAEDE,EAAAV,EAAA,QAAA,MAAAU,EAAA,OAAA,CAAmB,SAAA,SACP,KAAAC,EAAAX,EAAA,QAAA,YAAAW,EAAA,YACO,GAErB,EAGF,OAAAN,EAAA,IAAAX,EAAA,IACckB,EAAA,IAAA,CAEVV,EAAA,OAA6BK,EAAA,QAAA,CAAiB,EAAA,GAAA,EAC1C,CAAA,MAAA,MAAA,CACU"}