{"version":3,"file":"_id-66783983.js","sources":["../../../hoppscotch-common/src/pages/r/_id.vue"],"sourcesContent":["<template>\n  <div class=\"flex flex-col items-center justify-between\">\n    <div\n      v-if=\"invalidLink\"\n      class=\"flex flex-1 flex-col items-center justify-center\"\n    >\n      <icon-lucide-alert-triangle class=\"svg-icons mb-2 opacity-75\" />\n      <h1 class=\"heading text-center\">\n        {{ t(\"error.invalid_link\") }}\n      </h1>\n      <p class=\"mt-2 text-center\">\n        {{ t(\"error.invalid_link_description\") }}\n      </p>\n      <p class=\"mt-4\">\n        <HoppButtonSecondary\n          to=\"/\"\n          :icon=\"IconHome\"\n          filled\n          :label=\"t('app.home')\"\n        />\n      </p>\n    </div>\n    <div v-else class=\"flex flex-1 flex-col items-center justify-center p-4\">\n      <div\n        v-if=\"sharedRequestDetails.loading\"\n        class=\"flex flex-1 flex-col items-center justify-center p-4\"\n      >\n        <HoppSmartSpinner />\n      </div>\n      <div v-else>\n        <div\n          v-if=\"\n            !sharedRequestDetails.loading && E.isLeft(sharedRequestDetails.data)\n          \"\n          class=\"flex flex-col items-center p-4\"\n        >\n          <icon-lucide-alert-triangle class=\"svg-icons mb-2 opacity-75\" />\n          <h1 class=\"heading text-center\">\n            {{ t(\"error.invalid_link\") }}\n          </h1>\n          <p class=\"mt-2 text-center\">\n            {{ t(\"error.invalid_link_description\") }}\n          </p>\n          <p class=\"mt-4\">\n            <HoppButtonSecondary\n              to=\"/\"\n              :icon=\"IconHome\"\n              filled\n              :label=\"t('app.home')\"\n            />\n            <HoppButtonSecondary\n              :icon=\"IconRefreshCW\"\n              :label=\"t('app.reload')\"\n              filled\n              @click=\"reloadApplication\"\n            />\n          </p>\n        </div>\n        <div\n          v-if=\"\n            !sharedRequestDetails.loading &&\n            E.isRight(sharedRequestDetails.data)\n          \"\n          class=\"flex flex-1 flex-col items-center justify-center p-4\"\n        >\n          <h1 class=\"heading\">\n            {{ t(\"state.loading\") }}\n          </h1>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { onMounted, ref, watch } from \"vue\"\nimport { useRoute, useRouter } from \"vue-router\"\nimport * as E from \"fp-ts/Either\"\nimport { safelyExtractRESTRequest } from \"@hoppscotch/data\"\nimport { useGQLQuery } from \"@composables/graphql\"\nimport { useI18n } from \"@composables/i18n\"\nimport {\n  ResolveShortcodeDocument,\n  ResolveShortcodeQuery,\n  ResolveShortcodeQueryVariables,\n} from \"~/helpers/backend/graphql\"\n\nimport IconHome from \"~icons/lucide/home\"\nimport IconRefreshCW from \"~icons/lucide/refresh-cw\"\nimport { getDefaultRESTRequest } from \"~/helpers/rest/default\"\nimport { platform } from \"~/platform\"\nimport { RESTTabService } from \"~/services/tab/rest\"\nimport { useService } from \"dioc/vue\"\n\nconst route = useRoute()\nconst router = useRouter()\n\nconst t = useI18n()\n\nconst tabs = useService(RESTTabService)\n\nconst invalidLink = ref(false)\nconst sharedRequestID = ref(\"\")\n\nconst sharedRequestDetails = useGQLQuery<\n  ResolveShortcodeQuery,\n  ResolveShortcodeQueryVariables,\n  \"\"\n>({\n  query: ResolveShortcodeDocument,\n  variables: {\n    code: route.params.id.toString(),\n  },\n})\n\nwatch(\n  () => sharedRequestDetails.data,\n  () => addRequestToTab()\n)\n\nconst addRequestToTab = () => {\n  if (sharedRequestDetails.loading) return\n\n  const data = sharedRequestDetails.data\n\n  if (E.isRight(data)) {\n    if (!data.right.shortcode?.request) {\n      invalidLink.value = true\n      return\n    }\n\n    platform.analytics?.logEvent({\n      type: \"HOPP_SHORTCODE_RESOLVED\",\n    })\n\n    const request: unknown = JSON.parse(data.right.shortcode?.request as string)\n\n    tabs.createNewTab({\n      request: safelyExtractRESTRequest(request, getDefaultRESTRequest()),\n      isDirty: false,\n    })\n\n    router.push({ path: \"/\" })\n  }\n}\n\nconst reloadApplication = () => {\n  window.location.reload()\n}\n\nonMounted(() => {\n  if (typeof route.params.id === \"string\") {\n    sharedRequestID.value = route.params.id\n    sharedRequestDetails.execute()\n  }\n  invalidLink.value = !sharedRequestID.value\n})\n</script>\n"],"names":["route","useRoute","router","useRouter","t","useI18n","tabs","useService","RESTTabService","invalidLink","ref","sharedRequestID","sharedRequestDetails","useGQLQuery","ResolveShortcodeDocument","watch","addRequestToTab","data","E.isRight","_a","_b","platform","request","_c","safelyExtractRESTRequest","getDefaultRESTRequest","reloadApplication","onMounted"],"mappings":"60BA8FA,MAAAA,EAAAC,IACAC,EAAAC,IAEAC,EAAAC,IAEAC,EAAAC,EAAAC,CAAA,EAEAC,EAAAC,EAAA,EAAA,EACAC,EAAAD,EAAA,EAAA,EAEAE,EAAAC,EAAA,CAIE,MAAAC,EACO,UAAA,CACI,KAAAd,EAAA,OAAA,GAAA,SAAA,CACsB,CACjC,CAAA,EAGFe,EAAA,IAAAH,EAAA,KAC6B,IAAAI,EAAA,CACL,EAGxB,MAAAA,EAAA,IAAA,WACE,GAAAJ,EAAA,QAAkC,OAElC,MAAAK,EAAAL,EAAA,KAEA,GAAAM,EAAAD,CAAA,EAAA,CACE,GAAA,GAAAE,EAAAF,EAAA,MAAA,YAAA,MAAAE,EAAA,SAAA,CACEV,EAAA,MAAA,GACA,MAAA,EAGFW,EAAAC,EAAA,YAAA,MAAAD,EAAA,SAAA,CAA6B,KAAA,yBACrB,GAGR,MAAAE,EAAA,KAAA,OAAAC,EAAAN,EAAA,MAAA,YAAA,YAAAM,EAAA,OAAA,EAEAjB,EAAA,aAAA,CAAkB,QAAAkB,EAAAF,EAAAG,GAAA,EACkD,QAAA,EACzD,CAAA,EAGXvB,EAAA,KAAA,CAAA,KAAA,GAAA,CAAA,CAAyB,CAC3B,EAGFwB,EAAA,IAAA,CACE,OAAA,SAAA,QAAuB,EAGzB,OAAAC,EAAA,IAAA,CACE,OAAA3B,EAAA,OAAA,IAAA,WACEW,EAAA,MAAAX,EAAA,OAAA,GACAY,EAAA,QAAA,GAEFH,EAAA,MAAA,CAAAE,EAAA,KAAqC,CAAA"}