import{f as g,aa as y,cW as k,cX as b,ai as v,X as r,g as D,cY as j,ap as I,M as w,cZ as L,bX as $,c_ as S,p as C,c$ as T,d0 as U,_ as q,o as i,d as s,a as n,e as t,Z as a,c as E,m as l,bU as H,cz as B,au as P,v as M,cL as N}from"./index-7d8b347c.js";import{o as R}from"./auth-6cc8f15f.js";const A=g({layout:"empty",setup(){const e=y(),o=k({query:b,variables:{inviteID:e.query.id},defer:!0});R(()=>{typeof e.query.id=="string"&&o.execute({inviteID:e.query.id})});const d=v(r.auth.getProbableUserStream(),r.auth.getProbableUser()),c=v(r.auth.getCurrentUserStream(),r.auth.getCurrentUser()),m=D(()=>{if(d.value){if(!c.value)return!0}else return!1;return!1});return{E:j,inviteDetails:o,loadingCurrentUser:m,currentUser:c,toast:I(),t:w(),IconHome:L,invokeAction:$}},data(){return{invalidLink:!1,loading:!1,revokedLink:!1,inviteID:"",joinTeamSuccess:!1}},beforeMount(){S()},mounted(){typeof this.$route.query.id=="string"&&(this.inviteID=this.$route.query.id),this.invalidLink=!this.inviteID},methods:{joinTeam(){this.loading=!0,C(U(this.inviteID),T(()=>{this.loading=!1,this.toast.error(`${this.t("error.something_went_wrong")}`)},()=>{this.joinTeamSuccess=!0,this.loading=!1}))()},getErrorMessage(e){if(e.type==="network_error")return this.t("error.network_error");switch(e.error){case"team_invite/not_valid_viewer":return this.t("team.not_valid_viewer");case"team_invite/not_found":return this.t("team.not_found");case"team_invite/no_invite_found":return this.t("team.no_invite_found");case"team_invite/already_member":return this.t("team.already_member");case"team_invite/email_do_not_match":return this.t("team.email_do_not_match");default:return this.t("error.something_went_wrong")}}}}),V={class:"flex min-h-screen flex-col items-center justify-between"},X={key:0,class:"flex flex-1 flex-col items-center justify-center"},z={class:"heading text-center"},G={class:"mt-2 text-center"},O={key:1,class:"flex flex-1 flex-col items-center justify-center p-4"},Q={key:2,class:"flex flex-1 flex-col items-center justify-center p-4"},W={class:"heading"},Z={class:"mt-2"},F={key:3,class:"flex flex-1 flex-col items-center justify-center p-4"},Y={key:0,class:"flex flex-1 flex-col items-center justify-center p-4"},J={key:1},K={key:0,class:"flex flex-col items-center p-4"},x={class:"mt-8 flex flex-col items-center rounded border border-dividerLight p-4"},ee={class:"mb-4"},te={class:"flex"},ie={key:1,class:"flex flex-1 flex-col items-center justify-center p-4"},se={class:"heading"},ae={class:"mt-2 text-secondaryLight"},ne={class:"mt-8"},oe={key:2,class:"flex flex-1 flex-col items-center justify-center p-4"},re={class:"heading"},le={class:"mt-2 text-secondaryLight"},ce={class:"mt-8"},de={class:"p-4"};function me(e,o,d,c,m,ue){const u=H,_=B,h=P,p=N,f=M;return i(),s("div",V,[e.invalidLink?(i(),s("div",X,[n(u,{class:"svg-icons mb-2 opacity-75"}),t("h1",z,a(e.t("team.invalid_invite_link")),1),t("p",G,a(e.t("team.invalid_invite_link_description")),1)])):e.loadingCurrentUser?(i(),s("div",O,[n(_)])):e.currentUser===null?(i(),s("div",Q,[t("h1",W,a(e.t("team.login_to_continue")),1),t("p",Z,a(e.t("team.login_to_continue_description")),1),n(h,{label:e.t("auth.login_to_hoppscotch"),class:"mt-8",onClick:o[0]||(o[0]=_e=>e.invokeAction("modals.login.toggle"))},null,8,["label"])])):(i(),s("div",F,[e.inviteDetails.loading?(i(),s("div",Y,[n(_)])):(i(),s("div",J,[!e.inviteDetails.loading&&e.E.isLeft(e.inviteDetails.data)?(i(),s("div",K,[n(u,{class:"svg-icons mb-4"}),t("p",null,a(e.getErrorMessage(e.inviteDetails.data.left)),1),t("p",x,[t("span",ee,a(e.t("team.logout_and_try_again")),1),t("span",te,[e.inviteDetails.data.left.type==="gql_error"?(i(),E(p,{key:0,outline:""})):l("",!0)])])])):l("",!0),!e.inviteDetails.loading&&e.E.isRight(e.inviteDetails.data)&&!e.joinTeamSuccess?(i(),s("div",ie,[t("h1",se,a(e.t("team.join_team",{workspace:e.inviteDetails.data.right.teamInvitation.team.name})),1),t("p",ae,a(e.t("team.invited_to_team",{owner:e.inviteDetails.data.right.teamInvitation.creator.displayName??e.inviteDetails.data.right.teamInvitation.creator.email,workspace:e.inviteDetails.data.right.teamInvitation.team.name})),1),t("div",ne,[n(h,{label:e.t("team.join_team",{workspace:e.inviteDetails.data.right.teamInvitation.team.name}),loading:e.loading,disabled:e.revokedLink,onClick:e.joinTeam},null,8,["label","loading","disabled","onClick"])])])):l("",!0),!e.inviteDetails.loading&&e.E.isRight(e.inviteDetails.data)&&e.joinTeamSuccess?(i(),s("div",oe,[t("h1",re,a(e.t("team.joined_team",{workspace:e.inviteDetails.data.right.teamInvitation.team.name})),1),t("p",le,a(e.t("team.joined_team_description",{workspace:e.inviteDetails.data.right.teamInvitation.team.name})),1),t("div",ce,[n(f,{to:"/",icon:e.IconHome,filled:"",label:e.t("app.home")},null,8,["icon","label"])])])):l("",!0)]))])),t("div",de,[n(f,{class:"!font-bold tracking-wide !text-secondaryDark",label:"HOPPSCOTCH",to:"/"})])])}const ve=q(A,[["render",me]]);export{ve as default};
//# sourceMappingURL=join-team-d6466d4b.js.map
