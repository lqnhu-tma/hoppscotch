import{d as Q,u as z,b as F,e as G,f as k,g as J,h as K,i as P,o,c as l,j as a,k as s,a as d,t as m,l as h,w as I,m as W,n as E,p as X,q as Y,s as Z,v as ee,x as te,y as se}from"./index.96dfa614.js";import{u as ne,b as ie}from"./index.340b5eca.js";import{c as oe}from"./clipboard.946f3457.js";import{I as g}from"./trash.f5ccfce4.js";import{I as ae,R as le}from"./graphql.96e353c8.js";import{f as $}from"./index.a5da96cc.js";const re={class:"flex flex-col"},ce={class:"flex"},de={class:"flex justify-between items-center"},ue={class:"text-lg font-bold text-accentContrast pt-6 pb-4"},ve={class:"flex flex-col"},_e={class:"relative py-2 overflow-x-auto"},me={key:0,class:"flex justify-center"},pe={key:1},fe={key:2},ye={key:0,class:"pr-2 truncate"},be={class:"truncate"},ke={class:"text-gray-400 text-tiny"},he={key:1},ge={key:0,class:"my-1 mr-2"},xe={key:4,class:"fixed m-2 bottom-0 left-40 right-0 w-min mx-auto shadow-2xl"},we={class:"flex justify-center items-end bg-primaryLight border border-divider rounded-md mb-5"},Re=Q({__name:"invited",setup(Ce){var C;const e=z(),u=se(),B=F(),T=ne(ie).greater("lg"),M=t=>$(new Date(t),"dd-MM-yyyy"),R=t=>$(new Date(t),"hh:mm a"),{fetching:S,error:j,data:x}=G({query:ae}),U=[{key:"inviteeEmail",label:e("users.invitee_email")},{key:"adminEmail",label:e("users.invited_by")},{key:"invitedOn",label:e("users.invited_on")},{key:"action",label:"Action"}],r=k([]),p=J({get:()=>{var t;return(t=x.value)==null?void 0:t.infra.invitedUsers},set:t=>{!t||(x.value.infra.invitedUsers=t)}}),v=k(!1),y=k(null),H=K(le),w=t=>{v.value=!0,y.value=t},L=async t=>{var f;const n=t?[t]:r.value.map(_=>_.inviteeEmail),b={inviteeEmails:n};(await H.executeMutation(b)).error?t?u.error(e("state.delete_invite_failure")):u.error(e("state.delete_invites_failure")):(p.value=(f=p.value)==null?void 0:f.filter(_=>!n.includes(_.inviteeEmail)),r.value.splice(0,r.value.length),t?u.success(e("state.delete_invite_success")):u.success(e("state.delete_invites_success"))),v.value=!1,y.value=null},O=(C=Object.create(globalThis.import_meta_env||null).VITE_BASE_URL)!=null?C:"",A=()=>{oe(O),u.success(e("state.copied_to_clipboard"))};return(t,n)=>{var D;const b=X,c=Y,f=Z,_=ee,V=te,N=P("tippy");return o(),l("div",re,[a("div",ce,[a("button",{class:"p-2 rounded-3xl bg-divider",onClick:n[0]||(n[0]=i=>s(B).push("/users"))},[d(b,{class:"text-xl"})])]),a("div",de,[a("h3",ue,m(s(e)("users.pending_invites")),1),d(c,{label:s(e)("users.copy_link"),outline:"",filled:"",onClick:A},null,8,["label"])]),a("div",ve,[a("div",_e,[s(S)?(o(),l("div",me,[d(f)])):s(j)?(o(),l("div",pe,m(s(e)("users.invite_load_list_error")),1)):((D=p.value)==null?void 0:D.length)===0?(o(),l("div",fe,m(s(e)("users.no_invite")),1)):(o(),h(_,{key:3,headings:U,list:p.value,"selected-rows":r.value},{invitedOn:I(({item:i})=>[i?(o(),l("div",ye,[a("span",be,m(M(i.invitedOn)),1),a("div",ke,m(R(i.invitedOn)),1)])):(o(),l("span",he," - "))]),action:I(({item:i})=>[i?(o(),l("div",ge,[s(T)?(o(),h(c,{key:0,icon:s(g),label:s(e)("users.revoke_invitation"),class:"text-secondaryDark bg-red-500 hover:bg-red-600",onClick:q=>w(i.inviteeEmail)},null,8,["icon","label","onClick"])):W((o(),h(c,{key:1,icon:s(g),title:s(e)("users.revoke_invitation"),class:"ml-2 !text-red-500",onClick:q=>w(i.inviteeEmail)},null,8,["icon","title","onClick"])),[[N,{theme:"tooltip"}]])])):E("",!0)]),_:1},8,["list","selected-rows"])),r.value.length?(o(),l("div",xe,[a("div",we,[d(c,{label:s(e)("state.selected",{count:r.value.length}),class:"py-4 border-divider rounded-r-none bg-emerald-800 text-secondaryDark"},null,8,["label"]),d(c,{icon:s(g),label:s(e)("users.revoke_invitation"),class:"py-4 border-divider rounded-l-none hover:bg-red-500",onClick:n[1]||(n[1]=i=>v.value=!0)},null,8,["icon","label"])])])):E("",!0)])]),d(V,{show:v.value,title:r.value.length>0?s(e)("state.confirm_delete_invites"):s(e)("state.confirm_delete_invite"),onHideModal:n[2]||(n[2]=i=>v.value=!1),onResolve:n[3]||(n[3]=i=>L(y.value))},null,8,["show","title"])])}}});export{Re as default};
